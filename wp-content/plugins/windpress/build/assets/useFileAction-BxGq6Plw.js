import{d as Pe,a as Fe,w as Se,__tla as Fn}from"./worker-m7k6XpKw.js";import{aj as Ce,ak as xe,w as je,x as Ae,a as Y,al as M,g as ke,e as Sn,f as Cn,l as xn,__tla as jn}from"./dashboard-C7hSnKc-.js";import{u as An,e as kn,h as On}from"./index-Dyb13sZ8.min.js";import{U as Oe,i as Ie,S as W,a as In}from"./_initCloneObject-DhZa6hP3.min.js";import{M as Vn,e as Tn,i as Ve}from"./_toKey-BwG29BdO.min.js";import{S as Te,b as De}from"./isObject-K1YoVIH1.min.js";import{ad as Le,E as A,w as q,_ as Dn,H as N,I,J as V,ai as Ln,K as g,aw as Rn,Q as u,O as Re,V as P,W as T,X as F}from"./runtime-core.esm-bundler-SLuuURr5.min.js";import{e as zn}from"./vfs-CoPIgrSP.js";import{n as Yn}from"./index.browser-B0na17u1.min.js";import{d as ze}from"./dayjs.min-1IERyFU4.min.js";import{_ as D}from"./preload-helper-DuwVgReH.min.js";import{p as Mn}from"./index-CkDJq9vY.min.js";import{c as Nn,a as $n}from"./index-bXyjzgw5.min.js";import{_ as Ye}from"./FormField-CVHMQpv8.min.js";let Me,H,L,Un=Promise.all([(()=>{try{return Fn}catch{}})(),(()=>{try{return jn}catch{}})()]).then(async()=>{var Ne="__lodash_hash_undefined__";function $e(e){return this.__data__.set(e,Ne),this}function Ue(e){return this.__data__.has(e)}function R(e){var n=-1,i=e==null?0:e.length;for(this.__data__=new Vn;++n<i;)this.add(e[n])}R.prototype.add=R.prototype.push=$e,R.prototype.has=Ue;function We(e,n){for(var i=-1,s=e==null?0:e.length;++i<s;)if(n(e[i],i,e))return!0;return!1}function qe(e,n){return e.has(n)}var He=1,Je=2;function J(e,n,i,s,r,t){var o=i&He,l=e.length,c=n.length;if(l!=c&&!(o&&c>l))return!1;var _=t.get(e),m=t.get(n);if(_&&m)return _==n&&m==e;var w=-1,f=!0,b=i&Je?new R:void 0;for(t.set(e,n),t.set(n,e);++w<l;){var h=e[w],E=n[w];if(s)var C=o?s(E,h,w,n,e,t):s(h,E,w,e,n,t);if(C!==void 0){if(C)continue;f=!1;break}if(b){if(!We(n,function(j,a){if(!qe(b,a)&&(h===j||r(h,j,i,s,t)))return b.push(a)})){f=!1;break}}else if(!(h===E||r(h,E,i,s,t))){f=!1;break}}return t.delete(e),t.delete(n),f}function Be(e){var n=-1,i=Array(e.size);return e.forEach(function(s,r){i[++n]=[r,s]}),i}function Ke(e){var n=-1,i=Array(e.size);return e.forEach(function(s){i[++n]=s}),i}var Ze=1,Ge=2,Qe="[object Boolean]",Xe="[object Date]",en="[object Error]",nn="[object Map]",tn="[object Number]",rn="[object RegExp]",sn="[object Set]",an="[object String]",on="[object Symbol]",ln="[object ArrayBuffer]",cn="[object DataView]",B=Te?Te.prototype:void 0,$=B?B.valueOf:void 0;function dn(e,n,i,s,r,t,o){switch(i){case cn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case ln:return!(e.byteLength!=n.byteLength||!t(new Oe(e),new Oe(n)));case Qe:case Xe:case tn:return Tn(+e,+n);case en:return e.name==n.name&&e.message==n.message;case rn:case an:return e==n+"";case nn:var l=Be;case sn:var c=s&Ze;if(l||(l=Ke),e.size!=n.size&&!c)return!1;var _=o.get(e);if(_)return _==n;s|=Ge,o.set(e,n);var m=J(l(e),l(n),s,r,t,o);return o.delete(e),m;case on:if($)return $.call(e)==$.call(n)}return!1}var un=1,pn=Object.prototype,_n=pn.hasOwnProperty;function fn(e,n,i,s,r,t){var o=i&un,l=Ce(e),c=l.length,_=Ce(n),m=_.length;if(c!=m&&!o)return!1;for(var w=c;w--;){var f=l[w];if(!(o?f in n:_n.call(n,f)))return!1}var b=t.get(e),h=t.get(n);if(b&&h)return b==n&&h==e;var E=!0;t.set(e,n),t.set(n,e);for(var C=o;++w<c;){f=l[w];var j=e[f],a=n[f];if(s)var d=o?s(a,j,f,n,e,t):s(j,a,f,e,n,t);if(!(d===void 0?j===a||r(j,a,i,s,t):d)){E=!1;break}C||(C=f=="constructor")}if(E&&!C){var v=e.constructor,y=n.constructor;v!=y&&"constructor"in e&&"constructor"in n&&!(typeof v=="function"&&v instanceof v&&typeof y=="function"&&y instanceof y)&&(E=!1)}return t.delete(e),t.delete(n),E}var wn=1,K="[object Arguments]",Z="[object Array]",z="[object Object]",mn=Object.prototype,G=mn.hasOwnProperty;function vn(e,n,i,s,r,t){var o=Ve(e),l=Ve(n),c=o?Z:xe(e),_=l?Z:xe(n);c=c==K?z:c,_=_==K?z:_;var m=c==z,w=_==z,f=c==_;if(f&&Ie(e)){if(!Ie(n))return!1;o=!0,m=!1}if(f&&!m)return t||(t=new W),o||In(e)?J(e,n,i,s,r,t):dn(e,n,c,i,s,r,t);if(!(i&wn)){var b=m&&G.call(e,"__wrapped__"),h=w&&G.call(n,"__wrapped__");if(b||h){var E=b?e.value():e,C=h?n.value():n;return t||(t=new W),r(E,C,i,s,t)}}return f?(t||(t=new W),fn(e,n,i,s,r,t)):!1}function Q(e,n,i,s,r){return e===n?!0:e==null||n==null||!De(e)&&!De(n)?e!==e&&n!==n:vn(e,n,i,s,Q,r)}function X(e,n){return Q(e,n)}let ee,ne,ie,U,te,re,se,ae,oe,le,ce,de,ue,pe,_e,fe,we,me,ve,he,ye,S,be,ge,p,k;L=Pe("volume",()=>{const e=Fe(),n=je(),i=Le({entries:[]}),s=Le({entries:[]}),r=A(null),t=An("windpress.dashboard.store.volume.activeViewEntryRelativePath",null);function o(a){return a=a.replace(/[^a-zA-Z0-9._/-]+/g,""),a=a.replace(/\.{2,}/g,"."),a=a.replace(/\/{2,}/g,"/"),a=a.replace(/^[._/ -]+|[._/ -]+$/g,""),a}function l(a){let d=a.split("/").map(o).join("/");d=o(d);const v=i.entries.findIndex(y=>y.relative_path===d);if(v!==-1){if(i.entries[v].hidden===!1)throw new Error(wp.i18n.__(`A file named "${d}" already exists`,"windpress"));i.entries[v].hidden=!1,i.entries[v].content=`/* file: ${d} */

`}else i.entries.push({name:d.split("/").pop()||"",content:`/* file: ${d} */

`,relative_path:`${d}`,handler:"internal"});r.value=`${d}`}function c(a){const d=i.entries.findIndex(v=>v.relative_path===a.relative_path);i.entries[d].content="",i.entries[d].hidden=!0,r.value===a.relative_path&&(r.value=null)}function _(a,d){const v=i.entries.findIndex(x=>x.relative_path===a.relative_path);let y=d.split("/").map(o).join("/");y=o(y);const O=i.entries.findIndex(x=>x.relative_path===y);if(O!==-1){if(i.entries[O].hidden===!1)throw new Error(wp.i18n.__(`A file named "${y}" already exists`,"windpress"));i.entries[O].hidden=!1,i.entries[O].content=i.entries[v].content,i.entries[O].signature&&delete i.entries[O].signature}else{const x=Ae(i.entries[v]);x.relative_path=y,x.name=y.split("/").pop()||"",x.content=i.entries[v].content,x.hidden=!1,x.signature=void 0,i.entries.push(x)}c(a)}function m(a){const d=i.entries.findIndex(v=>v.relative_path===a.relative_path);i.entries[d].content=""}function w(){return i.entries.reduce((a,d)=>(a[`/${d.relative_path}`]=d.content,a),{})}async function f(){return n.add("volume.doPull"),await e.request("/admin/volume/index",{method:"GET"}).then(a=>a.data).then(a=>{const d=a.entries;i.entries=d,h()}).catch(a=>{}).finally(()=>{n.remove("volume.doPull")})}async function b(){return n.add("volume.doPush"),e.request("/admin/volume/store",{method:"POST",data:{volume:{entries:i.entries}}}).then(a=>(h(),{message:a.data.message,success:!0})).catch(a=>{throw new Error(a.response?a.response.data.message:a.message)}).finally(()=>{n.remove("volume.doPush")})}q(r,a=>{t.value=a});function h(){if(i.entries.length===0)return;const a=i.entries.some(d=>d.relative_path===t.value);r.value=a?t.value:"main.css",E.value&&(s.entries=Ae(i.entries))}const E=Dn(()=>!X(i.entries,s.entries));function C(a){const d=i.entries.find(y=>y.relative_path===a),v=s.entries.find(y=>y.relative_path===a);return!X(d,v)}async function j(){return i.entries.length===0?f():Promise.resolve()}return{data:i,initData:s,activeViewEntryRelativePath:r,hasChanged:E,addNewEntry:l,getKVEntries:w,doPull:f,doPush:b,entryHasChanged:C,softDeleteEntry:c,resetEntry:m,renameEntry:_,cleanPath:o,initPull:j}}),H=Pe("themeJson",()=>{const e=Fe(),n=je(),i=A({});async function s(){return n.add("themeJson.doPush"),e.request("/admin/theme-json/store",{method:"POST",data:{data:btoa(JSON.stringify(i.value,null,window.windpress.is_debug?2:void 0))}}).then(r=>({message:r.data.message,success:!0})).catch(r=>{throw new Error(r.response?r.response.data.message:r.message)}).finally(()=>{n.remove("themeJson.doPush")})}return{themeJson:i,doPush:s}}),ee={class:"flex"},ne=["innerHTML"],ie={class:"flex gap-2"},U=N({__name:"ConfirmFileActionModal",props:{filePath:{},fileContent:{},actionYes:{},actionNo:{}},emits:["close"],setup(e,{emit:n}){const i=e,s=kn();let r=A(null);(async()=>r.value=await Nn({themes:[D(()=>import("./dark-plus-C3mMm8J8.min.js"),[],import.meta.url),D(()=>import("./light-plus-B7mTdjB0.min.js"),[],import.meta.url)],langs:[D(()=>import("./css-DPfMkruS.min.js"),[],import.meta.url),D(()=>import("./javascript-BMMyXqK5.min.js"),[],import.meta.url)],engine:$n(D(()=>import("./wasm-CG6Dc4jp.min.js"),[],import.meta.url))}))();const t=On(async()=>{if(!i.fileContent||!r.value)return;const l=Mn.extname(i.filePath).replace(".","");return r.value.codeToHtml(i.fileContent,{lang:l==="css"?"css":"javascript",theme:s.value==="dark"?"dark-plus":"light-plus"})}),o=n;return(l,c)=>{const _=Y,m=M;return V(),I(m,{close:{onClick:()=>o("close",!1)}},Ln({title:g(()=>[T(F(l.i18n.sprintf(l.i18n.__('Are you sure you want to %s the "%s" file?',"windpress"),l.actionYes,l.filePath)),1)]),footer:g(()=>[u("div",ie,[P(_,{color:"neutral",variant:"soft",label:l.i18n.__("cancel","windpress"),onClick:c[0]||(c[0]=w=>o("close",!1)),class:"capitalize"},null,8,["label"]),P(_,{color:"error",variant:"soft",label:l.actionYes,onClick:c[1]||(c[1]=w=>o("close",!0)),class:"capitalize"},null,8,["label"])])]),_:2},[l.fileContent?{name:"body",fn:g(()=>[(V(),I(Rn,null,{default:g(()=>[u("div",ee,[u("div",{innerHTML:Re(t),class:"flex [&>pre]:p-4 [&>pre]:mr-6"},null,8,ne)])]),_:1}))]),key:"0"}:void 0]),1032,["close"])}}}),te={class:"flex flex-col gap-4 text-(--ui-text)"},re={class:"font-bold uppercase my-2"},se={class:"w-full"},ae={class:"font-semibold w-1/3"},oe={class:""},le={class:"font-semibold w-1/5"},ce={class:""},de={class:"font-semibold w-1/5"},ue={class:""},pe={class:"font-semibold w-1/5"},_e={class:""},fe={class:"flex gap-2"},we=N({__name:"ConfirmVolumeImportModal",props:{data:{}},emits:["close"],setup(e,{emit:n}){const i=e,s=n;return(r,t)=>{const o=Y,l=M;return V(),I(l,{close:{onClick:()=>s("close",!1)}},{title:g(()=>[T(F(r.i18n.__("Import SFS volume","windpress")),1)]),body:g(()=>[u("div",te,[u("div",null,[u("div",re,F(r.i18n.__("File info","windpress")),1),u("table",se,[u("tbody",null,[u("tr",null,[u("td",ae,F(r.i18n.__("WindPress version","windpress")),1),t[2]||(t[2]=u("td",{class:""},":",-1)),u("td",oe,F(i.data._version),1)]),u("tr",null,[u("td",le,F(r.i18n.__("WP Version","windpress")),1),t[3]||(t[3]=u("td",{class:""},":",-1)),u("td",ce,F(i.data._wp_version),1)]),u("tr",null,[u("td",de,F(r.i18n.__("Exported on","windpress")),1),t[4]||(t[4]=u("td",{class:""},":",-1)),u("td",ue,F(Re(ze)(i.data._timestamp).format("YYYY-MM-DD HH:mm:ss")),1)]),u("tr",null,[u("td",pe,F(r.i18n.__("Entries","windpress")),1),t[5]||(t[5]=u("td",{class:""},":",-1)),u("td",_e,F(i.data.entries.length),1)])])])]),T(" "+F(r.i18n.__("This will overwrite all existing files. Are you sure you want to continue?","windpress")),1)])]),footer:g(()=>[u("div",fe,[P(o,{color:"neutral",variant:"soft",label:r.i18n.__("cancel","windpress"),onClick:t[0]||(t[0]=c=>s("close",!1)),class:"capitalize"},null,8,["label"]),P(o,{color:"warning",variant:"soft",label:r.i18n.__("Yes, continue","windpress"),onClick:t[1]||(t[1]=c=>s("close",!0)),class:"capitalize"},null,8,["label"])])]),_:1},8,["close"])}}}),me={class:"flex gap-2"},ve=N({__name:"NewFileFormModal",emits:["close"],setup(e,{emit:n}){const i=L(),s=n,r=A(""),t=A(!1);q(()=>r.value,()=>{t.value=!1});function o(){if(t.value=!1,!r.value){t.value=wp.i18n.__("Filename is required","windpress");return}if(!r.value.endsWith(".css")&&!r.value.endsWith(".js")){t.value=wp.i18n.__("File extension must be .css or .js","windpress");return}if(!/^[a-zA-Z0-9_.\-\/]+$/.test(r.value)){t.value=wp.i18n.__("Only alphanumeric, dash, underscore, forward slash, and dot are allowed","windpress");return}if(i.data.entries.find(l=>l.relative_path===`${r.value}`&&l.hidden!==!0)){t.value=wp.i18n.sprintf(wp.i18n.__('A file named "%s" already exists',"windpress"),r.value);return}s("close",r.value)}return(l,c)=>{const _=ke,m=Ye,w=Y,f=M;return V(),I(f,{close:{onClick:()=>s("close")}},{title:g(()=>[T(F(l.i18n.__("Create New File","windpress")),1)]),body:g(()=>[P(m,{label:"Filename",required:"",description:l.i18n.__("Filename may include a path. (css or js)","windpress"),error:t.value},{default:g(()=>[P(_,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=b=>r.value=b),placeholder:"theme/color.css",class:"w-full"},null,8,["modelValue"])]),_:1},8,["description","error"])]),footer:g(()=>[u("div",me,[P(w,{color:"neutral",variant:"soft",label:l.i18n.__("cancel","windpress"),onClick:c[1]||(c[1]=b=>s("close")),class:"capitalize"},null,8,["label"]),P(w,{color:"primary",variant:"soft",label:l.i18n.__("Submit","windpress"),onClick:o,class:"capitalize"},null,8,["label"])])]),_:1},8,["close"])}}}),he={class:"flex gap-2"},ye=N({__name:"RenameFileFormModal",props:{filePath:{}},emits:["close"],setup(e,{emit:n}){const i=L(),s=n,r=e,t=A(r.filePath),o=A(!1);q(()=>t.value,()=>{o.value=!1});function l(){if(o.value=!1,!t.value){o.value=wp.i18n.__("Filename is required","windpress");return}if(!t.value.endsWith(".css")&&!t.value.endsWith(".js")){o.value=wp.i18n.__("File extension must be .css or .js","windpress");return}if(!/^[a-zA-Z0-9_.\-\/]+$/.test(t.value)){o.value=wp.i18n.__("Only alphanumeric, dash, underscore, forward slash, and dot are allowed","windpress");return}if(i.data.entries.find(c=>c.relative_path===`${t.value}`&&c.hidden!==!0)){o.value=wp.i18n.sprintf(wp.i18n.__('A file named "%s" already exists',"windpress"),t.value);return}s("close",t.value)}return(c,_)=>{const m=ke,w=Ye,f=Y,b=M;return V(),I(b,{close:{onClick:()=>s("close")}},{title:g(()=>[T(F(c.i18n.__("Rename File","windpress")),1)]),body:g(()=>[P(w,{label:"Old Filename",description:c.i18n.__("The previous filename","windpress"),class:"mb-2"},{default:g(()=>[P(m,{value:r.filePath,disabled:!0,class:"w-full"},null,8,["value"])]),_:1},8,["description"]),P(w,{label:"New Filename",required:"",description:c.i18n.__("Filename may include a path. (css or js)","windpress"),error:o.value},{default:g(()=>[P(m,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=h=>t.value=h),placeholder:"theme/color.css",class:"w-full"},null,8,["modelValue"])]),_:1},8,["description","error"])]),footer:g(()=>[u("div",he,[P(f,{color:"neutral",variant:"soft",label:c.i18n.__("cancel","windpress"),onClick:_[1]||(_[1]=h=>s("close")),class:"capitalize"},null,8,["label"]),P(f,{color:"primary",variant:"soft",label:c.i18n.__("Submit","windpress"),onClick:l,class:"capitalize"},null,8,["label"])])]),_:1},8,["close"])}}}),S=L(),be=xn(),ge=H(),p=Cn(),k=Sn();async function hn(e){if(e.readonly){p.add({title:wp.i18n.__("Error","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is read-only and not deletable',"windpress"),e.relative_path),color:"error",icon:"i-lucide-trash"});return}if(e.relative_path==="main.css"){p.add({title:wp.i18n.__("Error","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is required for the WindPress to work and not deletable',"windpress"),e.relative_path),color:"error",icon:"i-lucide-trash"});return}if(!await k.create(U,{destroyOnClose:!0,props:{filePath:e.relative_path,fileContent:e.content,actionYes:wp.i18n.__("delete","windpress")}}).open().result){p.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is not deleted',"windpress"),e.relative_path),color:"info",icon:"i-lucide-trash"});return}S.softDeleteEntry(e),p.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" deleted',"windpress"),e.relative_path),color:"success",icon:"i-lucide-trash"})}async function yn(e){if(!await k.create(U,{destroyOnClose:!0,props:{filePath:e.relative_path,fileContent:e.content,actionYes:wp.i18n.__("reset","windpress")}}).open().result){p.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is not reset',"windpress"),e.relative_path),color:"info",icon:"lucide:file-minus-2"});return}S.resetEntry(e),p.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" reset',"windpress"),e.relative_path),color:"success",icon:"lucide:file-minus-2"}),Ee().then(()=>{S.doPull()})}async function Ee(){const e={title:wp.i18n.__("Saving...","windpress"),description:wp.i18n.__("Please wait while we save your changes.","windpress"),duration:0,icon:"lucide:loader-circle",close:!1,color:"neutral",ui:{icon:"animate-spin"}};return p.toasts.value.find(n=>n.id==="file-editor.doSave")?p.update("file-editor.doSave",{...e}):p.add({id:"file-editor.doSave",...e}),S.doPush().then(()=>{p.update("file-editor.doSave",{title:wp.i18n.__("Saved","windpress"),description:wp.i18n.__("Your changes have been saved.","windpress"),icon:"i-lucide-save",color:"success",duration:void 0,close:!0,ui:{icon:void 0}}),Number(be.virtualOptions("general.tailwindcss.version",4).value)===4&&ge.doPush()}).catch(n=>{p.update("file-editor.doSave",{title:wp.i18n.__("Error","windpress"),description:wp.i18n.__("An error occurred while saving your changes.","windpress"),icon:"i-lucide-save",color:"error",duration:void 0,close:!0,ui:{icon:void 0}})}).finally(()=>{const n=new BroadcastChannel("windpress");["windpress/observer","windpress/intellisense"].forEach(i=>{n.postMessage({source:"windpress/dashboard",target:i,task:"windpress.code-editor.saved",payload:{volume:zn(S.getKVEntries())}})}),n.close()})}function bn(){const e={entries:S.data.entries,_windpress:!0,_version:window.windpress._version,_wp_version:window.windpress._wp_version,_timestamp:new Date().getTime(),_uid:Yn(),_type:"sfs"},n=Se.compressToUint8Array(JSON.stringify(e)),i=new Blob([n],{type:"application/octet-stream"}),s=URL.createObjectURL(i),r=document.createElement("a");r.href=s,r.download=`sfs-${ze().format("YYYYMMDDHHmmss")}.windpress`,r.click(),URL.revokeObjectURL(s),p.add({title:wp.i18n.__("Exported","windpress"),description:wp.i18n.__("SFS volume data exported","windpress"),color:"success",icon:"i-lucide-download"})}async function gn(e){const n=e.target;if(!n||!n.files||n.files.length===0)return;const i=n.files[0];if(!i)return;if(!i.name.endsWith(".windpress")){p.add({title:wp.i18n.__("SFS Import","windpress"),description:wp.i18n.__("Invalid file format","windpress"),color:"error",icon:"i-lucide-upload"});return}let s;try{if(s=JSON.parse(Se.decompressFromUint8Array(new Uint8Array(await i.arrayBuffer()))||"{}"),!s._windpress||s._type!=="sfs")throw new Error(wp.i18n.__("File is not a valid WindPress file","windpress"))}catch(r){p.add({title:wp.i18n.__("SFS Import","windpress"),description:r instanceof Error?r.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-upload"});return}if(!await k.create(we,{destroyOnClose:!0,props:{data:s}}).open().result){p.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.__("SFS import canceled","windpress"),color:"info",icon:"i-lucide-upload"}),n.value="";return}p.add({id:"file-import.doImport",title:wp.i18n.__("Importing...","windpress"),description:wp.i18n.__("Please wait while we import the data.","windpress"),icon:"lucide:loader-circle",close:!1,duration:0,color:"neutral",ui:{icon:"animate-spin"}}),await new Promise(r=>setTimeout(r,500));try{const r=s.entries.map(t=>{if(t.signature&&t.handler==="internal"){const{signature:o,...l}=t;return l}return t});S.data.entries=r,p.update("file-import.doImport",{title:wp.i18n.__("Success","windpress"),description:wp.i18n.__("SFS data imported. Remember to save the changes.","windpress"),color:"success",icon:"i-lucide-upload",duration:void 0,close:!0,ui:{icon:void 0}}),n.value=""}catch(r){p.update("file-import.doImport",{title:wp.i18n.__("Error","windpress"),description:r instanceof Error?r.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-upload",close:!0,duration:void 0,ui:{icon:void 0}}),n.value=""}}async function En(){const e=await k.create(ve,{destroyOnClose:!0}).open().result;if(!e){p.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.__("New file creation canceled","windpress"),color:"info",icon:"i-lucide-plus"});return}try{S.addNewEntry(e),p.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" created',"windpress"),e),color:"success",icon:"i-lucide-plus"})}catch(n){p.add({title:wp.i18n.__("Error","windpress"),description:n instanceof Error?n.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-plus"})}}async function Pn(e){const n=await k.create(ye,{destroyOnClose:!0,props:{filePath:e.relative_path}}).open().result;if(!n){p.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.__("File rename canceled","windpress"),color:"info",icon:"i-lucide-edit"});return}try{S.renameEntry(e,n),p.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" renamed to "%s"',"windpress"),e.relative_path,n),color:"success",icon:"i-lucide-edit"})}catch(i){p.add({title:wp.i18n.__("Error","windpress"),description:i instanceof Error?i.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-edit"})}}Me=function(){return{deleteFile:hn,resetFile:yn,save:Ee,exportVolume:bn,importVolume:gn,addNewFile:En,renameFile:Pn}}});export{Un as __tla,Me as a,H as b,L as u};
