import{s as G}from"./chunk-BP1tGd43.min.js";import"./dist-C_ABUlOQ.min.js";import{E as P,O as h,S as V,b as w,j as T,k as l,nj as n,nx as O,ri as _,tX as o,ta as Y,tg as v,x,y}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import"./vue.runtime.esm-bundler-B7l4RX9R.min.js";import{_ as j,n as N,t as z}from"./Button-B6tnd5h6.min.js";import"./log-BwehX2sj.js";import"./core-CuG4XPOF.min.js";import"./vue-router-DDJE2Uyj.min.js";import{n as A,t as I}from"./Tooltip-zde4fm_B.min.js";import"./VisuallyHiddenInput-BERVFAg0.min.js";import"./usePrimitiveElement-B0TMSs0k.min.js";import"./floating-ui.core-BwRAMOlv.min.js";import"./Label-BYwosbTN.min.js";import{t as L}from"./Separator-ccVxK-R2.min.js";import{t as U}from"./Switch-D3UeouV_.min.js";import{t as Z}from"./useToast-DNBmJq55.min.js";import{t as $}from"./api-j1hi8yn9.js";import"./index.browser-L__kdN7m.min.js";import{a as H,t as K}from"./settings-DtACJkyx.js";import"./isObject-BwTgHO42.min.js";import"./_toKey-BLmsLsy5.min.js";import"./_initCloneObject-Cm0YirQr.min.js";import"./set-Cqd4I9bq.min.js";import"./get-BfBXFw95.min.js";import"./virtualRef-CYpkks3b.js";import{t as R}from"./useGenerateCache-D-Qr_-TX.js";import{t as W}from"./dayjs.min-BAjIZEkX.min.js";import{t as X}from"./FormField-vMZGxLGG.min.js";import{n as q,t as J}from"./PageCard-j97kZjf_.min.js";var Q=G(W()),ee=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ie=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ae=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],te=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],S=(e,i,t)=>{let r=e;return typeof i=="string"||Array.isArray(i)?r=e.toLocaleString(i,t):(i===!0||t!==void 0)&&(r=e.toLocaleString(void 0,t)),r},B=e=>{if(typeof e=="number")return Math.log10(e);let i=e.toString(10);return i.length+Math.log10("0."+i.slice(0,15))},le=e=>typeof e=="number"?Math.log(e):B(e)*Math.log(10),re=(e,i)=>{if(typeof e=="number")return e/i;let t=e/BigInt(i),r=e%BigInt(i);return Number(t)+Number(r)/i};function ne(e,i){if(typeof e!="bigint"&&!Number.isFinite(e))throw TypeError(`Expected a finite number, got ${typeof e}: ${e}`);i={bits:!1,binary:!1,space:!0,...i};let t=i.bits?i.binary?te:ae:i.binary?ie:ee,r=i.space?" ":"";if(i.signed&&(typeof e=="number"?e===0:e===0n))return` 0${r}${t[0]}`;let m=e<0,u=m?"-":i.signed?"+":"";m&&(e=-e);let c;if(i.minimumFractionDigits!==void 0&&(c={minimumFractionDigits:i.minimumFractionDigits}),i.maximumFractionDigits!==void 0&&(c={maximumFractionDigits:i.maximumFractionDigits,...c}),e<1){let d=S(e,i.locale,c);return u+d+r+t[0]}let a=Math.min(Math.floor(i.binary?le(e)/Math.log(1024):B(e)/3),t.length-1);if(e=re(e,(i.binary?1024:1e3)**a),!c){let d=Math.max(3,Number.parseInt(e,10).toString().length);e=e.toPrecision(d)}let s=S(Number(e),i.locale,c),f=t[a];return u+s+r+f}var se={class:"flex gap-2 items-center"},oe={class:"flex gap-2 items-center"},me={class:"font-semibold"},ce={key:0,class:"flex gap-1"},de=T({__name:"Performance",setup(e){let i=$();Z();let t=K(),r=H(),m=O({last_generated:null,last_full_build:null,file_url:null,file_size:null});function u(){i.get("admin/settings/cache/index").then(a=>{m.value=a.data.cache})}async function c(){R(a=>{u()})}return Y(()=>{u()}),(a,s)=>{let f=J,d=U,b=X,g=L,C=j,M=N,k=A,E=z,D=I,F=q;return v(),w(F,{id:"performance",state:{}},{default:o(()=>[l(f,{title:a.i18n.__("Performance","windpress"),variant:"naked",orientation:"horizontal",class:"mb-4"},null,8,["title"]),l(f,{variant:"subtle"},{default:o(()=>[l(b,{label:a.i18n.__("Use cached CSS","windpress"),description:a.i18n.__("Serve the cached CSS file when available instead of generating the style dynamically using the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:o(()=>[l(d,{modelValue:n(t).virtualOptions("performance.cache.enabled",!1).value,"onUpdate:modelValue":s[0]||(s[0]=p=>n(t).virtualOptions("performance.cache.enabled",!1).value=p),label:a.i18n.__("Enable Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),l(g),l(b,{label:a.i18n.__("Admin always uses Compiler","windpress"),description:a.i18n.__("Exclude the Admin from the cached CSS to ensure they always use the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:o(()=>[l(d,{modelValue:n(t).virtualOptions("performance.cache.exclude_admin",!1).value,"onUpdate:modelValue":s[1]||(s[1]=p=>n(t).virtualOptions("performance.cache.exclude_admin",!1).value=p),label:a.i18n.__("Exclude Admin","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),l(g),l(b,{label:a.i18n.__("Cached CSS loading method","windpress"),description:a.i18n.__("Load cached CSS as an inline instead of an external file.","windpress"),class:"flex items-center justify-between gap-4"},{default:o(()=>[l(d,{modelValue:n(t).virtualOptions("performance.cache.inline_load",!1).value,"onUpdate:modelValue":s[2]||(s[2]=p=>n(t).virtualOptions("performance.cache.inline_load",!1).value=p),label:a.i18n.__("Inline Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),l(g),l(b,{label:a.i18n.__("Generate the cached CSS","windpress"),class:"flex items-center justify-between gap-4"},P({default:o(()=>[l(D,{"delay-duration":0,text:a.i18n.__("Generate the cached CSS file","windpress")},{default:o(()=>[l(E,{color:"primary",variant:"subtle",onClick:c,disabled:n(r).isBusy,loading:n(r).isBusy&&n(r).hasTask("settings.performance.cached_css.generate")},{default:o(()=>[h(_(n(r).isBusy&&n(r).hasTask("settings.performance.cached_css.generate")?a.i18n.__("Generating...","windpress"):a.i18n.__("Generate","windpress")),1)]),_:1},8,["disabled","loading"])]),_:1},8,["text"])]),_:2},[m.value.last_generated?{name:"description",fn:o(()=>[y("div",se,[y("div",oe,[y("span",me,_(a.i18n.__("Last Generated","windpress"))+": ",1),m.value.file_size?(v(),V("span",ce,[h(_(n(Q.default)(m.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),l(M,{to:m.value.file_url,target:"_blank",class:"underline"},{default:o(()=>[l(C,{name:"lucide:external-link"})]),_:1},8,["to"])])):x("",!0)]),m.value.file_size?(v(),w(k,{key:0,color:"success",variant:"subtle"},{default:o(()=>[h(_(n(ne)(m.value.file_size,{maximumFractionDigits:2,space:!0})),1)]),_:1})):x("",!0)])]),key:"0"}:void 0]),1032,["label"])]),_:1})]),_:1})}}});export{de as default};
