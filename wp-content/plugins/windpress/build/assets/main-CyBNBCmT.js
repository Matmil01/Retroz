import{T as Fe,b as Me,d as Oe}from"./runtime-dom.esm-bundler-DKnqg7YI.min.js";import{l as Z}from"./logger-BTW-zIW3.js";import{L as Ve,_ as De,a as Ue,G as Re,R as Be}from"./chevron-right-BVOcWwsE.min.js";import{oxyIframe as He}from"./constant-DFowkQsk.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.min.js";import{Z as C,f as N,$ as Xe,av as H,R as v,J as u,Q as g,aj as W,V as h,O as I,W as Ke,E as x,w as X,L as ee,ao as j,a4 as Ye,K as E,T as F,F as M,U as O,X as K,I as Ge,aw as Je}from"./runtime-core.esm-bundler-SLuuURr5.min.js";import{d as Qe}from"./vfs-CoPIgrSP.js";import"./index-CYxpKrga.min.js";import"./index-CkDJq9vY.min.js";import"./index-Bx_UX3bn.min.js";import{__tla as Ze}from"./cssesc-BuSGOpl4.js";import{__tla as Ne}from"./index-B-0OGoK_.min.js";import{g as et}from"./intellisense-YxUDfJ1F.js";import"./redaxios.module-TFmBaLRL.min.js";import{l as tt}from"./design-system-D7KTzWJK.js";import{u as ot}from"./index-Dyb13sZ8.min.js";import{s as nt}from"./set-CZrLKuYB.min.js";import"./floating-ui.core-D4p8F-F6.min.js";import"./isObject-K1YoVIH1.min.js";import"./chunk-HTB5LLOP-Cay67bh1.min.js";import"./index-BAMY2Nnw.min.js";import"./preload-helper-DuwVgReH.min.js";import"./source-map-generator-BtPqY3n1.min.js";import"./index-rQLcFmgX.min.js";import"./index-BkiRcEwW.min.js";import"./pre-process-DMQVYA2C.js";import"./adobe-css-tools-Dbp5S5wp.min.js";import"./_toKey-BwG29BdO.min.js";Promise.all([(()=>{try{return Ze}catch{}})(),(()=>{try{return Ne}catch{}})()]).then(async()=>{const te={id:"windpressoxygen-variable-app-header",class:"bg:$(oxy-dark) cursor:grab bb:1|solid|gray-60"},oe={class:"header-container flex gap:10 align-items:center fg:$(oxy-light-text)"},ne={class:"header-logo flex align-items:center px:12 py:2"},ae={class:"header-title text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},ie={__name:"PanelHeader",setup(o){const t=C("variableApp"),a=C("isOpen");function m(){const n=t.querySelector("#windpressoxygen-variable-app-header");let c=x(!1),i=0,d=0;X(c,b=>{b?(document.body.style.userSelect="none",document.body.querySelector("#ct-viewport-container").style.pointerEvents="none",n.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),document.body.querySelector("#ct-viewport-container").style.removeProperty("pointer-events"),n.style.cursor="grab")});const l=b=>{c.value=!0;const k=n.getBoundingClientRect();i=b.clientX-k.left,d=b.clientY-k.top};n.removeEventListener("mousedown",l),n.addEventListener("mousedown",l);const w=b=>{if(!c.value)return;const k=n.getBoundingClientRect(),y=b.clientX,p=b.clientY,r=y-i,f=p-d,L=r<0?0:r>window.innerWidth-k.width?window.innerWidth-k.width:r,$=f<0?0:f>window.innerHeight-k.height?window.innerHeight-k.height:f;t.style.left=`${L}px`,t.style.top=`${$}px`};document.removeEventListener("mousemove",w),document.addEventListener("mousemove",w);const S=b=>{c.value=!1};document.removeEventListener("mouseup",S),document.addEventListener("mouseup",S)}return N(()=>{m()}),(n,c)=>{const i=Xe("inline-svg"),d=De,l=H("tooltip");return u(),v("div",te,[g("div",oe,[g("div",ne,[h(i,{src:I(Ve),class:"inline-svg fill:current font:24"},null,8,["src"])]),W((u(),v("div",ae,[...c[1]||(c[1]=[Ke(" WindPress ",-1)])])),[[l,{placement:"top",content:`v${n.windpressoxygen._version}`}]]),W((u(),v("button",{class:"header-exit flex align-items:center py:10 px:12 b:none fg:$(oxy-light-text) bg:transparent bg:$(oxy-hover):hover cursor:pointer",onClick:c[0]||(c[0]=w=>a.value=!I(a))},[h(d,{class:"iconify font:16"})])),[[l,{placement:"top",content:"Close"}]])])])}}},re=T(ie,[["__scopeId","data-v-ac3b709b"]]),se={class:"header-slot"},le={key:0,class:"expansion-panel__body"},ce={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(o,{expose:t}){const a=o,m=x(null),n=ot(`windpressoxygen-variable-app.ui.expansion-panels.${a.namespace}`,{[`${a.name}`]:!1},void 0,{mergeDefaults:!0});function c(d){n.value[a.name]=d===null?!n.value[a.name]:d}function i(){m.value.scrollIntoView()}return t({togglePanel:c,scrollIntoView:i}),(d,l)=>{const w=Ue;return u(),v("div",{ref_key:"sectionRef",ref:m,class:"expansion-panel mx:10 py:8 mr:4"},[g("div",{class:Ye([{},"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer"]),onClick:l[0]||(l[0]=S=>I(n)[o.name]=!I(n)[o.name])},[g("div",se,[ee(d.$slots,"header",{},void 0,!0)]),g("div",null,[h(w,{style:j({transform:I(n)[o.name]?"rotate(-90deg)":"rotate(0deg)"}),class:"iconify ~duration:300 font:18"},null,8,["style"])])]),h(Fe,null,{default:E(()=>[I(n)[o.name]?(u(),v("div",le,[ee(d.$slots,"default",{},void 0,!0)])):F("",!0)]),_:3})],512)}}},V=T(ce,[["__scopeId","data-v-e02c9ac0"]]),pe={class:"{m:10;pb:15}>div"},ue={class:"variable-section-title font:14 my:10"},de={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},ve=["onClick","onMouseenter"],me={class:"font:14"},ye={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(o){return(t,a)=>{const m=H("tooltip");return u(),v("div",pe,[(u(!0),v(M,null,O(o.variableItems,(n,c)=>(u(),v("div",{key:c,class:"var-item"},[g("div",ue,K(c.replace("_","-")),1),g("div",de,[n.length>0?(u(!0),v(M,{key:0},O(n,(i,d)=>W((u(),v("button",{key:d,class:"px:12 py:8 r:8 font:medium fg:$(oxy-light-text) bg:$(oxy-mid) bg:$(oxy-hover):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span",onClick:l=>t.$emit("previewChose",l,i.key),onMouseenter:l=>t.$emit("previewEnter",l,i.key),onMouseleave:a[0]||(a[0]=l=>t.$emit("previewLeave"))},[g("span",me,K(i.label),1)],40,ve)),[[m,{placement:"top",content:`var(${i.key}, ${i.value})`}]])),128)):F("",!0)])]))),128))])}}},Y=T(ye,[["__scopeId","data-v-5f29ac5c"]]),fe={class:"{m:10;pb:15}>div"},ge={class:"variable-section-title font:14 my:10"},be={key:0,class:"variable-section-items default-color"},he=["onClick","onMouseenter"],ke=["onClick","onMouseenter"],we={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(o){return(t,a)=>{const m=H("tooltip");return u(),v("div",fe,[(u(!0),v(M,null,O(o.variableItems,(n,c)=>(u(),v("div",{key:c,class:""},[g("div",ge,K(c),1),n.DEFAULT?(u(),v("div",be,[W(g("button",{style:j(`--wp-b-v-item-bg: var(--${n.DEFAULT.key.slice(2)});`),class:"",onClick:i=>t.$emit("previewChose",i,n.DEFAULT.key),onMouseenter:i=>t.$emit("previewEnter",i,n.DEFAULT.key),onMouseleave:a[0]||(a[0]=i=>t.$emit("previewLeave"))},null,44,he),[[m,{placement:"top",content:`var(${n.DEFAULT.key}, ${n.DEFAULT.value})`}]])])):F("",!0),n.shades&&Object.keys(n.shades).length>0?(u(),v("div",{key:1,style:j(`--wp-b-v-items-grid: ${Object.keys(n.shades).length}`),class:"variable-section-items shades-colors grid r:4 overflow:hidden"},[(u(!0),v(M,null,O(n.shades,(i,d)=>(u(),v("div",{key:d,class:"flex gap:10"},[W(g("button",{style:j(`--wp-b-v-item-bg: var(--${i.key.slice(2)})`),onClick:l=>t.$emit("previewChose",l,i.key),onMouseenter:l=>t.$emit("previewEnter",l,i.key),onMouseleave:a[1]||(a[1]=l=>t.$emit("previewLeave"))},null,44,ke),[[m,{placement:"top",content:`var(${i.key}, ${i.value})`}]])]))),128))],4)):F("",!0)]))),128))])}}},xe=T(we,[["__scopeId","data-v-06e69824"]]),_e={id:"windpressoxygen-variable-app-body",class:"var-body bg:$(oxy-dark) fg:$(oxy-light-text) rel w:full h:full overflow-y:scroll! bb:1|solid|gray-60>div:not(:last-child)"},$e=1e3,Ee={__name:"PanelBody",setup(o){const t=x({colors:{},typography:{},sizing:{}}),a=C("focusedInput"),m=C("recentVariableSelectionTimestamp"),n=C("tempInputValue"),c=C("variableApp");async function i(){const y=He.contentWindow.document.querySelector('script#windpress\\:vfs[type="text/plain"]'),p=Qe(y.textContent),r=await et(await tt({volume:p}));let f=c.querySelector("style#windpressoxygen-variable-app-body-style");f||(f=document.createElement("style"),f.id="windpressoxygen-variable-app-body-style",c.appendChild(f)),f.innerHTML=`
        #windpressoxygen-variable-app-body, #oxygen-sidebar {
            ${r.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;const L={};r.filter(e=>e.key.startsWith("--color")).forEach(e=>{const s=e.key.slice(8),R=s.split("-");let B="";if(R.length>1){const qe=R[0],je=R.slice(1).join("-");B=`${qe}.shades.'${je}'`}else B=`${s}.DEFAULT`;nt(L,B,e)}),t.value.colors=Object.keys(L).sort().reduce((e,s)=>(e[s]=L[s],e),{});const $={font_size:[],line_height:[],letter_spacing:[]};r.filter(e=>e.key.startsWith("--text-")&&!e.key.endsWith("--line-height")).forEach(e=>{const s=e.key.slice(7);$.font_size.push({key:e.key,label:s,value:e.value})}),r.filter(e=>e.key.startsWith("--leading-")||e.key.endsWith("--leading")).forEach(e=>{const s=e.key.startsWith("--leading-")?e.key.slice(10):e.key.slice(2,-9);$.line_height.push({key:e.key,label:s,value:e.value})}),$.line_height.sort((e,s)=>e.label.startsWith("font-size-")&&!s.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&s.label.startsWith("font-size-")?-1:0),r.filter(e=>e.key.startsWith("--tracking-")).forEach(e=>{const s=e.key.slice(11);$.letter_spacing.push({key:e.key,label:s,value:e.value})}),t.value.typography=$;const P={container:[],breakpoint:[]};r.filter(e=>e.key.startsWith("--container-")).forEach(e=>{const s=e.key.slice(12);P.container.push({key:e.key,label:s,value:e.value})}),r.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const s=e.key.slice(13);P.breakpoint.push({key:e.key,label:s,value:e.value})}),t.value.sizing=P}const d=x(null),l=x(null),w=x(null);X(a,y=>{var p;if(y){const r=y,f=(p=r==null?void 0:r.parentElement)==null?void 0:p.classList.contains("oxygen-color-picker"),L=["font-size"].some(e=>{var s;return(s=r==null?void 0:r.getAttribute("data-option"))==null?void 0:s.includes(e)}),$=["padding","margin","gap","width","height"].some(e=>{var s;return(s=r==null?void 0:r.getAttribute("data-option"))==null?void 0:s.includes(e)});l.value.togglePanel(!1),w.value.togglePanel(!1),d.value.togglePanel(!1);async function P(){y.parentElement.querySelector(".oxygen-measure-box-unit-selector .oxygen-measure-box-units .oxygen-measure-box-unit:last-child").click(),setTimeout(()=>{y.focus()},100)}f?(d.value.togglePanel(!0),d.value.scrollIntoView()):L?(l.value.togglePanel(!0),l.value.scrollIntoView(),P()):$&&(w.value.togglePanel(!0),w.value.scrollIntoView(),P())}});function S(y,p){performance.now()-m.value<$e||a.value&&(a.value.value=`var(${p})`,a.value.dispatchEvent(new Event("input")),a.value.focus())}function b(y){!a.value||n.value===null||(a.value.value=n.value,a.value.dispatchEvent(new Event("input")),a.value.focus())}function k(y,p){var r,f;a.value&&(a.value.value=`var(${p})`,a.value.dispatchEvent(new Event("input")),a.value.focus(),n.value=`var(${p})`,m.value=performance.now(),(f=(r=a.value)==null?void 0:r.parentElement)!=null&&f.classList.contains("oxygen-color-picker")&&a.value.parentElement.querySelector(".oxygen-color-picker-color button")&&(a.value.parentElement.querySelector(".oxygen-color-picker-color button").style.backgroundColor=`var(${p})`))}return N(()=>{i()}),new BroadcastChannel("windpress").addEventListener("message",async y=>{const p=y.data;p.source==="windpress/intellisense"&&p.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{i()},1e3)}),(y,p)=>(u(),v("div",_e,[h(V,{ref_key:"sectionColor",ref:d,namespace:"variable",name:"color"},{header:E(()=>[...p[0]||(p[0]=[g("span",{class:"var-body-title"},"Color",-1)])]),default:E(()=>[h(xe,{"variable-items":t.value.colors,onPreviewEnter:S,onPreviewLeave:b,onPreviewChose:k},null,8,["variable-items"])]),_:1},512),h(V,{ref_key:"sectionTypography",ref:l,namespace:"variable",name:"typography"},{header:E(()=>[...p[1]||(p[1]=[g("span",{class:"var-body-title"},"Typography",-1)])]),default:E(()=>[h(Y,{"variable-items":t.value.typography,onPreviewEnter:S,onPreviewLeave:b,onPreviewChose:k},null,8,["variable-items"])]),_:1},512),h(V,{ref_key:"sectionSpacing",ref:w,namespace:"variable",name:"spacing",class:""},{header:E(()=>[...p[2]||(p[2]=[g("span",{class:"var-body-title"},"Sizing",-1)])]),default:E(()=>[h(Y,{"variable-items":t.value.sizing,onPreviewEnter:S,onPreviewLeave:b,onPreviewChose:k},null,8,["variable-items"])]),_:1},512)]))}},Se=T(Ee,[["__scopeId","data-v-3f4afbd6"]]),Le={id:"windpressoxygen-variable-app-container"},Ce={__name:"App",setup(o){const t=C("isOpen");return(a,m)=>W((u(),v("div",Le,[h(re),(u(),Ge(Je,null,{default:E(()=>[h(Se)]),_:1}))],512)),[[Me,I(t)]])}},Ie=T(Ce,[["__scopeId","data-v-6d9c3575"]]);function Pe({selector:o,callback:t,options:a}){const m=new MutationObserver(t),n=document.querySelector(o);if(!n){Z(`Target not found for selector: ${o}`,{module:"variable-picker",type:"error"});return}const c={childList:!0,subtree:!0};m.observe(n,Object.assign(Object.assign({},c),a))}const z=document.createElement("windpressoxygen-variable-app");z.id="windpressoxygen-variable-app",document.body.appendChild(z);const A=x(!1),q=x(null),D=x(null),Te=x(0),_=Oe(Ie);_.config.globalProperties.windpressoxygen=window.windpressoxygen,_.provide("variableApp",z),_.provide("isOpen",A),_.provide("focusedInput",q),_.provide("tempInputValue",D),_.provide("recentVariableSelectionTimestamp",Te),_.use(Re,{container:"#windpressoxygen-variable-app"}),_.component("InlineSvg",Be),_.mount("#windpressoxygen-variable-app");function G(o){var t;!o.shiftKey||!o.target||((t=document==null?void 0:document.getSelection())==null||t.removeAllRanges(),o.preventDefault(),o.stopPropagation(),q.value=o.target,D.value=o.target.value,A.value=!0)}function J(o){q.value=o.target}const We=["iframeScope.component.options[iframeScope.component.active.id]['model']['background-image']","iframeScope.component.options[iframeScope.component.active.id]['model']['icon-size']","iframeScope.fontsFilter","postsFilter","currentlyEditingFilter","iframeScope.iconFilter.title","iframeScope.component.options[iframeScope.component.active.id]['model']['z-index']","iframeScope.component.options[iframeScope.component.active.id]['model']['src']","iframeScope.component.options[iframeScope.component.active.id]['model']['rel']","iframeScope.component.options[iframeScope.component.active.id]['model']['url']","iframeScope.component.options[iframeScope.component.active.id]['model']['testimonial_photo']","iframeScope.component.options[iframeScope.component.active.id]['model']['pricing_box_price"],Ae=["iframeScope.component.options[iframeScope.component.active.id]['model']['title-*']","iframeScope.component.options[iframeScope.component.active.id]['model']['icon-*']","duration","url","speed","time","address","zoom"].map(o=>o.replace("*']","")),ze=`.oxygen-control input[type="text"]:not(.ct-iris-colorpicker):not([ng-model*="shortcode"])${We.map(o=>`:not([ng-model="${o}"])`).join("")}${Ae.map(o=>`:not([ng-model*="${o}"])`).join("")}`;function Q(){setTimeout(()=>{let o=!1;[...document.querySelectorAll(ze)].forEach(t=>{(t==null?void 0:t.getAttribute("windpressoxygen-variable-app"))!=="listened"&&(t==null||t.removeEventListener("click",G),t==null||t.addEventListener("click",G),t==null||t.removeEventListener("focus",J),t==null||t.addEventListener("focus",J),t==null||t.setAttribute("windpressoxygen-variable-app","listened"),o=!0)}),o&&(q.value=null,D.value=null)},100)}let U=!1;Pe({selector:"#oxygen-sidebar",options:{subtree:!0,childList:!0},callback(o){U||(U=!0,Q(),setTimeout(()=>{U=!1},100))}}),Q(),document.addEventListener("keydown",o=>{o.key==="Escape"&&A.value&&(A.value=!1)}),X(A,o=>{z.style.zIndex=o?"calc(Infinity)":"-1"}),Z("Module loaded!",{module:"variable-picker"})});
