import{_ as D,a as F}from"./PageCard-DizHHSXM.min.js";import{e as P,j as T,m as Y,k as O,d as j,c as z,_ as A,a as I,q as L}from"./dashboard-CEnqINPm.js";import{_ as N}from"./Separator-BDToB4DQ.min.js";import{_ as U}from"./FormField-CDGBmCO4.min.js";import{_ as Z}from"./Switch--jLxbsFz.min.js";import{d as $}from"./dayjs.min-B0xr3lT9.min.js";import{a as H}from"./worker-DDhkXTHJ.js";import{I as K,E as q,W as J,J as w,K as r,R as n,P as l,ab as R,L as h,O as x,M as W,V as _,U as v,T as y}from"./runtime-core.esm-bundler-DMu1kCtd.min.js";import"./runtime-dom.esm-bundler-ByCVmWq5.min.js";import"./index-DxctxtAm.min.js";import"./isObject-K1YoVIH1.min.js";import"./preload-helper-DuwVgReH.min.js";import"./index-L8AGAgXa.min.js";import"./source-map-generator-BtPqY3n1.min.js";import"./chunk-HTB5LLOP-Cay67bh1.min.js";import"./floating-ui.core-D4p8F-F6.min.js";import"./virtualRef-RE6J1pA_.js";import"./set-CZrLKuYB.min.js";import"./_toKey-BwG29BdO.min.js";import"./get-mawGjo0c.min.js";import"./_initCloneObject-DhZa6hP3.min.js";import"./package-BtTmAzXr.min.js";import"./fuse-Dw8P0qyA.min.js";import"./index-D0q3SLgE.min.js";import"./index-BAMY2Nnw.min.js";import"./index.browser-B0na17u1.min.js";import"./redaxios.module-TFmBaLRL.min.js";import"./index-CA_h055Z.min.js";const Q=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],X=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ee=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ie=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],B=(e,i,t)=>{let s=e;return typeof i=="string"||Array.isArray(i)?s=e.toLocaleString(i,t):(i===!0||t!==void 0)&&(s=e.toLocaleString(void 0,t)),s},S=e=>{if(typeof e=="number")return Math.log10(e);const i=e.toString(10);return i.length+Math.log10("0."+i.slice(0,15))},ae=e=>typeof e=="number"?Math.log(e):S(e)*Math.log(10),te=(e,i)=>{if(typeof e=="number")return e/i;const t=e/BigInt(i),s=e%BigInt(i);return Number(t)+Number(s)/i};function ne(e,i){if(typeof e!="bigint"&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);i={bits:!1,binary:!1,space:!0,...i};const t=i.bits?i.binary?ie:ee:i.binary?X:Q,s=i.space?" ":"";if(i.signed&&(typeof e=="number"?e===0:e===0n))return` 0${s}${t[0]}`;const o=e<0,p=o?"-":i.signed?"+":"";o&&(e=-e);let c;if(i.minimumFractionDigits!==void 0&&(c={minimumFractionDigits:i.minimumFractionDigits}),i.maximumFractionDigits!==void 0&&(c={maximumFractionDigits:i.maximumFractionDigits,...c}),e<1){const u=B(e,i.locale,c);return p+u+s+t[0]}const a=Math.min(Math.floor(i.binary?ae(e)/Math.log(1024):S(e)/3),t.length-1);if(e=te(e,(i.binary?1024:1e3)**a),!c){const u=Math.max(3,Number.parseInt(e,10).toString().length);e=e.toPrecision(u)}const m=B(Number(e),i.locale,c),f=t[a];return p+m+s+f}const se={class:"flex gap-2 items-center"},le={class:"flex gap-2 items-center"},re={class:"font-semibold"},oe={key:0,class:"flex gap-1"},ce=K({__name:"Performance",setup(e){const i=H();P();const t=T(),s=Y(),o=q({last_generated:null,last_full_build:null,file_url:null,file_size:null});function p(){i.get("admin/settings/cache/index").then(a=>{o.value=a.data.cache})}async function c(){L(a=>{p()})}return J(()=>{p()}),(a,m)=>{const f=F,u=Z,b=U,g=N,C=j,M=O,k=z,E=I,G=A,V=D;return y(),w(V,{id:"performance",state:{}},{default:r(()=>[n(f,{title:a.i18n.__("Performance","windpress"),variant:"naked",orientation:"horizontal",class:"mb-4"},null,8,["title"]),n(f,{variant:"subtle"},{default:r(()=>[n(b,{label:a.i18n.__("Use cached CSS","windpress"),description:a.i18n.__("Serve the cached CSS file when available instead of generating the style dynamically using the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:r(()=>[n(u,{modelValue:l(t).virtualOptions("performance.cache.enabled",!1).value,"onUpdate:modelValue":m[0]||(m[0]=d=>l(t).virtualOptions("performance.cache.enabled",!1).value=d),label:a.i18n.__("Enable Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),n(g),n(b,{label:a.i18n.__("Admin always uses Compiler","windpress"),description:a.i18n.__("Exclude the Admin from the cached CSS to ensure they always use the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:r(()=>[n(u,{modelValue:l(t).virtualOptions("performance.cache.exclude_admin",!1).value,"onUpdate:modelValue":m[1]||(m[1]=d=>l(t).virtualOptions("performance.cache.exclude_admin",!1).value=d),label:a.i18n.__("Exclude Admin","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),n(g),n(b,{label:a.i18n.__("Cached CSS loading method","windpress"),description:a.i18n.__("Load cached CSS as an inline instead of an external file.","windpress"),class:"flex items-center justify-between gap-4"},{default:r(()=>[n(u,{modelValue:l(t).virtualOptions("performance.cache.inline_load",!1).value,"onUpdate:modelValue":m[2]||(m[2]=d=>l(t).virtualOptions("performance.cache.inline_load",!1).value=d),label:a.i18n.__("Inline Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),n(g),n(b,{label:a.i18n.__("Generate the cached CSS","windpress"),class:"flex items-center justify-between gap-4"},R({default:r(()=>[n(G,{"delay-duration":0,text:a.i18n.__("Generate the cached CSS file","windpress")},{default:r(()=>[n(E,{color:"primary",variant:"subtle",onClick:c,disabled:l(s).isBusy,loading:l(s).isBusy&&l(s).hasTask("settings.performance.cached_css.generate")},{default:r(()=>[v(_(l(s).isBusy&&l(s).hasTask("settings.performance.cached_css.generate")?a.i18n.__("Generating...","windpress"):a.i18n.__("Generate","windpress")),1)]),_:1},8,["disabled","loading"])]),_:1},8,["text"])]),_:2},[o.value.last_generated?{name:"description",fn:r(()=>[h("div",se,[h("div",le,[h("span",re,_(a.i18n.__("Last Generated","windpress"))+": ",1),o.value.file_size?(y(),W("span",oe,[v(_(l($)(o.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),n(M,{to:o.value.file_url,target:"_blank",class:"underline"},{default:r(()=>[n(C,{name:"lucide:external-link"})]),_:1},8,["to"])])):x("",!0)]),o.value.file_size?(y(),w(k,{key:0,color:"success",variant:"subtle"},{default:r(()=>[v(_(l(ne)(o.value.file_size,{maximumFractionDigits:2,space:!0})),1)]),_:1})):x("",!0)])]),key:"0"}:void 0]),1032,["label"])]),_:1})]),_:1})}}});export{ce as default};
