import{_ as u}from"./preload-helper-DuwVgReH.min.js";import{l as A}from"./logger-BTW-zIW3.js";import{p as L}from"./constant-BTThh9s3.js";import{t as I,f as T}from"./tippy.esm-C2cIAwYP.min.js";import{H as k,n as f}from"./highlight-in-textarea-LAZxhTz-.js";import{T as S}from"./tribute.esm-DK9UGgwV.min.js";import{d as C}from"./debounce-BB-8SLfJ.min.js";import{c as M,a as P}from"./index-bXyjzgw5.min.js";import{E as v,w as g,P as D}from"./runtime-core.esm-bundler-SLuuURr5.min.js";import"./isObject-K1YoVIH1.min.js";import"./index-BAMY2Nnw.min.js";import"./index-rQLcFmgX.min.js";(async()=>{let m=null;(async()=>m=await M({themes:[u(()=>import("./dark-plus-C3mMm8J8.min.js"),[],import.meta.url),u(()=>import("./light-plus-B7mTdjB0.min.js"),[],import.meta.url)],langs:[u(()=>import("./css-DPfMkruS.min.js"),[],import.meta.url)],engine:P(u(()=>import("./wasm-CG6Dc4jp.min.js"),[],import.meta.url))}))();const o=document.querySelector('div#sidepanel>section[item-type="edit-properties"]>form>div.common-form-fields>div.common-form-fields-content textarea[attribute-name="class"]');let p=new k(o,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]});p.handleInput(),f(o);let d=[];wp.hooks.addAction("windpresslivecanvas-autocomplete-items-refresh","windpresslivecanvas",()=>{d=wp.hooks.applyFilters("windpresslivecanvas-autocomplete-items",[],o.value)}),wp.hooks.doAction("windpresslivecanvas-autocomplete-items-refresh");const r=new S({containerClass:"windpresslivecanvas-tribute-container",autocompleteMode:!0,menuItemLimit:50,noMatchTemplate:"",values:async function(t,e){const i=await wp.hooks.applyFilters("windpresslivecanvas-autocomplete-items-query",t,d);e(i)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(t){let e="";return t.original.color!==void 0&&(e+=`background-color: ${t.original.color};`),t.original.fontWeight!==void 0&&(e+=`font-weight: ${t.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${t.original.value}">${t.string}</span>
            <span class="class-hint" style="${e}"></span>
        `}});r.setMenuContainer=function(t){this.menuContainer=t};const b=r.events.callbacks;r.events.callbacks=function(){return{...b.call(this),up:(t,e)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();let i=this.tribute.current.filteredItems.length,s=this.tribute.menuSelected;i>s&&s>0?(this.tribute.menuSelected--,this.setActiveLi()):s===0&&(this.tribute.menuSelected=i-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight)}},down:(t,e)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();let i=this.tribute.current.filteredItems.length-1,s=this.tribute.menuSelected;i>s?(this.tribute.menuSelected++,this.setActiveLi()):i===s&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0)}}}},r.attach(o);const h=v("");function w(){D(()=>{try{p.handleInput()}catch{}f.update(o),r.hideMenu()})}new MutationObserver(t=>{t.forEach(e=>{e.type==="attributes"&&e.attributeName==="selector"&&(h.value=e.target.getAttribute("selector"))})}).observe(document.querySelector('div#sidepanel>section[item-type="edit-properties"]'),{attributes:!0,attributeFilter:["selector"]}),g(h,(t,e)=>{t!==e&&w()}),o.addEventListener("highlights-updated",function(t){_()});let c=I(document.createElement("div"),{plugins:[T],allowHTML:!0,arrow:!1,duration:[500,0],followCursor:!0,trigger:"manual"});function _(){const t=document.querySelector(".hit-container");if(t===null)return;c.reference=t;async function e(n){const a=n.textContent,l=await L.contentWindow.windpress.module.classnameToCss.generate(a);if(l===null||l.trim()==="")return null;c.setContent(m.codeToHtml(l,{lang:"css",theme:"dark-plus"})),c.show()}const i=v(null),s=C(function(n){const a=n.clientX,l=n.clientY,y=document.elementsFromPoint(a,l).find(E=>E.matches('mark[class="word"]'));i.value=y||null},10);t.addEventListener("mousemove",s),t.addEventListener("mouseleave",function(n){s.cancel(),i.value=null}),g(i,(n,a)=>{n&&n!==a?e(n):c.hide()})}A("Module loaded!",{module:"plain-classes"})})();
