import{_ as c}from"./preload-helper-DuwVgReH.min.js";import{l as T}from"./logger-BTW-zIW3.js";import{p as L}from"./constant-BTThh9s3.js";import{d as x}from"./debounce-BB-8SLfJ.min.js";import{c as O,a as P}from"./index-bXyjzgw5.min.js";import"./isObject-K1YoVIH1.min.js";import"./index-BAMY2Nnw.min.js";import"./index-rQLcFmgX.min.js";(async()=>{let u=null;(async()=>u=await O({themes:[c(()=>import("./dark-plus-C3mMm8J8.min.js"),[],import.meta.url),c(()=>import("./light-plus-B7mTdjB0.min.js"),[],import.meta.url)],langs:[c(()=>import("./css-DPfMkruS.min.js"),[],import.meta.url)],engine:P(c(()=>import("./wasm-CG6Dc4jp.min.js"),[],import.meta.url))}))();async function f(n){return(await wp.hooks.applyFilters("windpresslivecanvas-autocomplete-items-query",n)).map(t=>({value:t.value,meta:"TW",caption:t.value,score:1e3,docHTML:t.color?`<div style="display: flex; align-items: center; gap: 8px;"><div style="width:16px; height:16px; background:${t.color}; border:1px solid #ccc;"></div><span>${t.color}</span></div>`:void 0}))}ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(n,t,s,r,i){let l=t.getDocument().getLine(s.row).substring(0,s.column);/class=["|'][^"']*$/i.test(l)||/@apply\s+[^;]*$/i.test(l)?f(r).then(o=>{i(null,o)}).catch(o=>{console.error("Error fetching autocomplete suggestions:",o),i(o,[])}):i(null,[])}});const v=ace.require("ace/tooltip").Tooltip,e=new v(document.body);e.setText(""),e.hide();const d=x(async function(n){const t=n.getDocumentPosition(),s=lc_html_editor.getSession(),r=s.getTokenAt(t.row,t.column);if(!r||!/attribute-value/.test(r.type)){e.hide();return}const i=s.getLine(t.row),l=i.match(/class\s*=\s*["']([^"']*)["']/);if(!l){e.hide();return}const o=l[1],w=i.indexOf(o),a=t.column-w;if(a<0||a>o.length){e.hide();return}const E=o.split(/\s+/);let _=null,m=0;for(let g of E){const y=m,h=m+g.length;if(a>=y&&a<=h){_=g;break}m=h+1}const p=await L.contentWindow.windpress.module.classnameToCss.generate(_);p===null||p.trim()===""?e.hide():(e.setHtml(u.codeToHtml(p,{lang:"css",theme:"dark-plus"})),e.setPosition(n.domEvent.clientX+10,n.domEvent.clientY+10),e.show())},10);lc_html_editor.addEventListener("mousemove",d),lc_html_editor.addEventListener("mouseleave",function(n){d.cancel()}),T("Module loaded!",{module:"htmleditor"})})();
