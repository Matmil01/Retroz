import{s as U,t as Z}from"./chunk-BP1tGd43.min.js";import{E as Ne,S as Y,b as _e,j as ve,k as K,nx as P,re as M,ri as me,tC as B,tK as J,tX as $,tg as R,v as Fe,x as Q,y as E}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import{c as H}from"./vue.runtime.esm-bundler-B7l4RX9R.min.js";import{_ as Ke,t as $e}from"./Button-B6tnd5h6.min.js";import{i as ee}from"./core-CuG4XPOF.min.js";import{t as Re}from"./DropdownMenu-D9W2POA3.min.js";import{n as z}from"./index.browser-L__kdN7m.min.js";import{t as We}from"./Input-CZFwhgLF.min.js";function Xe(e,n){let t=P([]),r=Fe(()=>{let u=[];function p(a){for(let o of a)o.value&&u.push(o.value),o.children&&o.children.length>0&&p(o.children)}return p(t.value),u});function f(u){return Object.entries(u||{}).map(([p,a])=>{if(p==="$value")return null;let o={value:z(7),var:{key:p,value:a},defaultExpanded:!0,onToggle:c=>{c.preventDefault()}};if(typeof a=="object"&&a){o.children=f(a);let c=a;c.$value===void 0?o.var.value="":o.var.value=c.$value}else o.var.value=a;return o}).filter(p=>p!==null)}function v(){try{let u=a=>{var o;if(!((o=a.var)!=null&&o.key))return null;if(a.children&&a.children.length>0){let c={};return a.children.forEach(l=>{let y=u(l);y&&Object.assign(c,y)}),a.var.value!==void 0&&a.var.value!==null&&(c.$value=a.var.value),{[a.var.key]:c}}else if(a.var.value!==void 0&&a.var.value!==null)return{[a.var.key]:a.var.value};return null},p={};t.value.forEach(a=>{let o=u(a);o&&Object.assign(p,o)}),n.value.namespaces[e]=p}catch(u){console.error("Error updating theme from items:",u)}}function i(u,p){for(let a of u){if(a.value===p)return a;if(a.children&&a.children.length>0){let o=i(a.children,p);if(o)return o}}}function d(u,p){for(let a of u){if(a.children&&a.children.includes(p))return a;if(a.children){let o=d(a.children,p);if(o)return o}}}function s(u,p=!0){let a=u.split("-"),o=t.value,c=null;for(let l=0;l<a.length;l++){let y=a[l],m=l===a.length-1,b=o.find(O=>O.var.key===y);if(!b){if(!p)return null;let O={value:z(7),var:{key:y,value:""},defaultExpanded:!0,children:[],onToggle:x=>{x.preventDefault()}};o.push(O),b=O}c=b,m||(c.children||(c.children=[]),o=c.children)}return c}function g(u,p,a){let o=i(t.value,u);if(!o){console.error("Item not found for uid:",u);return}let c={value:z(7),var:{key:p||"",value:a===void 0?"":a},defaultExpanded:!0,children:[],onToggle:l=>{l.preventDefault()}};o.children?o.children.push(c):o.children=[c]}function w(u,p,a){var y;let o={value:z(7),var:{key:p||"",value:a===void 0?"":a},defaultExpanded:!0,children:[],onToggle:m=>{m.preventDefault()}};if(!u){t.value.push(o);return}let c=i(t.value,u);if(!c)return;let l=d(t.value,c);if(l&&l.children){let m=(y=l.children)==null?void 0:y.indexOf(c);m!==void 0&&m>=0&&l.children.splice(m+1,0,o)}else{let m=t.value.indexOf(c);m>=0&&t.value.splice(m+1,0,o)}}function h(u){let p=i(t.value,u);if(!p){console.error("Item not found for uid:",u);return}let a=d(t.value,p);if(a&&a.children){let o=a.children.indexOf(p);o>=0&&a.children.splice(o,1)}else{let o=t.value.indexOf(p);o>=0&&t.value.splice(o,1)}}function D(){t.value=f(n.value.namespaces[e])}return{expandedTree:r,items:t,namespaceToTree:f,updateThemeFromItems:v,findItemByUid:i,findOrCreateItemByKey:s,addChild:g,addNext:w,deleteItem:h,initializeItems:D}}function Ue(e){if(Array.isArray(e))return e}function Ye(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r,f,v,i,d=[],s=!0,g=!1;try{if(v=(t=t.call(e)).next,n===0){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=v.call(t)).done)&&(d.push(r.value),d.length!==n);s=!0);}catch(w){g=!0,f=w}finally{try{if(!s&&t.return!=null&&(i=t.return(),Object(i)!==i))return}finally{if(g)throw f}}return d}}function te(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function ge(e,n){if(e){if(typeof e=="string")return te(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?te(e,n):void 0}}function Be(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(e,n){return Ue(e)||Ye(e,n)||ge(e,n)||Be()}var he=Z((e=>{Object.defineProperty(e,"__esModule",{value:!0});function n(t,r){var f=r.type,v=r.listener,i=r.options;return t.addEventListener(f,v,i),function(){t.removeEventListener(f,v,i)}}e.bind=n})),He=Z((e=>{var n=e&&e.__assign||function(){return n=Object.assign||function(i){for(var d,s=1,g=arguments.length;s<g;s++)for(var w in d=arguments[s],d)Object.prototype.hasOwnProperty.call(d,w)&&(i[w]=d[w]);return i},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var t=he();function r(i){if(i!==void 0)return typeof i=="boolean"?{capture:i}:i}function f(i,d){return d==null?i:n(n({},i),{options:n(n({},r(d)),r(i.options))})}function v(i,d,s){var g=d.map(function(w){var h=f(w,s);return(0,t.bind)(i,h)});return function(){g.forEach(function(w){return w()})}}e.bindAll=v})),V=Z((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var n=he();Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return n.bind}});var t=He();Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return t.bindAll}})})),ze="data-pdnd-honey-pot";function be(e){return e instanceof Element&&e.hasAttribute("data-pdnd-honey-pot")}function we(e){var n=document.elementsFromPoint(e.x,e.y),t=ye(n,2),r=t[0],f=t[1];return r?be(r)?f??null:r:null}function W(e){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},W(e)}function Ve(e,n){if(W(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n||"default");if(W(r)!="object")return r;throw TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ge(e){var n=Ve(e,"string");return W(n)=="symbol"?n:n+""}function ne(e,n,t){return(n=Ge(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var qe=2147483647,re=U(V());function De(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,r)}return t}function Oe(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]==null?{}:arguments[n];n%2?De(Object(t),!0).forEach(function(r){ne(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Ze(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function Je(e){return{x:e.x-1,y:e.y-1}}function Qe(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function et(e){return{x:Math.min(e.x,window.innerWidth-2),y:Math.min(e.y,window.innerHeight-2)}}function xe(e){var n=e.client,t=et(Qe(Je(Ze(n))));return DOMRect.fromRect({x:t.x,y:t.y,width:2,height:2})}function Te(e){var n=e.clientRect;return{left:`${n.left}px`,top:`${n.top}px`,width:`${n.width}px`,height:`${n.height}px`}}function tt(e){var n=e.client,t=e.clientRect;return n.x>=t.x&&n.x<=t.x+t.width&&n.y>=t.y&&n.y<=t.y+t.height}function nt(e){var n=e.initial,t=document.createElement("div");t.setAttribute(ze,"true");var r=xe({client:n});Object.assign(t.style,Oe(Oe({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Te({clientRect:r})),{},{pointerEvents:"auto",zIndex:qe})),document.body.appendChild(t);var f=(0,re.bind)(window,{type:"pointermove",listener:function(v){var i={x:v.clientX,y:v.clientY};r=xe({client:i}),Object.assign(t.style,Te({clientRect:r}))},options:{capture:!0}});return function(v){var i=v.current;if(f(),tt({client:i,clientRect:r})){t.remove();return}function d(){s(),t.remove()}var s=(0,re.bindAll)(window,[{type:"pointerdown",listener:d},{type:"pointermove",listener:d},{type:"focusin",listener:d},{type:"focusout",listener:d},{type:"dragstart",listener:d},{type:"dragenter",listener:d},{type:"dragover",listener:d}],{capture:!0})}}function rt(){var e=null;function n(){return e=null,(0,re.bind)(window,{type:"pointermove",listener:function(r){e={x:r.clientX,y:r.clientY}},options:{capture:!0}})}function t(){var r=null;return function(f){var v=f.eventName,i=f.payload;if(v==="onDragStart"){var d=i.location.initial.input,s=e??{x:d.clientX,y:d.clientY};r=nt({initial:s})}if(v==="onDrop"){var g,w=i.location.current.input;(g=r)==null||g({current:{x:w.clientX,y:w.clientY}}),r=null,e=null}}}return{bindEvents:n,getOnPostDispatch:t}}function at(e){if(Array.isArray(e))return te(e)}function ot(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function it(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Se(e){return at(e)||ot(e)||ge(e)||it()}function N(e){var n=null;return function(){if(!n){var t=[...arguments];n={result:e.apply(this,t)}}return n.result}}var lt=N(function(){return navigator.userAgent.includes("Firefox")}),ae=N(function(){var e=navigator,n=e.userAgent;return n.includes("AppleWebKit")&&!n.includes("Chrome")}),ut=U(V()),oe={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function ct(e){var n=e.dragLeave;return ae()?n.hasOwnProperty(oe.isLeavingWindow):!1}(function(){if(typeof window>"u"||!ae())return;function e(){return{enterCount:0,isOverWindow:!1}}var n=e();function t(){n=e()}(0,ut.bindAll)(window,[{type:"dragstart",listener:function(){n.enterCount=0,n.isOverWindow=!0}},{type:"drop",listener:t},{type:"dragend",listener:t},{type:"dragenter",listener:function(r){!n.isOverWindow&&n.enterCount===0&&(r[oe.isEnteringWindow]=!0),n.isOverWindow=!0,n.enterCount++}},{type:"dragleave",listener:function(r){n.enterCount--,n.isOverWindow&&n.enterCount===0&&(r[oe.isLeavingWindow]=!0,n.isOverWindow=!1)}}],{capture:!0})})();function dt(e){return"nodeName"in e}function st(e){return dt(e)&&e.ownerDocument!==document}function ft(e){var n=e.dragLeave,t=n.type,r=n.relatedTarget;return t==="dragleave"?ae()?ct({dragLeave:n}):r==null?!0:lt()?st(r):r instanceof HTMLIFrameElement:!1}function pt(e){var n=e.onDragEnd;return[{type:"pointermove",listener:(function(){var t=0;return function(){if(t<20){t++;return}n()}})()},{type:"pointerdown",listener:n}]}function X(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var ie=(function(e){var n=[],t=null,r=function(){n=[...arguments],!t&&(t=requestAnimationFrame(function(){t=null,e.apply(void 0,n)}))};return r.cancel=function(){t&&(t=(cancelAnimationFrame(t),null))},r})(function(e){return e()}),G=(function(){var e=null;function n(r){e={frameId:requestAnimationFrame(function(){e=null,r()}),fn:r}}function t(){e&&(e=(cancelAnimationFrame(e.frameId),e.fn(),null))}return{schedule:n,flush:t}})();function vt(e){var n=e.source,t=e.initial,r=e.dispatchEvent,f={dropTargets:[]};function v(i){r(i),f={dropTargets:i.payload.location.current.dropTargets}}return{start:function(i){var d=i.nativeSetDragImage,s={current:t,previous:f,initial:t};v({eventName:"onGenerateDragPreview",payload:{source:n,location:s,nativeSetDragImage:d}}),G.schedule(function(){v({eventName:"onDragStart",payload:{source:n,location:s}})})},dragUpdate:function(i){var d=i.current;G.flush(),ie.cancel(),v({eventName:"onDropTargetChange",payload:{source:n,location:{initial:t,previous:f,current:d}}})},drag:function(i){var d=i.current;ie(function(){G.flush(),v({eventName:"onDrag",payload:{source:n,location:{initial:t,previous:f,current:d}}})})},drop:function(i){var d=i.current,s=i.updatedSourcePayload;G.flush(),ie.cancel(),v({eventName:"onDrop",payload:{source:s??n,location:{current:d,previous:f,initial:t}}})}}}var mt=U(V()),le={isActive:!1};function Ee(){return!le.isActive}function gt(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function yt(e){var n=e.current,t=e.next;if(n.length!==t.length)return!0;for(var r=0;r<n.length;r++)if(n[r].element!==t[r].element)return!0;return!1}function ht(e){var n=e.event,t=e.dragType,r=e.getDropTargetsOver,f=e.dispatchEvent;if(!Ee())return;var v=bt({event:n,dragType:t,getDropTargetsOver:r});le.isActive=!0;var i={current:v};ue({event:n,current:v.dropTargets});var d=vt({source:t.payload,dispatchEvent:f,initial:v});function s(u){var p=yt({current:i.current.dropTargets,next:u.dropTargets});i.current=u,p&&d.dragUpdate({current:i.current})}function g(u){var p=X(u),a=be(u.target)?we({x:p.clientX,y:p.clientY}):u.target,o=r({target:a,input:p,source:t.payload,current:i.current.dropTargets});o.length&&(u.preventDefault(),ue({event:u,current:o})),s({dropTargets:o,input:p})}function w(){i.current.dropTargets.length&&s({dropTargets:[],input:i.current.input}),d.drop({current:i.current,updatedSourcePayload:null}),h()}function h(){le.isActive=!1,D()}var D=(0,mt.bindAll)(window,[{type:"dragover",listener:function(u){g(u),d.drag({current:i.current})}},{type:"dragenter",listener:g},{type:"dragleave",listener:function(u){ft({dragLeave:u})&&(s({input:i.current.input,dropTargets:[]}),t.startedFrom==="external"&&w())}},{type:"drop",listener:function(u){if(i.current={dropTargets:i.current.dropTargets,input:X(u)},!i.current.dropTargets.length){w();return}u.preventDefault(),ue({event:u,current:i.current.dropTargets}),d.drop({current:i.current,updatedSourcePayload:t.type==="external"?t.getDropPayload(u):null}),h()}},{type:"dragend",listener:function(u){i.current={dropTargets:i.current.dropTargets,input:X(u)},w()}}].concat(Se(pt({onDragEnd:w}))),{capture:!0});d.start({nativeSetDragImage:gt(n)})}function ue(e){var r;var n=e.event,t=(r=e.current[0])==null?void 0:r.dropEffect;t!=null&&n.dataTransfer&&(n.dataTransfer.dropEffect=t)}function bt(e){var n=e.event,t=e.dragType,r=e.getDropTargetsOver,f=X(n);if(t.startedFrom==="external")return{input:f,dropTargets:[]};var v=r({input:f,source:t.payload,target:n.target,current:[]});return{input:f,dropTargets:v}}var je={canStart:Ee,start:ht},ce=new Map;function wt(e){var n=e.typeKey,t=e.mount,r=ce.get(n);if(r)return r.usageCount++,r;var f={typeKey:n,unmount:t(),usageCount:1};return ce.set(n,f),f}function Dt(e){var n=wt(e);return function(){n.usageCount--,!(n.usageCount>0)&&(n.unmount(),ce.delete(e.typeKey))}}function _(){var e=[...arguments];return function(){e.forEach(function(n){return n()})}}function Ae(e,n){var t=n.attribute,r=n.value;return e.setAttribute(t,r),function(){return e.removeAttribute(t)}}function Pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]==null?{}:arguments[n];n%2?Pe(Object(t),!0).forEach(function(r){ne(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function de(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ot(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var r=0,f=function(){};return{s:f,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(s){throw s},f}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,i=!0,d=!1;return{s:function(){t=t.call(e)},n:function(){var s=t.next();return i=s.done,s},e:function(s){d=!0,v=s},f:function(){try{i||t.return==null||t.return()}finally{if(d)throw v}}}}function Ot(e,n){if(e){if(typeof e=="string")return Ie(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ie(e,n):void 0}}function Ie(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function se(e){return e.slice(0).reverse()}function xt(e){var n=e.typeKey,t=e.defaultDropEffect,r=new WeakMap,f=`data-drop-target-for-${n}`,v=`[${f}]`;function i(u){return r.set(u.element,u),function(){return r.delete(u.element)}}function d(u){if(0)var p;var a=_(Ae(u.element,{attribute:f,value:"true"}),i(u));return N(a)}function s(u){var T,S;var p=u.source,a=u.target,o=u.input,c=u.result,l=c===void 0?[]:c;if(a==null)return l;if(!(a instanceof Element))return a instanceof Node?s({source:p,target:a.parentElement,input:o,result:l}):l;var y=a.closest(v);if(y==null)return l;var m=r.get(y);if(m==null)return l;var b={input:o,source:p,element:m.element};if(m.canDrop&&!m.canDrop(b))return s({source:p,target:m.element.parentElement,input:o,result:l});var O=((T=m.getData)==null?void 0:T.call(m,b))??{},x=((S=m.getDropEffect)==null?void 0:S.call(m,b))??t,j={data:O,element:m.element,dropEffect:x,isActiveDueToStickiness:!1};return s({source:p,target:m.element.parentElement,input:o,result:[].concat(Se(l),[j])})}function g(u){var p=u.eventName,a=u.payload,o=de(a.location.current.dropTargets),c;try{for(o.s();!(c=o.n()).done;){var l,y=c.value,m=r.get(y.element),b=I(I({},a),{},{self:y});m==null||(l=m[p])==null||l.call(m,b)}}catch(O){o.e(O)}finally{o.f()}}var w={onGenerateDragPreview:g,onDrag:g,onDragStart:g,onDrop:g,onDropTargetChange:function(u){var p=u.payload,a=new Set(p.location.current.dropTargets.map(function(F){return F.element})),o=new Set,c=de(p.location.previous.dropTargets),l;try{for(c.s();!(l=c.n()).done;){var y,m=l.value;o.add(m.element);var b=r.get(m.element),O=a.has(m.element),x=I(I({},p),{},{self:m});if(b==null||(y=b.onDropTargetChange)==null||y.call(b,x),!O){var j;b==null||(j=b.onDragLeave)==null||j.call(b,x)}}}catch(F){c.e(F)}finally{c.f()}var T=de(p.location.current.dropTargets),S;try{for(T.s();!(S=T.n()).done;){var k,A,C=S.value;if(!o.has(C.element)){var pe=I(I({},p),{},{self:C}),L=r.get(C.element);L==null||(k=L.onDropTargetChange)==null||k.call(L,pe),L==null||(A=L.onDragEnter)==null||A.call(L,pe)}}}catch(F){T.e(F)}finally{T.f()}}};function h(u){w[u.eventName](u)}function D(u){var p=u.source,a=u.target,o=u.input,c=u.current,l=s({source:p,target:a,input:o});if(l.length>=c.length)return l;for(var y=se(c),m=se(l),b=[],O=0;O<y.length;O++){var x,j=y[O],T=m[O];if(T!=null){b.push(T);continue}var S=b[O-1],k=y[O-1];if((S==null?void 0:S.element)!==(k==null?void 0:k.element))break;var A=r.get(j.element);if(!A)break;var C={input:o,source:p,element:A.element};if(A.canDrop&&!A.canDrop(C)||!((x=A.getIsSticky)!=null&&x.call(A,C)))break;b.push(I(I({},j),{},{isActiveDueToStickiness:!0}))}return se(b)}return{dropTargetForConsumers:d,getIsOver:D,dispatchEvent:h}}function Tt(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=St(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var r=0,f=function(){};return{s:f,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(s){throw s},f}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,i=!0,d=!1;return{s:function(){t=t.call(e)},n:function(){var s=t.next();return i=s.done,s},e:function(s){d=!0,v=s},f:function(){try{i||t.return==null||t.return()}finally{if(d)throw v}}}}function St(e,n){if(e){if(typeof e=="string")return ke(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ke(e,n):void 0}}function ke(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,r)}return t}function Et(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]==null?{}:arguments[n];n%2?Ce(Object(t),!0).forEach(function(r){ne(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function jt(){var e=new Set,n=null;function t(v){n&&(!v.canMonitor||v.canMonitor(n.canMonitorArgs))&&n.active.add(v)}function r(v){var i=Et({},v);e.add(i),t(i);function d(){e.delete(i),n&&n.active.delete(i)}return N(d)}function f(v){var i=v.eventName,d=v.payload;if(i==="onGenerateDragPreview"){n={canMonitorArgs:{initial:d.location.initial,source:d.source},active:new Set};var s=Tt(e),g;try{for(s.s();!(g=s.n()).done;){var w=g.value;t(w)}}catch(o){s.e(o)}finally{s.f()}}if(n){for(var h=Array.from(n.active),D=0,u=h;D<u.length;D++){var p=u[D];if(n.active.has(p)){var a;(a=p[i])==null||a.call(p,d)}}i==="onDrop"&&(n.active.clear(),n=null)}}return{dispatchEvent:f,monitorForConsumers:r}}function At(e){var n=e.typeKey,t=e.mount,r=e.dispatchEventToSource,f=e.onPostDispatch,v=e.defaultDropEffect,i=jt(),d=xt({typeKey:n,defaultDropEffect:v});function s(h){r==null||r(h),d.dispatchEvent(h),i.dispatchEvent(h),f==null||f(h)}function g(h){var D=h.event,u=h.dragType;je.start({event:D,dragType:u,getDropTargetsOver:d.getIsOver,dispatchEvent:s})}function w(){function h(){var D={canStart:je.canStart,start:g};return t(D)}return Dt({typeKey:n,mount:h})}return{registerUsage:w,dropTarget:d.dropTargetForConsumers,monitor:i.monitorForConsumers}}var Pt=N(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),It="pdnd:android-fallback",kt="text/plain",Ct="application/vnd.pdnd",Lt=U(V()),q=new WeakMap;function Mt(e){return q.set(e.element,e),function(){q.delete(e.element)}}var Le=rt(),fe=At({typeKey:"element",defaultDropEffect:"move",mount:function(e){return _(Le.bindEvents(),(0,Lt.bind)(document,{type:"dragstart",listener:function(n){var p,a;if(e.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var t=n.target;if(t instanceof HTMLElement){var r=q.get(t);if(r){var f=X(n),v={element:r.element,dragHandle:r.dragHandle??null,input:f};if(r.canDrag&&!r.canDrag(v)){n.preventDefault();return}if(r.dragHandle){var i=we({x:f.clientX,y:f.clientY});if(!r.dragHandle.contains(i)){n.preventDefault();return}}var d=((p=r.getInitialDataForExternal)==null?void 0:p.call(r,v))??null;if(d)for(var s=0,g=Object.entries(d);s<g.length;s++){var w=ye(g[s],2),h=w[0],D=w[1];n.dataTransfer.setData(h,D??"")}Pt()&&!n.dataTransfer.types.includes("text/plain")&&!n.dataTransfer.types.includes("text/uri-list")&&n.dataTransfer.setData(kt,It),n.dataTransfer.setData(Ct,"");var u={type:"element",payload:{element:r.element,dragHandle:r.dragHandle??null,data:((a=r.getInitialData)==null?void 0:a.call(r,v))??{}},startedFrom:"internal"};e.start({event:n,dragType:u})}}}}}))},dispatchEventToSource:function(e){var n,t,r=e.eventName,f=e.payload;(n=q.get(f.source.element))==null||(t=n[r])==null||t.call(n,f)},onPostDispatch:Le.getOnPostDispatch()}),Nt=fe.dropTarget,Me=fe.monitor;function _t(e){if(0)var n;var t=_(fe.registerUsage(),Mt(e),Ae(e.element,{attribute:"draggable",value:"true"}));return N(t)}function Ft(e,n,t){let r=P(null),f=P(null);function v(a){return a.instruction?a.instruction:a.type?{type:a.type,currentLevel:a.currentLevel,indentPerLevel:a.indentPerLevel,desiredLevel:a.desiredLevel}:null}function i(a,o){for(let c=0;c<a.length;c++){if(a[c].value===o)return a.splice(c,1),!0;if(a[c].children&&i(a[c].children,o))return!0}return!1}function d(a,o,c){for(let l=0;l<a.length;l++){if(a[l].value===o)return a.splice(l,0,c),!0;if(a[l].children&&d(a[l].children,o,c))return!0}return!1}function s(a,o,c){for(let l=0;l<a.length;l++){if(a[l].value===o)return a.splice(l+1,0,c),!0;if(a[l].children&&s(a[l].children,o,c))return!0}return!1}function g(a,o,c){for(let l=0;l<a.length;l++){if(a[l].value===o)return a[l].children||(a[l].children=[]),a[l].children.unshift(c),!0;if(a[l].children&&g(a[l].children,o,c))return!0}return!1}function w(a,o,c=[]){for(let l of a){if(l.value===o)return c;if(l.children){let y=w(l.children,o,[...c,l.value]);if(y)return y}}}function h(a,o,c){let l=t(e.value,a),y=t(e.value,o);if(!l||!y){console.warn("Source or target item not found in current namespace - cross-namespace drag operations are not supported",{sourceItem:!!l,targetItem:!!y,itemId:a,targetId:o});return}if(i(e.value,a),c.type==="reorder-above")d(e.value,o,l);else if(c.type==="reorder-below")s(e.value,o,l);else if(c.type==="make-child")g(e.value,o,l);else if(c.type==="reparent"){let m=w(e.value,o);if(m&&c.desiredLevel!==void 0&&m.length>c.desiredLevel){let b=m[c.desiredLevel];s(e.value,b,l)}}n(),f.value=a,setTimeout(()=>{f.value=null},1e3)}function D(a,o){let c=t(e.value,a);if(!c)return!1;function l(y){if(!y.children)return!1;for(let m of y.children)if(m.value===o||l(m))return!0;return!1}return l(c)}function u(a){return r.value?a===r.value||D(r.value,a):!1}function p(a){return f.value===a}return J(a=>{let o=_(Me({onDrop(c){let{location:l,source:y}=c;if(!l.current.dropTargets.length)return;let m=y.data.id,b=l.current.dropTargets[0],O=b.data.id,x=v(b.data);x!==null&&h(m,O,x)}}));a(()=>{o()})}),J(a=>{let o=_(Me({onDragStart({source:c}){r.value=c.data.id},onDrop(c){let{location:l,source:y}=c;if(r.value=null,!l.current.dropTargets.length)return;let m=y.data.id,b=l.current.dropTargets[0],O=b.data.id,x=v(b.data);x===null?h(m,O,{type:"reorder-below"}):h(m,O,x)}}));a(()=>{r.value=null,o()})}),{draggedItemId:r,recentlyMovedItemId:f,shouldBeDimmed:u,wasRecentlyMoved:p,isDescendantOf:D,handleDragAndDrop:h}}var Kt={key:2,class:"absolute text-primary bg-primary/30 backdrop-blur-md px-4 py-2 rounded-lg pointer-events-none top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-medium whitespace-nowrap z-10 transition-all duration-150 ease-out"},$t=ve({__name:"DraggableTreeItem",props:{item:{},level:{},hasChildren:{type:Boolean},isLast:{type:Boolean},isDescendantOf:{type:Function},onDelete:{type:Function}},setup(e){function n(h,D){let{input:u,element:p,indentPerLevel:a,currentLevel:o}=D,c=p.getBoundingClientRect(),l=u.clientY-c.top,y=u.clientX-c.left,m=c.height,b="reorder-below";return b=l<m*.33?"reorder-above":l>m*.67?"reorder-below":y>a*2?"make-child":"reorder-below",{...h,instruction:{type:b,currentLevel:o,indentPerLevel:a}}}function t(h){return h.instruction||null}let r=e,f=P(),v=P(),i=P(),d=P(!1),s=P(!1),g=P(null);function w(h){if(h.key==="Delete"&&r.onDelete){let D=h.target;if(D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.isContentEditable)return;h.preventDefault(),r.onDelete(r.item.value)}}return J(h=>{let D=ee(f),u=ee(v),p=ee(i);if(!D||!u||!p)return;let a={id:r.item.value,level:r.level},o=p.querySelector(".drag-and-drop-handler");if(!o){console.warn("No drag handle found for item:",r.item.value);return}let c=_(_t({element:o,getInitialData:()=>a,onGenerateDragPreview:({nativeSetDragImage:l})=>{var y;if(l){let m=document.createElement("div");m.className="bg-default border border-default rounded-lg p-2 shadow-lg opacity-90 max-w-md font-sans";let b=p.cloneNode(!0);if(b.className="m-0 py-2 px-0 [&_*]:!bg-default [&_*]:!text-highlighted",m.appendChild(b),r.hasChildren&&((y=r.item.children)==null?void 0:y.length)){let T=document.createElement("div");T.className="ml-4 pl-2 border-l-2 border-default";let S=document.createElement("div");S.className="text-sm text-dimmed py-1",S.textContent=`+ ${r.item.children.length} nested item${r.item.children.length>1?"s":""}`,T.appendChild(S),m.appendChild(T)}document.body.appendChild(m);let O=o.getBoundingClientRect(),x=O.width/2,j=O.height/2;l(m,x,j),setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},100)}},onDragStart:()=>{d.value=!0},onDrop:()=>{d.value=!1}}),Nt({element:D,getData:({input:l,element:y})=>{let m={id:r.item.value};return n(m,{input:l,element:y,indentPerLevel:16,currentLevel:r.level,block:[]})},canDrop:({source:l})=>{let y=l.data.id,m=r.item.value;return!(y===m||r.isDescendantOf&&r.isDescendantOf(y,m))},onDrag:({self:l})=>{g.value=t(l.data)},onDragEnter:({source:l})=>{l.data.id!==r.item.value&&(s.value=!0)},onDragLeave:()=>{s.value=!1,g.value=null},onDrop:()=>{s.value=!1,g.value=null},getIsSticky:()=>!0}));h(()=>c())}),(h,D)=>(R(),Y("div",{ref_key:"outerDropZoneRef",ref:f,class:M(["relative w-full px-2.5 py-1.5 transition-all duration-200 ease-out",{"bg-elevated":s.value}]),onKeydown:w,tabindex:"0"},[g.value?(R(),Y("div",{key:0,class:M(["absolute pointer-events-none border-primary transition-all duration-150 ease-out",{"!border-b-2 -bottom-px left-1 right-0":g.value.type==="reorder-below","!border-t-2 -top-px left-1 right-0":g.value.type==="reorder-above","!border-2 rounded top-0 bottom-0 bg-primary/10 w-full -left-px":g.value.type==="make-child"}])},null,2)):Q("",!0),g.value&&(g.value.type==="reorder-below"||g.value.type==="reorder-above")?(R(),Y("div",{key:1,class:M(["absolute pointer-events-none w-2 h-2 border-2 border-primary bg-transparent rounded-full -left-1 z-10 transition-all duration-150 ease-out",{"-bottom-1":g.value.type==="reorder-below","-top-1":g.value.type==="reorder-above"}])},null,2)):Q("",!0),g.value&&g.value.type==="make-child"?(R(),Y("div",Kt," Drop to nest inside ")):Q("",!0),E("div",{ref_key:"dropZoneRef",ref:v,class:"relative w-full transition-all duration-200 ease-out"},[E("div",{ref_key:"draggableRef",ref:i,class:M(["relative w-full py-4 transition-all duration-200 ease-out",{"is-being-dragged":d.value}])},[B(h.$slots,"default")],2)],512)],34))}}),Rt={class:"flex items-center gap-2 w-full"},Wt={class:"drag-and-drop-handler bg-elevated rounded p-1 hover:bg-accented cursor-grab"},Xt={class:"pointer-events-none absolute left-0 -top-2.5 text-highlighted text-xs font-medium px-1.5 transition-all peer-focus:-top-2.5 peer-focus:text-highlighted peer-focus:text-xs peer-focus:font-medium peer-placeholder-shown:text-sm peer-placeholder-shown:text-dimmed peer-placeholder-shown:top-1.5 peer-placeholder-shown:font-normal"},Ut={class:"inline-flex bg-default px-1"},Yt={class:"w-full"},Bt={class:"inline-flex bg-default px-1"},Ht=ve({__name:"WizardTreeItem",props:{item:{},level:{},shouldBeDimmed:{type:Function},wasRecentlyMoved:{type:Function},isDescendantOf:{type:Function},onAddNext:{type:Function},onAddChild:{type:Function},onDelete:{type:Function}},setup(e){function n(t){t.stopPropagation(),t.stopImmediatePropagation()}return(t,r)=>{let f=Ke,v=We,i=$e,d=Re;return R(),_e($t,{item:t.item,level:t.level,"has-children":!!(t.item.children&&t.item.children.length>0),"is-last":!1,"is-descendant-of":t.isDescendantOf,"on-delete":t.onDelete,class:M([{"opacity-30":t.shouldBeDimmed(t.item.value||""),"ring-2 ring-primary ring-offset-2 bg-primary/5":t.wasRecentlyMoved(t.item.value||"")},"transition-all duration-300 ease-out rounded-lg"])},{default:$(()=>[E("div",Rt,[E("div",Wt,[K(f,{name:"lucide:grip-vertical",class:"size-4 text-dimmed"})]),B(t.$slots,"leading",{item:t.item}),E("div",null,[K(v,{modelValue:t.item.var.key,"onUpdate:modelValue":[r[0]||(r[0]=s=>t.item.var.key=s),r[1]||(r[1]=s=>{let g=s.replace(/[^a-zA-Z0-9\\-_]/g,"");t.item.var.key=g})],onKeydown:[H(n,["left"]),H(n,["right"])],placeholder:"",ui:{base:"peer"}},{default:$(()=>[E("label",Xt,[E("span",Ut,me(t.i18n.__("Name")),1)])]),_:1},8,["modelValue"])]),B(t.$slots,"before-value",{item:t.item}),E("div",Yt,[K(v,{modelValue:t.item.var.value,"onUpdate:modelValue":[r[2]||(r[2]=s=>t.item.var.value=s),r[3]||(r[3]=s=>{t.item.var.value=s})],onKeydown:[H(n,["left"]),H(n,["right"])],placeholder:"",ui:{base:"peer",root:"block"}},Ne({default:$(()=>[E("label",{class:M(["pointer-events-none absolute left-0 -top-2.5 text-highlighted text-xs font-medium px-1.5 transition-all peer-focus:-top-2.5 peer-focus:text-highlighted peer-focus:text-xs peer-focus:font-medium peer-placeholder-shown:text-sm peer-placeholder-shown:text-dimmed peer-placeholder-shown:top-1.5 peer-placeholder-shown:font-normal",{"peer-placeholder-shown:ps-9 peer-focus:ps-1.5":t.$slots["value-leading"]}])},[E("span",Bt,me(t.i18n.__("Value")),1)],2)]),_:2},[t.$slots["value-leading"]?{name:"leading",fn:$(()=>[B(t.$slots,"value-leading",{item:t.item})]),key:"0"}:void 0]),1032,["modelValue"])]),E("div",null,[K(d,{items:[{label:t.i18n.__("Add (next)","windpress"),icon:"i-lucide-plus",onSelect(){t.onAddNext(t.item.value||"")}},{label:t.i18n.__("Add (child)","windpress"),icon:"lucide:corner-down-right",onSelect(){t.onAddChild(t.item.value||"")}},...t.onDelete?[{label:"Delete",icon:"i-lucide-trash-2",onSelect(){t.onDelete(t.item.value||"")}}]:[]],ui:{content:"w-48"}},{default:$(()=>[K(i,{icon:"lucide:ellipsis",color:"neutral",variant:"ghost"})]),_:1},8,["items"])])])]),_:3},8,["item","level","has-children","is-descendant-of","on-delete","class"])}}});export{Ft as n,Xe as r,Ht as t};
