import"./dist-BRFYlgNW.min.js";import{t as p}from"./preload-helper-hRiy8xQv.min.js";import"./dist-Bc3DqNCA.min.js";import{t as D}from"./logger-B3j_KY2M.js";import{n as b,t as A}from"./dist-Bm-lj0eb.min.js";import{t as P}from"./constant-Cr6G0kc1.js";(async()=>{var _=null,s=new Map;function f(t){let e=s.get(t);return e&&Date.now()-e.timestamp<3e5?e.value:null}function v(t,e){if(s.size>=500){let l=Array.from(s.entries());l.sort((n,i)=>n[1].timestamp-i[1].timestamp);for(let n=0;n<l.length-350;n++)s.delete(l[n][0])}s.set(t,{value:e,timestamp:Date.now()})}(async()=>_=await b({themes:[p(()=>import("./dark-plus-BGOaVPr_.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url),p(()=>import("./light-plus-Bi5cAkuq.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url)],langs:[p(()=>import("./css-DGqdYipb.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url)],engine:A(p(()=>import("./wasm-Ce0kwmaA.min.js").then(async t=>(await t.__tla,t)),[],import.meta.url))}))();async function w(t){return(await wp.hooks.applyFilters("windpresslivecanvas-autocomplete-items-query",t)).map(e=>({value:e.value,meta:"TW",caption:e.value,score:1e3,docHTML:e.color?`<div style="display: flex; align-items: center; gap: 8px;"><div style="width:16px; height:16px; background:${e.color}; border:1px solid #ccc;"></div><span>${e.color}</span></div>`:void 0}))}ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(t,e,l,n,i){let m=e.getDocument().getLine(l.row).substring(0,l.column);/class=["|'][^"']*$/i.test(m)||/@apply\s+[^;]*$/i.test(m)?w(n).then(a=>{i(null,a)}).catch(a=>{console.error("Error fetching autocomplete suggestions:",a),i(a,[])}):i(null,[])}});var y=ace.require("ace/tooltip").Tooltip,o=new y(document.body);o.setText(""),o.hide();async function E(t){let e=t.getDocumentPosition(),l=lc_html_editor.getSession(),n=l.getTokenAt(e.row,e.column);if(!n||!/attribute-value/.test(n.type)){o.hide();return}let i=l.getLine(e.row),m=i.match(/class\s*=\s*["']([^"']*)["']/);if(!m){o.hide();return}let a=m[1],T=i.indexOf(a),c=e.column-T;if(c<0||c>a.length){o.hide();return}let L=a.split(/\s+/),u=null,d=0;for(let h of L){let x=d,g=d+h.length;if(c>=x&&c<=g){u=h;break}d=g+1}let r=f(u);r===null&&(r=await P.contentWindow.windpress.module.classnameToCss.generate(u),v(u,r)),r===null||r.trim()===""?o.hide():(o.setHtml(_.codeToHtml(r,{lang:"css",theme:"dark-plus"})),o.setPosition(t.domEvent.clientX+10,t.domEvent.clientY+10),o.show())}lc_html_editor.addEventListener("mousemove",E),lc_html_editor.container.addEventListener("mouseleave",function(){o.hide()}),D("Module loaded!",{module:"htmleditor"})})();
