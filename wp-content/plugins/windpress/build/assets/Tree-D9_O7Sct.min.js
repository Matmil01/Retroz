import{O as ye,S as M,b as O,j as le,k as $,nO as me,nj as v,nx as ae,re as w,ri as be,s as ue,tB as he,tC as z,tS as xe,tX as B,tg as A,tm as ke,tn as F,tr as oe,tu as Ie,v as _,x as H,y as Se}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import{c as Y,l as X}from"./vue.runtime.esm-bundler-B7l4RX9R.min.js";import{M as te,W as Ke,_ as Z,v as ce,y as ie}from"./Button-B6tnd5h6.min.js";import{_ as qe,r as Te}from"./core-CuG4XPOF.min.js";import{t as ne}from"./arrays-DDFP_r6g.min.js";import{G as Ae,O as ve,W as pe,_ as Ce,k as _e,y as Ve}from"./Tooltip-zde4fm_B.min.js";import{C as we,E as re,d as Be,f as $e,g as fe,h as ze,m as Le,p as Ee,u as Oe,x as Fe}from"./namespaced-B_NM0idY.min.js";function We(s,m){let e=ae(),f=(a,q)=>{if(m.multiple&&Array.isArray(s.value))if(m.selectionBehavior==="replace")s.value=[a],e.value=a;else{let I=s.value.findIndex(d=>q(d));I===-1?s.value=[...s.value,a]:s.value=s.value.filter((d,t)=>t!==I)}else m.selectionBehavior==="replace"?s.value={...a}:!Array.isArray(s.value)&&q(s.value)?s.value=void 0:s.value={...a};return s.value};function K(a,q,I,d){var g;if(!(e!=null&&e.value)||!m.multiple||!Array.isArray(s.value))return;let t=(g=I().filter(y=>y.ref.dataset.disabled!=="").find(y=>y.ref===q))==null?void 0:g.value;if(!t)return;let p=null;switch(a){case"prev":case"next":p=ne(d,e.value,t);break;case"first":p=ne(d,e.value,d==null?void 0:d[0]);break;case"last":p=ne(d,e.value,d==null?void 0:d[d.length-1]);break}s.value=p}return{firstValue:e,onSelectItem:f,handleMultipleReplace:K}}var ge=le({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){let m=s,e=Be(),f=Ce(),K=_(()=>m.tabStopId||f),a=_(()=>e.currentTabStopId.value===K.value),{getItems:q,CollectionItem:I}=fe();Ie(()=>{m.focusable&&e.onFocusableItemAdd()}),ke(()=>{m.focusable&&e.onFocusableItemRemove()});function d(t){if(t.key==="Tab"&&t.shiftKey){e.onItemShiftTab();return}if(t.target!==t.currentTarget)return;let p=Le(t,e.orientation.value,e.dir.value);if(p!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!m.allowShiftKey&&t.shiftKey)return;t.preventDefault();let g=[...q().map(y=>y.ref).filter(y=>y.dataset.disabled!=="")];if(p==="last")g.reverse();else if(p==="prev"||p==="next"){p==="prev"&&g.reverse();let y=g.indexOf(t.currentTarget);g=e.loop.value?ze(g,y+1):g.slice(y+1)}oe(()=>Ee(g))}}return(t,p)=>(A(),O(v(I),null,{default:B(()=>[$(v(ie),{tabindex:a.value?0:-1,"data-orientation":v(e).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:p[0]||(p[0]=g=>{t.focusable?v(e).onItemFocus(K.value):g.preventDefault()}),onFocus:p[1]||(p[1]=g=>v(e).onItemFocus(K.value)),onKeydown:d},{default:B(()=>[z(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}});function ee(s){return s.reduce((m,e)=>(m.push(e),e.children&&m.push(...ee(e.children)),m),[])}var[Me,Re]=Ae("TreeRoot"),je=le({__name:"TreeRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},items:{type:Array,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},getKey:{type:Function,required:!0},getChildren:{type:Function,required:!1,default:s=>s.children},selectionBehavior:{type:String,required:!1,default:"toggle"},multiple:{type:Boolean,required:!1,skipCheck:!0},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},propagateSelect:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ul"}},emits:["update:modelValue","update:expanded"],setup(s,{emit:m}){let e=s,f=m,{items:K,multiple:a,disabled:q,propagateSelect:I,dir:d,bubbleSelect:t}=me(e),{handleTypeaheadSearch:p}=Fe(),g=we(d),y=ae(),L=ae(!1),c=_e(),u=ve(e,"modelValue",f,{defaultValue:e.defaultValue??(a.value?[]:void 0),passive:!0,deep:!0}),x=ve(e,"expanded",f,{defaultValue:e.defaultExpanded??[],passive:e.expanded===void 0,deep:!0}),{onSelectItem:i,handleMultipleReplace:n}=We(u,e),l=_(()=>a.value&&Array.isArray(u.value)?u.value.map(r=>e.getKey(r)):[e.getKey(u.value??{})]);function T(r,o=1,b){return r.reduce((k,h,V)=>{let E=e.getKey(h),W=e.getChildren(h),Q=x.value.includes(E),U={_id:E,value:h,index:V,level:o,parentItem:b,hasChildren:!!W,bind:{value:h,level:o,"aria-setsize":r.length,"aria-posinset":V+1}};return k.push(U),W&&Q&&k.push(...T(W,o+1,h)),k},[])}let S=_(()=>{let r=e.items;return x.value.map(o=>o),T(r??[])});function C(r){var o;if(L.value)c.trigger(r);else{let b=((o=y.value)==null?void 0:o.getItems())??[];p(r.key,b)}}function J(r){if(L.value)return;let o=$e[r.key];oe(()=>{var b;n(o,re(),(b=y.value)==null?void 0:b.getItems,S.value.map(k=>k.value))})}function R(r){var o;if(r.parentItem!=null&&Array.isArray(u.value)&&e.multiple){let b=S.value.find(k=>r.parentItem!=null&&e.getKey(k.value)===e.getKey(r.parentItem));b!=null&&((o=e.getChildren(b.value))!=null&&o.every(k=>u.value.find(h=>e.getKey(h)===e.getKey(k)))?u.value=[...u.value,b.value]:u.value=u.value.filter(k=>e.getKey(k)!==e.getKey(b.value)),R(b))}}return Re({modelValue:u,selectedKeys:l,onSelect:r=>{var k;let o=h=>e.getKey(h??{})===e.getKey(r),b=e.multiple&&Array.isArray(u.value)?((k=u.value)==null?void 0:k.findIndex(o))!==-1:void 0;if(i(r,o),e.bubbleSelect&&e.multiple&&Array.isArray(u.value)){let h=S.value.find(V=>e.getKey(V.value)===e.getKey(r));h!=null&&R(h)}if(e.propagateSelect&&e.multiple&&Array.isArray(u.value)){let h=ee(e.getChildren(r)??[]);b?u.value=[...u.value].filter(V=>!h.some(E=>e.getKey(V??{})===e.getKey(E))):u.value=[...u.value,...h]}},expanded:x,onToggle(r){if(!(r&&e.getChildren(r)))return;let o=e.getKey(r)??r;x.value.includes(o)?x.value=x.value.filter(b=>b!==o):x.value.push(o)},getKey:e.getKey,getChildren:e.getChildren,items:K,expandedItems:S,disabled:q,multiple:a,dir:g,propagateSelect:I,bubbleSelect:t,isVirtual:L,virtualKeydownHook:c,handleMultipleReplace:n}),(r,o)=>(A(),O(v(Oe),{ref_key:"rovingFocusGroupRef",ref:y,"as-child":"",orientation:"vertical",dir:v(g)},{default:B(()=>[$(v(ie),{role:"tree",as:r.as,"as-child":r.asChild,"aria-multiselectable":v(a)?!0:void 0,onKeydown:[C,Y(X(J,["shift"]),["up","down"])]},{default:B(()=>[z(r.$slots,"default",{flattenItems:S.value,modelValue:v(u),expanded:v(x)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),Ne="tree.select",De="tree.toggle",Pe=le({inheritAttrs:!1,__name:"TreeItem",props:{value:{type:null,required:!0},level:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["select","toggle"],setup(s,{expose:m,emit:e}){let f=s,K=e,a=Me(),{getItems:q}=fe(),I=_(()=>!!a.getChildren(f.value)),d=_(()=>{let i=a.getKey(f.value);return a.expanded.value.includes(i)}),t=_(()=>{let i=a.getKey(f.value);return a.selectedKeys.value.includes(i)}),p=_(()=>{if(a.bubbleSelect.value&&I.value&&Array.isArray(a.modelValue.value)){let i=ee(a.getChildren(f.value)||[]);return i.some(n=>a.modelValue.value.find(l=>a.getKey(l)===a.getKey(n)))&&!i.every(n=>a.modelValue.value.find(l=>a.getKey(l)===a.getKey(n)))}else return a.propagateSelect.value&&t.value&&I.value&&Array.isArray(a.modelValue.value)?!ee(a.getChildren(f.value)||[]).every(i=>a.modelValue.value.find(n=>a.getKey(n)===a.getKey(i))):void 0});function g(i){if(I.value)if(d.value){let n=q().map(C=>C.ref),l=re(),T=n.indexOf(l),S=[...n].slice(T).find(C=>Number(C.getAttribute("data-indent"))===f.level+1);S&&S.focus()}else x(i)}function y(i){if(d.value)x(i);else{let n=q().map(C=>C.ref),l=re(),T=n.indexOf(l),S=[...n].slice(0,T).reverse().find(C=>Number(C.getAttribute("data-indent"))===f.level-1);S&&S.focus()}}async function L(i){K("select",i),!(i!=null&&i.defaultPrevented)&&a.onSelect(f.value)}async function c(i){K("toggle",i),!(i!=null&&i.defaultPrevented)&&a.onToggle(f.value)}async function u(i){if(!i)return;let n={originalEvent:i,value:f.value,isExpanded:d.value,isSelected:t.value};pe(Ne,L,n)}async function x(i){if(!i)return;let n={originalEvent:i,value:f.value,isExpanded:d.value,isSelected:t.value};pe(De,c,n)}return m({isExpanded:d,isSelected:t,isIndeterminate:p,handleToggle:()=>a.onToggle(f.value),handleSelect:()=>a.onSelect(f.value)}),(i,n)=>(A(),O(v(ge),{"as-child":"",value:i.value,"allow-shift-key":""},{default:B(()=>[$(v(ie),F(i.$attrs,{role:"treeitem",as:i.as,"as-child":i.asChild,"aria-selected":t.value,"aria-expanded":I.value?d.value:void 0,"aria-level":i.level,"data-indent":i.level,"data-selected":t.value?"":void 0,"data-expanded":d.value?"":void 0,onKeydown:[Y(X(u,["self","prevent"]),["enter","space"]),n[0]||(n[0]=Y(X(l=>v(a).dir.value==="ltr"?g(l):y(l),["prevent"]),["right"])),n[1]||(n[1]=Y(X(l=>v(a).dir.value==="ltr"?y(l):g(l),["prevent"]),["left"]))],onClick:n[2]||(n[2]=X(l=>{u(l),x(l)},["stop"]))}),{default:B(()=>[z(i.$slots,"default",{isExpanded:d.value,isSelected:t.value,isIndeterminate:p.value,handleSelect:()=>v(a).onSelect(i.value),handleToggle:()=>v(a).onToggle(i.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}}),Ge={slots:{root:"relative isolate",item:"",listWithChildren:"ms-4.5 border-s border-default",itemWithChildren:"ps-1.5 -ms-px",link:"relative group w-full flex items-center text-sm before:absolute before:inset-y-px before:inset-x-0 before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"shrink-0",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"shrink-0 transform transition-transform duration-200 group-data-expanded:rotate-180"},variants:{color:{primary:{link:"focus-visible:before:ring-primary"},secondary:{link:"focus-visible:before:ring-secondary"},success:{link:"focus-visible:before:ring-success"},info:{link:"focus-visible:before:ring-info"},warning:{link:"focus-visible:before:ring-warning"},error:{link:"focus-visible:before:ring-error"},neutral:{link:"focus-visible:before:ring-inverted"}},size:{xs:{link:"px-2 py-1 text-xs gap-1",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},sm:{link:"px-2.5 py-1.5 text-xs gap-1.5",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},md:{link:"px-2.5 py-1.5 text-sm gap-1.5",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},lg:{link:"px-3 py-2 text-sm gap-2",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},xl:{link:"px-3 py-2 text-base gap-2",linkLeadingIcon:"size-6",linkTrailingIcon:"size-6"}},selected:{true:{link:"before:bg-elevated"},false:{link:["hover:not-disabled:text-highlighted hover:not-disabled:before:bg-elevated/50","transition-colors before:transition-colors"]}},disabled:{true:{link:"cursor-not-allowed opacity-75"}}},compoundVariants:[{color:"primary",selected:!0,class:{link:"text-primary"}},{color:"secondary",selected:!0,class:{link:"text-secondary"}},{color:"success",selected:!0,class:{link:"text-success"}},{color:"info",selected:!0,class:{link:"text-info"}},{color:"warning",selected:!0,class:{link:"text-warning"}},{color:"error",selected:!0,class:{link:"text-error"}},{color:"neutral",selected:!0,class:{link:"text-highlighted"}}],defaultVariants:{color:"primary",size:"md"}},He=["disabled"],Xe=Object.assign({inheritAttrs:!1},{__name:"Tree",props:{as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},valueKey:{type:null,required:!1,default:"value"},labelKey:{type:null,required:!1,default:"label"},trailingIcon:{type:[String,Object],required:!1},expandedIcon:{type:[String,Object],required:!1},collapsedIcon:{type:[String,Object],required:!1},items:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},selectionBehavior:{type:String,required:!1},propagateSelect:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1}},emits:["update:expanded","update:modelValue"],setup(s,{emit:m}){let e=s,f=m,K=he(),a=Ke(),q=Ve(qe(e,"as","modelValue","defaultValue","items","multiple","expanded","disabled","propagateSelect","bubbleSelect"),f),[I,d]=Te(),t=_(()=>{var c;return ce({extend:ce(Ge),...((c=a.ui)==null?void 0:c.tree)||{}})({color:e.color,size:e.size})});function p(c){return te(c,e.labelKey)}function g(c){return te(c,e.valueKey)??te(c,e.labelKey)}function y(c){var i;let u=c.defaultExpanded?g(c):null,x=((i=c.children)==null?void 0:i.flatMap(n=>y(n)))??[];return[u,...x].filter(Boolean)}let L=_(()=>{var c;return e.defaultExpanded??((c=e.items)==null?void 0:c.flatMap(u=>y(u)))});return(c,u)=>{var x;return A(),M(ue,null,[$(v(I),null,{default:B(({items:i,level:n})=>[(A(!0),M(ue,null,xe(i,(l,T)=>{var S,C,J,R;return A(),M("li",{key:`${n}-${T}`,class:w(n>0?t.value.itemWithChildren({class:[(S=e.ui)==null?void 0:S.itemWithChildren,(C=l.ui)==null?void 0:C.itemWithChildren]}):t.value.item({class:[(J=e.ui)==null?void 0:J.item,(R=l.ui)==null?void 0:R.item]}))},[$(v(Pe),{"as-child":"",level:n,value:l,onToggle:l.onToggle,onSelect:l.onSelect},{default:B(({isExpanded:r,isSelected:o})=>{var b,k,h;return[z(c.$slots,l.slot?`${l.slot}-wrapper`:"item-wrapper",F({ref_for:!0},{item:l,index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var V,E;return[Se("button",{type:"button",disabled:l.disabled||s.disabled,class:w(t.value.link({class:[(V=e.ui)==null?void 0:V.link,(E=l.ui)==null?void 0:E.link,l.class],selected:o,disabled:l.disabled||s.disabled}))},[z(c.$slots,l.slot||"item",F({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var W,Q,U,se,de;return[z(c.$slots,l.slot?`${l.slot}-leading`:"item-leading",F({ref_for:!0},{index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var j,N,D,P,G;return[l.icon?(A(),O(Z,{key:0,name:l.icon,class:w(t.value.linkLeadingIcon({class:[(j=e.ui)==null?void 0:j.linkLeadingIcon,(N=l.ui)==null?void 0:N.linkLeadingIcon]}))},null,8,["name","class"])):(D=l.children)!=null&&D.length?(A(),O(Z,{key:1,name:r?s.expandedIcon??v(a).ui.icons.folderOpen:s.collapsedIcon??v(a).ui.icons.folder,class:w(t.value.linkLeadingIcon({class:[(P=e.ui)==null?void 0:P.linkLeadingIcon,(G=l.ui)==null?void 0:G.linkLeadingIcon]}))},null,8,["name","class"])):H("",!0)]}),p(l)||K[l.slot?`${l.slot}-label`:"item-label"]?(A(),M("span",{key:0,class:w(t.value.linkLabel({class:[(W=e.ui)==null?void 0:W.linkLabel,(Q=l.ui)==null?void 0:Q.linkLabel]}))},[z(c.$slots,l.slot?`${l.slot}-label`:"item-label",F({ref_for:!0},{item:l,index:T,level:n,expanded:r,selected:o},{item:l}),()=>[ye(be(p(l)),1)])],2)):H("",!0),l.trailingIcon||(U=l.children)!=null&&U.length||K[l.slot?`${l.slot}-trailing`:"item-trailing"]?(A(),M("span",{key:1,class:w(t.value.linkTrailing({class:[(se=e.ui)==null?void 0:se.linkTrailing,(de=l.ui)==null?void 0:de.linkTrailing]}))},[z(c.$slots,l.slot?`${l.slot}-trailing`:"item-trailing",F({ref_for:!0},{item:l,index:T,level:n,expanded:r,selected:o},{item:l}),()=>{var j,N,D,P,G;return[l.trailingIcon?(A(),O(Z,{key:0,name:l.trailingIcon,class:w(t.value.linkTrailingIcon({class:[(j=e.ui)==null?void 0:j.linkTrailingIcon,(N=l.ui)==null?void 0:N.linkTrailingIcon]}))},null,8,["name","class"])):(D=l.children)!=null&&D.length?(A(),O(Z,{key:1,name:s.trailingIcon??v(a).ui.icons.chevronDown,class:w(t.value.linkTrailingIcon({class:[(P=e.ui)==null?void 0:P.linkTrailingIcon,(G=l.ui)==null?void 0:G.linkTrailingIcon]}))},null,8,["name","class"])):H("",!0)]})],2)):H("",!0)]})],10,He)]}),(b=l.children)!=null&&b.length&&r?(A(),M("ul",{key:0,class:w(t.value.listWithChildren({class:[(k=e.ui)==null?void 0:k.listWithChildren,(h=l.ui)==null?void 0:h.listWithChildren]}))},[$(v(d),{items:l.children,level:n+1},null,8,["items","level"])],2)):H("",!0)]}),_:2},1032,["level","value","onToggle","onSelect"])],2)}),128))]),_:3}),$(v(je),F({...v(q),...c.$attrs},{class:t.value.root({class:[(x=e.ui)==null?void 0:x.root,e.class]}),"get-key":g,"default-expanded":L.value,"selection-behavior":s.selectionBehavior}),{default:B(()=>[$(v(d),{items:s.items,level:0},null,8,["items"])]),_:1},16,["class","default-expanded","selection-behavior"])],64)}}});export{ge as n,Xe as t};
