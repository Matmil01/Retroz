import{nx as tt,v as B}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import{i as V,n as et}from"./log-BwehX2sj.js";import{t as rt}from"./api-j1hi8yn9.js";import{a as W,i as R,o as p,r as T,t as at}from"./isObject-BwTgHO42.min.js";import{c as v,i as A,s as y,u as C}from"./_toKey-BLmsLsy5.min.js";import{_ as nt,a as ot,c as O,f as m,g as ct,l as st,m as ut,n as it,o as bt,p as N,r as _,s as ft,t as jt,u as lt,v as d,y as vt}from"./_initCloneObject-Cm0YirQr.min.js";import{n as pt}from"./set-Cqd4I9bq.min.js";import{t as yt}from"./virtualRef-CYpkks3b.js";const q=V("busy",()=>{let t=et(),e=tt([]),r=B(()=>e.value.length>0),n=B(()=>c=>e.value.some(s=>s.task===c));function i(c,s){e.value.unshift({timestamp:Date.now(),task:c}),s!=null&&(typeof s=="string"?t.add({message:s,type:"info",group:"busy"}):typeof s=="object"&&t.add(Object.assign({type:"info",group:"busy"},s)))}function u(c){let s=!1;e.value=e.value.filter(h=>s?!0:h.task===c?(s=!0,!1):!0)}function o(){e.value=[]}return{tasks:e,isBusy:r,hasTask:n,add:i,remove:u,reset:o}});var P=y(p,"WeakMap");function mt(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var dt=mt,gt=st(Object.keys,Object),wt=Object.prototype.hasOwnProperty;function ht(t){if(!ct(t))return gt(t);var e=[];for(var r in Object(t))wt.call(t,r)&&r!="constructor"&&e.push(r);return e}var At=ht;function Ot(t){return nt(t)?lt(t):At(t)}var S=Ot;function Pt(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var G=Pt;function St(t,e){return t&&d(e,S(e),t)}var kt=St;function xt(t,e){return t&&d(e,O(e),t)}var Mt=xt;function It(t,e){for(var r=-1,n=t==null?0:t.length,i=0,u=[];++r<n;){var o=t[r];e(o,r,t)&&(u[i++]=o)}return u}var Dt=It;function Et(){return[]}var L=Et,Ut=Object.prototype.propertyIsEnumerable,z=Object.getOwnPropertySymbols,k=z?function(t){return t==null?[]:(t=Object(t),Dt(z(t),function(e){return Ut.call(t,e)}))}:L;function Ft(t,e){return d(t,k(t),e)}var Bt=Ft,H=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)G(e,k(t)),t=ft(t);return e}:L;function Vt(t,e){return d(t,H(t),e)}var Wt=Vt;function Rt(t,e,r){var n=e(t);return C(t)?n:G(n,r(t))}var $=Rt;function Tt(t){return $(t,S,k)}var J=Tt;function Ct(t){return $(t,O,H)}var Nt=Ct,x=y(p,"DataView"),M=y(p,"Promise"),I=y(p,"Set"),_t="[object Map]",qt="[object Promise]",Gt="[object Set]",Lt="[object WeakMap]",zt="[object DataView]",Ht=v(x),$t=v(A),Jt=v(M),Kt=v(I),Qt=v(P),j=R;(x&&j(new x(new ArrayBuffer(1)))!="[object DataView]"||A&&j(new A)!="[object Map]"||M&&j(M.resolve())!="[object Promise]"||I&&j(new I)!="[object Set]"||P&&j(new P)!="[object WeakMap]")&&(j=function(t){var e=R(t),r=e=="[object Object]"?t.constructor:void 0,n=r?v(r):"";if(n)switch(n){case Ht:return zt;case $t:return _t;case Jt:return qt;case Kt:return Gt;case Qt:return Lt}return e});var g=j,Xt=Object.prototype.hasOwnProperty;function Yt(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Xt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Zt=Yt;function te(t,e){var r=e?_(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var ee=te,re=/\w*$/;function ae(t){var e=new t.constructor(t.source,re.exec(t));return e.lastIndex=t.lastIndex,e}var ne=ae,K=W?W.prototype:void 0,Q=K?K.valueOf:void 0;function oe(t){return Q?Object(Q.call(t)):{}}var ce=oe,se="[object Boolean]",ue="[object Date]",ie="[object Map]",be="[object Number]",fe="[object RegExp]",je="[object Set]",le="[object String]",ve="[object Symbol]",pe="[object ArrayBuffer]",ye="[object DataView]",me="[object Float32Array]",de="[object Float64Array]",ge="[object Int8Array]",we="[object Int16Array]",he="[object Int32Array]",Ae="[object Uint8Array]",Oe="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Se="[object Uint32Array]";function ke(t,e,r){var n=t.constructor;switch(e){case pe:return _(t);case se:case ue:return new n(+t);case ye:return ee(t,r);case me:case de:case ge:case we:case he:case Ae:case Oe:case Pe:case Se:return it(t,r);case ie:return new n;case be:case le:return new n(t);case fe:return ne(t);case je:return new n;case ve:return ce(t)}}var xe=ke;function Me(t){return T(t)&&g(t)=="[object Map]"}var Ie=Me,X=m&&m.isMap,De=X?N(X):Ie;function Ee(t){return T(t)&&g(t)=="[object Set]"}var Ue=Ee,Y=m&&m.isSet,Fe=Y?N(Y):Ue,Be="[object Arguments]",Ve="[object Array]",We="[object Boolean]",Re="[object Date]",Te="[object Error]",Ce="[object Function]",Ne="[object Map]",_e="[object Number]",qe="[object Object]",Ge="[object RegExp]",Le="[object Set]",ze="[object String]",He="[object Symbol]",$e="[object WeakMap]",Je="[object ArrayBuffer]",Ke="[object DataView]",Qe="[object Float32Array]",Xe="[object Float64Array]",Ye="[object Int8Array]",Ze="[object Int16Array]",tr="[object Int32Array]",er="[object Uint8Array]",rr="[object Uint8ClampedArray]",ar="[object Uint16Array]",nr="[object Uint32Array]",a={};a[Be]=a[Ve]=a[Je]=a[Ke]=a[We]=a[Re]=a[Qe]=a[Xe]=a[Ye]=a[Ze]=a[tr]=a[Ne]=a[_e]=a[qe]=a[Ge]=a[Le]=a[ze]=a[He]=a[er]=a[rr]=a[ar]=a[nr]=!0,a[Te]=a[Ce]=a[$e]=!1;function w(t,e,r,n,i,u){var o,c=e&1,s=e&2,h=e&4;if(r&&(o=i?r(t,n,i,u):r(t)),o!==void 0)return o;if(!at(t))return t;var D=C(t);if(D){if(o=Zt(t),!c)return vt(t,o)}else{var l=g(t),E=l=="[object Function]"||l=="[object GeneratorFunction]";if(ut(t))return ot(t,c);if(l=="[object Object]"||l=="[object Arguments]"||E&&!i){if(o=s||E?{}:jt(t),!c)return s?Wt(t,Mt(o,t)):Bt(t,kt(o,t))}else{if(!a[l])return i?t:{};o=xe(t,l,c)}}u||(u=new bt);var U=u.get(t);if(U)return U;u.set(t,o),Fe(t)?t.forEach(function(b){o.add(w(b,e,r,b,t,u))}):De(t)&&t.forEach(function(b,f){o.set(f,w(b,e,r,f,t,u))});var F=D?void 0:(h?s?Nt:J:s?O:S)(t);return dt(F||t,function(b,f){F&&(f=b,b=t[f]),pt(o,f,w(b,e,r,f,t,u))}),o}var or=w;function cr(t){return or(t,5)}var Z=cr;const sr=V("settings",()=>{let t=q(),e=rt(),{state:r,getVirtualRef:n}=yt({});async function i(){return t.add("settings.doPull"),await e.request("/admin/settings/options/index",{method:"GET"}).then(c=>(r.value=Z(c.data.options),{message:c.data.message,success:!0})).catch(c=>{}).finally(()=>{t.remove("settings.doPull")})}async function u(){return t.add("settings.doPush"),e.request("/admin/settings/options/store",{method:"POST",data:{options:r.value}}).then(c=>({message:c.data.message,success:!0})).catch(c=>{throw Error(c.response?c.response.data.message:c.message)}).finally(()=>{t.remove("settings.doPush")})}function o(){Object.keys(r.value).length===0&&i()}return{options:r,virtualOptions:n,doPull:i,doPush:u,initPull:o}});export{q as a,J as i,Z as n,g as r,sr as t};
