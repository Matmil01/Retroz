import"./source-map-generator-CTyyJ0I2.min.js";import"./dist-C_ABUlOQ.min.js";import{O as Te,S as d,X as S,b as Ae,k as g,nj as I,nx as _,re as qe,ri as X,rr as O,s as j,tC as ee,tG as Y,tQ as T,tS as F,tT as G,tX as L,tg as p,tu as K,tw as We,u as ze,x as V,y as b}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import{n as Me,r as Oe,s as je}from"./vue.runtime.esm-bundler-B7l4RX9R.min.js";import"./dist-BRFYlgNW.min.js";import"./log-BwehX2sj.js";import"./chunk-HTB5LLOP-BErhSb2z.min.js";import{f as Fe}from"./core-CuG4XPOF.min.js";import"./floating-ui.core-BwRAMOlv.min.js";import"./api-j1hi8yn9.js";import"./index.browser-L__kdN7m.min.js";import"./isObject-BwTgHO42.min.js";import"./_toKey-BLmsLsy5.min.js";import{t as Ve}from"./set-Cqd4I9bq.min.js";import"./preload-helper-hRiy8xQv.min.js";import"./base64-DC2Lnao2.min.js";import"./lib-Bhom85nO.min.js";import"./dist-Bc3DqNCA.min.js";import"./path-browserify-BdtUGfkV.min.js";import"./pre-process-RWgsscQ9.js";import{__tla as De}from"./cssesc-Brw5KDvH.js";import{__tla as Ue}from"./lightningcss-wasm-6j4Pv-Sn.min.js";import"./build-B3SDJAft.js";import{t as Re}from"./vfs-Cd6bW2_1.js";import{c as Be,i as He}from"./intellisense-BXfxfrXI.js";import"./adobe-css-tools-Cq8Zs2rG.min.js";import"./dlv.umd-9now9_xM.min.js";import{__tla as Xe}from"./tailwindcss-DJIKWk4_.js";import{t as te}from"./logger-B3j_KY2M.js";import{t as A}from"./_plugin-vue_export-helper-89dl49sx.min.js";import{n as Ye,t as q}from"./constant-C69KzVRS.js";import{a as Ge,i as Ke,n as Ne,r as Qe,t as Je}from"./chevron-right-DnvxkMx1.min.js";Promise.all([(()=>{try{return De}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return Xe}catch{}})()]).then(async()=>{var ae={id:"windpressbreakdance-variable-app-header",class:"header-container cursor:grab bb:1|solid|$(gray200)"},le={class:"header-content flex gap:10 align-items:center fg:var(dark)"},ie={class:"header-logo flex align-items:center px:12 py:2"},re={class:"header-title text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},ne=A({__name:"PanelHeader",setup(r){let i=S("variableApp"),t=S("isOpen");function l(){let a=i.querySelector("#windpressbreakdance-variable-app-header"),s=_(!1),n=0,u=0;Y(s,h=>{h?(document.body.style.userSelect="none",q.querySelector("div.v-application--wrap").style.pointerEvents="none",a.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),q.querySelector("div.v-application--wrap").style.removeProperty("pointer-events"),a.style.cursor="grab")});let c=h=>{s.value=!0;let k=a.getBoundingClientRect();n=h.clientX-k.left,u=h.clientY-k.top};a.removeEventListener("mousedown",c),a.addEventListener("mousedown",c);let E=h=>{if(!s.value)return;let k=a.getBoundingClientRect(),m=h.clientX,o=h.clientY,y=m-n,w=o-u,P=y<0?0:y>window.innerWidth-k.width?window.innerWidth-k.width:y,$=w<0?0:w>window.innerHeight-k.height?window.innerHeight-k.height:w;i.style.left=`${P}px`,i.style.top=`${$}px`};document.removeEventListener("mousemove",E),document.addEventListener("mousemove",E);let C=h=>{s.value=!1};document.removeEventListener("mouseup",C),document.addEventListener("mouseup",C)}return K(()=>{l()}),(a,s)=>{let n=We("inline-svg"),u=Qe,c=G("tooltip");return p(),d("div",ae,[b("div",le,[b("div",ie,[g(n,{src:I(Ne),class:"inline-svg fill:current font:24"},null,8,["src"])]),T((p(),d("div",re,[...s[1]||(s[1]=[Te(" WindPress ",-1)])])),[[c,{placement:"top",content:`v${a.windpressbreakdance._version}`}]]),T((p(),d("button",{class:"header-exit flex align-items:center py:10 px:12 fg:$(blue600):hover bg:$(blue50):hover",onClick:s[0]||(s[0]=E=>t.value=!I(t))},[g(u,{class:"iconify font:16"})])),[[c,{placement:"top",content:"Close"}]])])])}}},[["__scopeId","data-v-7377c328"]]),se={class:"header-slot flex-grow:1"},oe={key:0,class:"expansion-panel__body"},ce={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(r,{expose:i}){let t=r,l=_(null),a=Fe(`windpressbreakdance-variable-app.ui.expansion-panels.${t.namespace}`,{[`${t.name}`]:!1},void 0,{mergeDefaults:!0});function s(u){a.value[t.name]=u===null?!a.value[t.name]:u}function n(){l.value.scrollIntoView()}return i({togglePanel:s,scrollIntoView:n}),(u,c)=>{let E=Je;return p(),d("div",{ref_key:"sectionRef",ref:l,class:"expansion-panel mx:10 py:8 mr:4"},[b("div",{class:qe([{},"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer"]),onClick:c[0]||(c[0]=C=>I(a)[r.name]=!I(a)[r.name])},[b("div",se,[ee(u.$slots,"header",{},void 0,!0)]),b("div",null,[g(E,{style:O({transform:I(a)[r.name]?"rotate(-90deg)":"rotate(0deg)"}),class:"iconify ~duration:300 font:18"},null,8,["style"])])]),g(Me,null,{default:L(()=>[I(a)[r.name]?(p(),d("div",oe,[ee(u.$slots,"default",{},void 0,!0)])):V("",!0)]),_:3})],512)}}},D=A(ce,[["__scopeId","data-v-29d1aafa"]]),pe={class:"{m:10;pb:15}>div"},ue={class:"variable-section-title font:14 my:10"},de={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},ve=["onClick","onMouseenter"],me={class:"font:14"},be={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(r){return(i,t)=>{let l=G("tooltip");return p(),d("div",pe,[(p(!0),d(j,null,F(r.variableItems,(a,s)=>(p(),d("div",{key:s,class:"var-item"},[b("div",ue,X(s.replace("_","-")),1),b("div",de,[a.length>0?(p(!0),d(j,{key:0},F(a,(n,u)=>T((p(),d("button",{key:u,class:"px:12 py:8 r:8 font:medium fg:$(dark) fg:$(accent-normal):hover bg:$(gray150) bg:$(gray300):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span",onClick:c=>i.$emit("previewChose",c,n.key),onMouseenter:c=>i.$emit("previewEnter",c,n.key),onMouseleave:t[0]||(t[0]=c=>i.$emit("previewLeave"))},[b("span",me,X(n.label),1)],40,ve)),[[l,{placement:"top",content:`var(${n.key}, ${n.value})`}]])),128)):V("",!0)])]))),128))])}}},N=A(be,[["__scopeId","data-v-4955c1d9"]]),ye={class:"{m:10;pb:15}>div"},fe={class:"variable-section-title font:14 my:10"},he={key:0,class:"variable-section-items default-color"},ge=["onClick","onMouseenter"],ke=["onClick","onMouseenter"],we={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(r){return(i,t)=>{let l=G("tooltip");return p(),d("div",ye,[(p(!0),d(j,null,F(r.variableItems,(a,s)=>(p(),d("div",{key:s,class:""},[b("div",fe,X(s),1),a.DEFAULT?(p(),d("div",he,[T(b("button",{style:O(`--wp-b-v-item-bg: var(--${a.DEFAULT.key.slice(2)});`),class:"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer",onClick:n=>i.$emit("previewChose",n,a.DEFAULT.key),onMouseenter:n=>i.$emit("previewEnter",n,a.DEFAULT.key),onMouseleave:t[0]||(t[0]=n=>i.$emit("previewLeave"))},null,44,ge),[[l,{placement:"top",content:`var(${a.DEFAULT.key}, ${a.DEFAULT.value})`}]])])):V("",!0),a.shades&&Object.keys(a.shades).length>0?(p(),d("div",{key:1,style:O(`--wp-b-v-items-grid: ${Object.keys(a.shades).length}`),class:"variable-section-items shades-colors grid r:4 overflow:hidden"},[(p(!0),d(j,null,F(a.shades,(n,u)=>(p(),d("div",{key:u,class:"flex gap:10"},[T(b("button",{style:O(`--wp-b-v-item-bg: var(--${n.key.slice(2)})`),class:"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer",onClick:c=>i.$emit("previewChose",c,n.key),onMouseenter:c=>i.$emit("previewEnter",c,n.key),onMouseleave:t[1]||(t[1]=c=>i.$emit("previewLeave"))},null,44,ke),[[l,{placement:"top",content:`var(${n.key}, ${n.value})`}]])]))),128))],4)):V("",!0)]))),128))])}}},_e=A(we,[["__scopeId","data-v-b5786bb3"]]),Ee={id:"windpressbreakdance-variable-app-body",class:"var-body rel w:full h:full overflow-y:scroll! bb:1|solid|$(gray200)>div:not(:last-child)"},$e=A({__name:"PanelBody",setup(r){let i=_({colors:{},typography:{},sizing:{}}),t=S("focusedInput"),l=S("recentVariableSelectionTimestamp"),a=S("tempInputValue"),s=S("variableApp");async function n(){let m=Ye.contentWindow.document.querySelector('script#windpress\\:vfs[type="text/plain"]'),o=Re(m.textContent),y=await He(await Be({volume:o})),w=s.querySelector("style#windpressbreakdance-variable-app-body-style");w||(w=document.createElement("style"),w.id="windpressbreakdance-variable-app-body-style",s.appendChild(w)),w.innerHTML=`
        #windpressbreakdance-variable-app-body {
            ${y.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;let P={};y.filter(e=>e.key.startsWith("--color")).forEach(e=>{let v=e.key.slice(8),B=v.split("-"),H="";if(B.length>1){let Se=B[0],Ie=B.slice(1).join("-");H=`${Se}.shades.'${Ie}'`}else H=`${v}.DEFAULT`;Ve(P,H,e)}),i.value.colors=Object.keys(P).sort().reduce((e,v)=>(e[v]=P[v],e),{});let $={font_size:[],line_height:[],letter_spacing:[]};y.filter(e=>e.key.startsWith("--text-")&&!e.key.endsWith("--line-height")).forEach(e=>{let v=e.key.slice(7);$.font_size.push({key:e.key,label:v,value:e.value})}),y.filter(e=>e.key.startsWith("--leading-")||e.key.endsWith("--leading")).forEach(e=>{let v=e.key.startsWith("--leading-")?e.key.slice(10):e.key.slice(2,-9);$.line_height.push({key:e.key,label:v,value:e.value})}),$.line_height.sort((e,v)=>e.label.startsWith("font-size-")&&!v.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&v.label.startsWith("font-size-")?-1:0),y.filter(e=>e.key.startsWith("--tracking-")).forEach(e=>{let v=e.key.slice(11);$.letter_spacing.push({key:e.key,label:v,value:e.value})}),i.value.typography=$;let f={container:[],breakpoint:[]};y.filter(e=>e.key.startsWith("--container-")).forEach(e=>{let v=e.key.slice(12);f.container.push({key:e.key,label:v,value:e.value})}),y.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{let v=e.key.slice(13);f.breakpoint.push({key:e.key,label:v,value:e.value})}),i.value.sizing=f}let u=_(null),c=_(null),E=_(null);Y(t,m=>{if(m){let o=m.closest("[data-test-id]"),y=["color"].some(f=>o.getAttribute("data-test-id").includes(f)),w=["fontSize"].some(f=>o.getAttribute("data-test-id").includes(f)),P=["spacing","size-width"].some(f=>o.getAttribute("data-test-id").includes(f));c.value.togglePanel(!1),E.value.togglePanel(!1),u.value.togglePanel(!1);async function $(){for(;m.parentElement.parentElement.parentElement.querySelector("div.dropdown>button.breakdance-unit-input-unit")===null;)await new Promise(f=>setTimeout(f,10));for(m.parentElement.parentElement.parentElement.querySelector("div.dropdown>button.breakdance-unit-input-unit").click();document.querySelector(".v-menu__content.menuable__content__active .dropdown-content .v-list .v-list-item:last-child .v-list-item__title")===null;)await new Promise(f=>setTimeout(f,10));document.querySelector(".v-menu__content.menuable__content__active .dropdown-content .v-list .v-list-item:last-child .v-list-item__title").click(),setTimeout(()=>{m.focus()},100)}y?(u.value.togglePanel(!0),u.value.scrollIntoView()):w?(c.value.togglePanel(!0),c.value.scrollIntoView(),$()):P&&(E.value.togglePanel(!0),E.value.scrollIntoView(),$())}});function C(m,o){performance.now()-l.value<1e3||t.value&&(t.value.value=`var(${o})`,t.value.dispatchEvent(new Event("input")),t.value.focus())}function h(m){!t.value||a.value===null||(t.value.value=a.value,t.value.dispatchEvent(new Event("input")),t.value.focus())}function k(m,o){t.value&&(t.value.value=`var(${o})`,t.value.dispatchEvent(new Event("input")),t.value.focus(),a.value=`var(${o})`,l.value=performance.now())}return K(()=>{n()}),new BroadcastChannel("windpress").addEventListener("message",async m=>{let o=m.data;o.source==="windpress/intellisense"&&o.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{n()},1e3)}),(m,o)=>(p(),d("div",Ee,[g(D,{ref_key:"sectionColor",ref:u,namespace:"variable",name:"color"},{header:L(()=>[...o[0]||(o[0]=[b("span",{class:"var-body-title"},"Color",-1)])]),default:L(()=>[g(_e,{"variable-items":i.value.colors,onPreviewEnter:C,onPreviewLeave:h,onPreviewChose:k},null,8,["variable-items"])]),_:1},512),g(D,{ref_key:"sectionTypography",ref:c,namespace:"variable",name:"typography"},{header:L(()=>[...o[1]||(o[1]=[b("span",{class:"var-body-title"},"Typography",-1)])]),default:L(()=>[g(N,{"variable-items":i.value.typography,onPreviewEnter:C,onPreviewLeave:h,onPreviewChose:k},null,8,["variable-items"])]),_:1},512),g(D,{ref_key:"sectionSpacing",ref:E,namespace:"variable",name:"spacing",class:""},{header:L(()=>[...o[2]||(o[2]=[b("span",{class:"var-body-title"},"Sizing",-1)])]),default:L(()=>[g(N,{"variable-items":i.value.sizing,onPreviewEnter:C,onPreviewLeave:h,onPreviewChose:k},null,8,["variable-items"])]),_:1},512)]))}},[["__scopeId","data-v-1ee43b95"]]),xe=A({__name:"App",setup(r){let i=S("isOpen"),t=_(null);function l(){q.classList.contains("theme--light")?(t.value.classList.add("theme--light"),t.value.classList.remove("theme--dark")):q.classList.contains("theme--dark")&&(t.value.classList.add("theme--dark"),t.value.classList.remove("theme--light"))}return new MutationObserver(a=>{a.forEach(s=>{s.attributeName==="class"&&l()})}).observe(q,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),K(()=>{l()}),(a,s)=>T((p(),d("div",{id:"windpressbreakdance-variable-app-container",ref_key:"containerRef",ref:t,class:"v-application flex flex:column w:full h:full"},[g(ne),(p(),Ae(ze,null,{default:L(()=>[g($e)]),_:1}))],512)),[[je,I(i)]])}},[["__scopeId","data-v-a1c4c142"]]);function Le({selector:r,callback:i,options:t}){let l=new MutationObserver(i),a=document.querySelector(r);if(!a){te(`Target not found for selector: ${r}`,{module:"variable-picker",type:"error"});return}l.observe(a,Object.assign(Object.assign({},{childList:!0,subtree:!0}),t))}var z=document.createElement("windpressbreakdance-variable-app");z.id="windpressbreakdance-variable-app",q.appendChild(z);var W=_(!1),M=_(null),U=_(null),Ce=_(0),x=Oe(xe);x.config.globalProperties.windpressbreakdance=window.windpressbreakdance,x.provide("variableApp",z),x.provide("isOpen",W),x.provide("focusedInput",M),x.provide("tempInputValue",U),x.provide("recentVariableSelectionTimestamp",Ce),x.use(Ke,{container:"#windpressbreakdance-variable-app"}),x.component("InlineSvg",Ge),x.mount("#windpressbreakdance-variable-app");function Q(r){var i;!r.shiftKey||!r.target||((i=document==null?void 0:document.getSelection())==null||i.removeAllRanges(),r.preventDefault(),r.stopPropagation(),M.value=r.target,U.value=r.target.value,W.value=!0)}function J(r){M.value=r.target}var Pe={includedFields:["div.breakdance-control-wrapper-input-wrapper div.breakdance-text-input-wrapper"],excludedFields:[]};function Z(){setTimeout(()=>{let r=!1;Pe.includedFields.forEach(i=>{(typeof i=="string"?[...document.querySelectorAll(i)]:[...document.querySelectorAll(i.selector)].filter(t=>i.hasChild.some(l=>t.querySelector(l)))).forEach(t=>{let l=t.querySelector("input[type='text']");(l==null?void 0:l.getAttribute("windpressbreakdance-variable-app"))!=="listened"&&(l==null||l.removeEventListener("click",Q),l==null||l.addEventListener("click",Q),l==null||l.removeEventListener("focus",J),l==null||l.addEventListener("focus",J),l==null||l.setAttribute("windpressbreakdance-variable-app","listened"),r=!0)})}),r&&(M.value=null,U.value=null)},100)}var R=!1;Le({selector:"div:has(>div.breakdance-add-panel)",options:{subtree:!0,childList:!0},callback(){R||(R=!0,Z(),setTimeout(()=>{R=!1},100))}}),Z(),document.addEventListener("keydown",r=>{r.key==="Escape"&&W.value&&(W.value=!1)}),Y(W,r=>{z.style.zIndex=r?"calc(Infinity)":"-1"}),te("Module loaded!",{module:"variable-picker"})});
