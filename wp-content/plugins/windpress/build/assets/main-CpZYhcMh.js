import{T as ze,b as Me,d as Oe}from"./runtime-dom.esm-bundler-DKnqg7YI.min.js";import{l as ee}from"./logger-BTW-zIW3.js";import{L as Ve,_ as je,a as Fe,G as De,R as Ue}from"./chevron-right-BVOcWwsE.min.js";import{bde as T,bdeIframe as Re}from"./constant-BZV3uY6b.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.min.js";import{Z as I,f as X,$ as Be,av as K,R as d,J as p,Q as b,aj as q,V as g,O as S,W as He,E as _,w as Y,L as te,ao as O,a4 as Xe,K as L,T as V,F as j,U as F,X as G,I as Ke,aw as Ye}from"./runtime-core.esm-bundler-SLuuURr5.min.js";import{d as Ge}from"./vfs-CoPIgrSP.js";import"./index-CYxpKrga.min.js";import"./index-CkDJq9vY.min.js";import"./index-Bx_UX3bn.min.js";import{__tla as Je}from"./cssesc-BuSGOpl4.js";import{__tla as Ne}from"./index-B-0OGoK_.min.js";import{g as Qe}from"./intellisense-YxUDfJ1F.js";import"./redaxios.module-TFmBaLRL.min.js";import{l as Ze}from"./design-system-D7KTzWJK.js";import{u as et}from"./index-Dyb13sZ8.min.js";import{s as tt}from"./set-CZrLKuYB.min.js";import"./floating-ui.core-D4p8F-F6.min.js";import"./isObject-K1YoVIH1.min.js";import"./chunk-HTB5LLOP-Cay67bh1.min.js";import"./index-BAMY2Nnw.min.js";import"./preload-helper-DuwVgReH.min.js";import"./source-map-generator-BtPqY3n1.min.js";import"./index-rQLcFmgX.min.js";import"./index-BkiRcEwW.min.js";import"./pre-process-DMQVYA2C.js";import"./adobe-css-tools-Dbp5S5wp.min.js";import"./_toKey-BwG29BdO.min.js";Promise.all([(()=>{try{return Je}catch{}})(),(()=>{try{return Ne}catch{}})()]).then(async()=>{const ae={id:"windpressbreakdance-variable-app-header",class:"header-container cursor:grab bb:1|solid|$(gray200)"},ne={class:"header-content flex gap:10 align-items:center fg:var(dark)"},re={class:"header-logo flex align-items:center px:12 py:2"},se={class:"header-title text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},le={__name:"PanelHeader",setup(s){const r=I("variableApp"),t=I("isOpen");function n(){const a=r.querySelector("#windpressbreakdance-variable-app-header");let i=_(!1),l=0,u=0;Y(i,h=>{h?(document.body.style.userSelect="none",T.querySelector("div.v-application--wrap").style.pointerEvents="none",a.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),T.querySelector("div.v-application--wrap").style.removeProperty("pointer-events"),a.style.cursor="grab")});const o=h=>{i.value=!0;const k=a.getBoundingClientRect();l=h.clientX-k.left,u=h.clientY-k.top};a.removeEventListener("mousedown",o),a.addEventListener("mousedown",o);const E=h=>{if(!i.value)return;const k=a.getBoundingClientRect(),m=h.clientX,c=h.clientY,y=m-l,w=c-u,C=y<0?0:y>window.innerWidth-k.width?window.innerWidth-k.width:y,$=w<0?0:w>window.innerHeight-k.height?window.innerHeight-k.height:w;r.style.left=`${C}px`,r.style.top=`${$}px`};document.removeEventListener("mousemove",E),document.addEventListener("mousemove",E);const P=h=>{i.value=!1};document.removeEventListener("mouseup",P),document.addEventListener("mouseup",P)}return X(()=>{n()}),(a,i)=>{const l=Be("inline-svg"),u=je,o=K("tooltip");return p(),d("div",ae,[b("div",ne,[b("div",re,[g(l,{src:S(Ve),class:"inline-svg fill:current font:24"},null,8,["src"])]),q((p(),d("div",se,[...i[1]||(i[1]=[He(" WindPress ",-1)])])),[[o,{placement:"top",content:`v${a.windpressbreakdance._version}`}]]),q((p(),d("button",{class:"header-exit flex align-items:center py:10 px:12 fg:$(blue600):hover bg:$(blue50):hover",onClick:i[0]||(i[0]=E=>t.value=!S(t))},[g(u,{class:"iconify font:16"})])),[[o,{placement:"top",content:"Close"}]])])])}}},ie=A(le,[["__scopeId","data-v-7377c328"]]),oe={class:"header-slot flex-grow:1"},ce={key:0,class:"expansion-panel__body"},pe={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(s,{expose:r}){const t=s,n=_(null),a=et(`windpressbreakdance-variable-app.ui.expansion-panels.${t.namespace}`,{[`${t.name}`]:!1},void 0,{mergeDefaults:!0});function i(u){a.value[t.name]=u===null?!a.value[t.name]:u}function l(){n.value.scrollIntoView()}return r({togglePanel:i,scrollIntoView:l}),(u,o)=>{const E=Fe;return p(),d("div",{ref_key:"sectionRef",ref:n,class:"expansion-panel mx:10 py:8 mr:4"},[b("div",{class:Xe([{},"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer"]),onClick:o[0]||(o[0]=P=>S(a)[s.name]=!S(a)[s.name])},[b("div",oe,[te(u.$slots,"header",{},void 0,!0)]),b("div",null,[g(E,{style:O({transform:S(a)[s.name]?"rotate(-90deg)":"rotate(0deg)"}),class:"iconify ~duration:300 font:18"},null,8,["style"])])]),g(ze,null,{default:L(()=>[S(a)[s.name]?(p(),d("div",ce,[te(u.$slots,"default",{},void 0,!0)])):V("",!0)]),_:3})],512)}}},D=A(pe,[["__scopeId","data-v-29d1aafa"]]),ue={class:"{m:10;pb:15}>div"},de={class:"variable-section-title font:14 my:10"},ve={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},me=["onClick","onMouseenter"],be={class:"font:14"},ye={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(s){return(r,t)=>{const n=K("tooltip");return p(),d("div",ue,[(p(!0),d(j,null,F(s.variableItems,(a,i)=>(p(),d("div",{key:i,class:"var-item"},[b("div",de,G(i.replace("_","-")),1),b("div",ve,[a.length>0?(p(!0),d(j,{key:0},F(a,(l,u)=>q((p(),d("button",{key:u,class:"px:12 py:8 r:8 font:medium fg:$(dark) fg:$(accent-normal):hover bg:$(gray150) bg:$(gray300):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span",onClick:o=>r.$emit("previewChose",o,l.key),onMouseenter:o=>r.$emit("previewEnter",o,l.key),onMouseleave:t[0]||(t[0]=o=>r.$emit("previewLeave"))},[b("span",be,G(l.label),1)],40,me)),[[n,{placement:"top",content:`var(${l.key}, ${l.value})`}]])),128)):V("",!0)])]))),128))])}}},J=A(ye,[["__scopeId","data-v-4955c1d9"]]),fe={class:"{m:10;pb:15}>div"},he={class:"variable-section-title font:14 my:10"},ge={key:0,class:"variable-section-items default-color"},ke=["onClick","onMouseenter"],we=["onClick","onMouseenter"],_e={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(s){return(r,t)=>{const n=K("tooltip");return p(),d("div",fe,[(p(!0),d(j,null,F(s.variableItems,(a,i)=>(p(),d("div",{key:i,class:""},[b("div",he,G(i),1),a.DEFAULT?(p(),d("div",ge,[q(b("button",{style:O(`--wp-b-v-item-bg: var(--${a.DEFAULT.key.slice(2)});`),class:"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer",onClick:l=>r.$emit("previewChose",l,a.DEFAULT.key),onMouseenter:l=>r.$emit("previewEnter",l,a.DEFAULT.key),onMouseleave:t[0]||(t[0]=l=>r.$emit("previewLeave"))},null,44,ke),[[n,{placement:"top",content:`var(${a.DEFAULT.key}, ${a.DEFAULT.value})`}]])])):V("",!0),a.shades&&Object.keys(a.shades).length>0?(p(),d("div",{key:1,style:O(`--wp-b-v-items-grid: ${Object.keys(a.shades).length}`),class:"variable-section-items shades-colors grid r:4 overflow:hidden"},[(p(!0),d(j,null,F(a.shades,(l,u)=>(p(),d("div",{key:u,class:"flex gap:10"},[q(b("button",{style:O(`--wp-b-v-item-bg: var(--${l.key.slice(2)})`),class:"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer",onClick:o=>r.$emit("previewChose",o,l.key),onMouseenter:o=>r.$emit("previewEnter",o,l.key),onMouseleave:t[1]||(t[1]=o=>r.$emit("previewLeave"))},null,44,we),[[n,{placement:"top",content:`var(${l.key}, ${l.value})`}]])]))),128))],4)):V("",!0)]))),128))])}}},Ee=A(_e,[["__scopeId","data-v-b5786bb3"]]),$e={id:"windpressbreakdance-variable-app-body",class:"var-body rel w:full h:full overflow-y:scroll! bb:1|solid|$(gray200)>div:not(:last-child)"},xe=1e3,Le={__name:"PanelBody",setup(s){const r=_({colors:{},typography:{},sizing:{}}),t=I("focusedInput"),n=I("recentVariableSelectionTimestamp"),a=I("tempInputValue"),i=I("variableApp");async function l(){const m=Re.contentWindow.document.querySelector('script#windpress\\:vfs[type="text/plain"]'),c=Ge(m.textContent),y=await Qe(await Ze({volume:c}));let w=i.querySelector("style#windpressbreakdance-variable-app-body-style");w||(w=document.createElement("style"),w.id="windpressbreakdance-variable-app-body-style",i.appendChild(w)),w.innerHTML=`
        #windpressbreakdance-variable-app-body {
            ${y.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;const C={};y.filter(e=>e.key.startsWith("--color")).forEach(e=>{const v=e.key.slice(8),B=v.split("-");let H="";if(B.length>1){const qe=B[0],We=B.slice(1).join("-");H=`${qe}.shades.'${We}'`}else H=`${v}.DEFAULT`;tt(C,H,e)}),r.value.colors=Object.keys(C).sort().reduce((e,v)=>(e[v]=C[v],e),{});const $={font_size:[],line_height:[],letter_spacing:[]};y.filter(e=>e.key.startsWith("--text-")&&!e.key.endsWith("--line-height")).forEach(e=>{const v=e.key.slice(7);$.font_size.push({key:e.key,label:v,value:e.value})}),y.filter(e=>e.key.startsWith("--leading-")||e.key.endsWith("--leading")).forEach(e=>{const v=e.key.startsWith("--leading-")?e.key.slice(10):e.key.slice(2,-9);$.line_height.push({key:e.key,label:v,value:e.value})}),$.line_height.sort((e,v)=>e.label.startsWith("font-size-")&&!v.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&v.label.startsWith("font-size-")?-1:0),y.filter(e=>e.key.startsWith("--tracking-")).forEach(e=>{const v=e.key.slice(11);$.letter_spacing.push({key:e.key,label:v,value:e.value})}),r.value.typography=$;const f={container:[],breakpoint:[]};y.filter(e=>e.key.startsWith("--container-")).forEach(e=>{const v=e.key.slice(12);f.container.push({key:e.key,label:v,value:e.value})}),y.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const v=e.key.slice(13);f.breakpoint.push({key:e.key,label:v,value:e.value})}),r.value.sizing=f}const u=_(null),o=_(null),E=_(null);Y(t,m=>{if(m){const c=m.closest("[data-test-id]"),y=["color"].some(f=>c.getAttribute("data-test-id").includes(f)),w=["fontSize"].some(f=>c.getAttribute("data-test-id").includes(f)),C=["spacing","size-width"].some(f=>c.getAttribute("data-test-id").includes(f));o.value.togglePanel(!1),E.value.togglePanel(!1),u.value.togglePanel(!1);async function $(){for(;m.parentElement.parentElement.parentElement.querySelector("div.dropdown>button.breakdance-unit-input-unit")===null;)await new Promise(f=>setTimeout(f,10));for(m.parentElement.parentElement.parentElement.querySelector("div.dropdown>button.breakdance-unit-input-unit").click();document.querySelector(".v-menu__content.menuable__content__active .dropdown-content .v-list .v-list-item:last-child .v-list-item__title")===null;)await new Promise(f=>setTimeout(f,10));document.querySelector(".v-menu__content.menuable__content__active .dropdown-content .v-list .v-list-item:last-child .v-list-item__title").click(),setTimeout(()=>{m.focus()},100)}y?(u.value.togglePanel(!0),u.value.scrollIntoView()):w?(o.value.togglePanel(!0),o.value.scrollIntoView(),$()):C&&(E.value.togglePanel(!0),E.value.scrollIntoView(),$())}});function P(m,c){performance.now()-n.value<xe||t.value&&(t.value.value=`var(${c})`,t.value.dispatchEvent(new Event("input")),t.value.focus())}function h(m){!t.value||a.value===null||(t.value.value=a.value,t.value.dispatchEvent(new Event("input")),t.value.focus())}function k(m,c){t.value&&(t.value.value=`var(${c})`,t.value.dispatchEvent(new Event("input")),t.value.focus(),a.value=`var(${c})`,n.value=performance.now())}return X(()=>{l()}),new BroadcastChannel("windpress").addEventListener("message",async m=>{const c=m.data;c.source==="windpress/intellisense"&&c.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{l()},1e3)}),(m,c)=>(p(),d("div",$e,[g(D,{ref_key:"sectionColor",ref:u,namespace:"variable",name:"color"},{header:L(()=>[...c[0]||(c[0]=[b("span",{class:"var-body-title"},"Color",-1)])]),default:L(()=>[g(Ee,{"variable-items":r.value.colors,onPreviewEnter:P,onPreviewLeave:h,onPreviewChose:k},null,8,["variable-items"])]),_:1},512),g(D,{ref_key:"sectionTypography",ref:o,namespace:"variable",name:"typography"},{header:L(()=>[...c[1]||(c[1]=[b("span",{class:"var-body-title"},"Typography",-1)])]),default:L(()=>[g(J,{"variable-items":r.value.typography,onPreviewEnter:P,onPreviewLeave:h,onPreviewChose:k},null,8,["variable-items"])]),_:1},512),g(D,{ref_key:"sectionSpacing",ref:E,namespace:"variable",name:"spacing",class:""},{header:L(()=>[...c[2]||(c[2]=[b("span",{class:"var-body-title"},"Sizing",-1)])]),default:L(()=>[g(J,{"variable-items":r.value.sizing,onPreviewEnter:P,onPreviewLeave:h,onPreviewChose:k},null,8,["variable-items"])]),_:1},512)]))}},Pe=A(Le,[["__scopeId","data-v-1ee43b95"]]),Ce={__name:"App",setup(s){const r=I("isOpen"),t=_(null);function n(){T.classList.contains("theme--light")?(t.value.classList.add("theme--light"),t.value.classList.remove("theme--dark")):T.classList.contains("theme--dark")&&(t.value.classList.add("theme--dark"),t.value.classList.remove("theme--light"))}return new MutationObserver(a=>{a.forEach(i=>{i.attributeName==="class"&&n()})}).observe(T,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),X(()=>{n()}),(a,i)=>q((p(),d("div",{id:"windpressbreakdance-variable-app-container",ref_key:"containerRef",ref:t,class:"v-application flex flex:column w:full h:full"},[g(ie),(p(),Ke(Ye,null,{default:L(()=>[g(Pe)]),_:1}))],512)),[[Me,S(r)]])}},Ie=A(Ce,[["__scopeId","data-v-a1c4c142"]]);function Se({selector:s,callback:r,options:t}){const n=new MutationObserver(r),a=document.querySelector(s);if(!a){ee(`Target not found for selector: ${s}`,{module:"variable-picker",type:"error"});return}const i={childList:!0,subtree:!0};n.observe(a,Object.assign(Object.assign({},i),t))}const z=document.createElement("windpressbreakdance-variable-app");z.id="windpressbreakdance-variable-app",T.appendChild(z);const W=_(!1),M=_(null),U=_(null),Te=_(0),x=Oe(Ie);x.config.globalProperties.windpressbreakdance=window.windpressbreakdance,x.provide("variableApp",z),x.provide("isOpen",W),x.provide("focusedInput",M),x.provide("tempInputValue",U),x.provide("recentVariableSelectionTimestamp",Te),x.use(De,{container:"#windpressbreakdance-variable-app"}),x.component("InlineSvg",Ue),x.mount("#windpressbreakdance-variable-app");function N(s){var r;!s.shiftKey||!s.target||((r=document==null?void 0:document.getSelection())==null||r.removeAllRanges(),s.preventDefault(),s.stopPropagation(),M.value=s.target,U.value=s.target.value,W.value=!0)}function Q(s){M.value=s.target}const Ae={includedFields:["div.breakdance-control-wrapper-input-wrapper div.breakdance-text-input-wrapper"]};function Z(){setTimeout(()=>{let s=!1;Ae.includedFields.forEach(r=>{(typeof r=="string"?[...document.querySelectorAll(r)]:[...document.querySelectorAll(r.selector)].filter(t=>r.hasChild.some(n=>t.querySelector(n)))).forEach(t=>{const n=t.querySelector("input[type='text']");(n==null?void 0:n.getAttribute("windpressbreakdance-variable-app"))!=="listened"&&(n==null||n.removeEventListener("click",N),n==null||n.addEventListener("click",N),n==null||n.removeEventListener("focus",Q),n==null||n.addEventListener("focus",Q),n==null||n.setAttribute("windpressbreakdance-variable-app","listened"),s=!0)})}),s&&(M.value=null,U.value=null)},100)}let R=!1;Se({selector:"div:has(>div.breakdance-add-panel)",options:{subtree:!0,childList:!0},callback(){R||(R=!0,Z(),setTimeout(()=>{R=!1},100))}}),Z(),document.addEventListener("keydown",s=>{s.key==="Escape"&&W.value&&(W.value=!1)}),Y(W,s=>{z.style.zIndex=s?"calc(Infinity)":"-1"}),ee("Module loaded!",{module:"variable-picker"})});
