import{Q as le,R as ye,S as me,T as oe,P as ae,U as be,W as he,X as ke,H as xe,Y as Ie,Z as Ke,F as de,$ as Se,a0 as qe,a1 as Te,a2 as te,a3 as ce,a4 as Ae,n as ve,k as Ce,d as Y,a5 as ie}from"./dashboard-C7hSnKc-.js";import{E as ne,H as re,_,f as _e,j as Ve,I as F,J as A,K as w,V as L,O as v,L as $,P as pe,ae as we,M as R,a1 as Be,R as M,F as fe,U as Le,a4 as B,T as D,Q as $e,W as ze,X as Ee}from"./runtime-core.esm-bundler-SLuuURr5.min.js";import{w as Z,a as Q}from"./runtime-dom.esm-bundler-DKnqg7YI.min.js";import{r as Fe,c as Re}from"./index-Dyb13sZ8.min.js";function We(s,m){const e=ne(),f=(a,q)=>{if(m.multiple&&Array.isArray(s.value))if(m.selectionBehavior==="replace")s.value=[a],e.value=a;else{const I=s.value.findIndex(u=>q(u));I!==-1?s.value=s.value.filter((u,t)=>t!==I):s.value=[...s.value,a]}else m.selectionBehavior==="replace"?s.value={...a}:!Array.isArray(s.value)&&q(s.value)?s.value=void 0:s.value={...a};return s.value};function S(a,q,I,u){var g;if(!(e!=null&&e.value)||!m.multiple||!Array.isArray(s.value))return;const t=(g=I().filter(y=>y.ref.dataset.disabled!=="").find(y=>y.ref===q))==null?void 0:g.value;if(!t)return;let p=null;switch(a){case"prev":case"next":{p=le(u,e.value,t);break}case"first":{p=le(u,e.value,u==null?void 0:u[0]);break}case"last":{p=le(u,e.value,u==null?void 0:u[u.length-1]);break}}s.value=p}return{firstValue:e,onSelectItem:f,handleMultipleReplace:S}}var Me=re({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const m=s,e=ye(),f=me(),S=_(()=>m.tabStopId||f),a=_(()=>e.currentTabStopId.value===S.value),{getItems:q,CollectionItem:I}=oe();_e(()=>{m.focusable&&e.onFocusableItemAdd()}),Ve(()=>{m.focusable&&e.onFocusableItemRemove()});function u(t){if(t.key==="Tab"&&t.shiftKey){e.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const p=be(t,e.orientation.value,e.dir.value);if(p!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!m.allowShiftKey&&t.shiftKey)return;t.preventDefault();let g=[...q().map(y=>y.ref).filter(y=>y.dataset.disabled!=="")];if(p==="last")g.reverse();else if(p==="prev"||p==="next"){p==="prev"&&g.reverse();const y=g.indexOf(t.currentTarget);g=e.loop.value?he(g,y+1):g.slice(y+1)}pe(()=>ke(g))}}return(t,p)=>(A(),F(v(I),null,{default:w(()=>[L(v(ae),{tabindex:a.value?0:-1,"data-orientation":v(e).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:p[0]||(p[0]=g=>{t.focusable?v(e).onItemFocus(S.value):g.preventDefault()}),onFocus:p[1]||(p[1]=g=>v(e).onItemFocus(S.value)),onKeydown:u},{default:w(()=>[$(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),ge=Me;function ee(s){return s.reduce((m,e)=>(m.push(e),e.children&&m.push(...ee(e.children)),m),[])}const[Oe,Pe]=xe("TreeRoot");var Ne=re({__name:"TreeRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},items:{type:Array,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},getKey:{type:Function,required:!0},getChildren:{type:Function,required:!1,default:s=>s.children},selectionBehavior:{type:String,required:!1,default:"toggle"},multiple:{type:Boolean,required:!1,skipCheck:!0},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},propagateSelect:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ul"}},emits:["update:modelValue","update:expanded"],setup(s,{emit:m}){const e=s,f=m,{items:S,multiple:a,disabled:q,propagateSelect:I,dir:u,bubbleSelect:t}=we(e),{handleTypeaheadSearch:p}=Ie(),g=Ke(u),y=ne(),z=ne(!1),c=Se(),o=de(e,"modelValue",f,{defaultValue:e.defaultValue??(a.value?[]:void 0),passive:!0,deep:!0}),k=de(e,"expanded",f,{defaultValue:e.defaultExpanded??[],passive:e.expanded===void 0,deep:!0}),{onSelectItem:i,handleMultipleReplace:n}=We(o,e),l=_(()=>a.value&&Array.isArray(o.value)?o.value.map(r=>e.getKey(r)):[e.getKey(o.value??{})]);function T(r,d=1,b){return r.reduce((x,h,V)=>{const E=e.getKey(h),W=e.getChildren(h),G=k.value.includes(E),J={_id:E,value:h,index:V,level:d,parentItem:b,hasChildren:!!W,bind:{value:h,level:d,"aria-setsize":r.length,"aria-posinset":V+1}};return x.push(J),W&&G&&x.push(...T(W,d+1,h)),x},[])}const K=_(()=>{const r=e.items;return k.value.map(d=>d),T(r??[])});function C(r){var d;if(z.value)c.trigger(r);else{const b=((d=y.value)==null?void 0:d.getItems())??[];p(r.key,b)}}function X(r){if(z.value)return;const d=Te[r.key];pe(()=>{var b;n(d,te(),(b=y.value)==null?void 0:b.getItems,K.value.map(x=>x.value))})}function O(r){var d;if(r.parentItem!=null&&Array.isArray(o.value)&&e.multiple){const b=K.value.find(x=>r.parentItem!=null&&e.getKey(x.value)===e.getKey(r.parentItem));b!=null&&((d=e.getChildren(b.value))!=null&&d.every(x=>o.value.find(h=>e.getKey(h)===e.getKey(x)))?o.value=[...o.value,b.value]:o.value=o.value.filter(x=>e.getKey(x)!==e.getKey(b.value)),O(b))}}return Pe({modelValue:o,selectedKeys:l,onSelect:r=>{var x;const d=h=>e.getKey(h??{})===e.getKey(r),b=e.multiple&&Array.isArray(o.value)?((x=o.value)==null?void 0:x.findIndex(d))!==-1:void 0;if(i(r,d),e.bubbleSelect&&e.multiple&&Array.isArray(o.value)){const h=K.value.find(V=>e.getKey(V.value)===e.getKey(r));h!=null&&O(h)}if(e.propagateSelect&&e.multiple&&Array.isArray(o.value)){const h=ee(e.getChildren(r)??[]);b?o.value=[...o.value].filter(V=>!h.some(E=>e.getKey(V??{})===e.getKey(E))):o.value=[...o.value,...h]}},expanded:k,onToggle(r){if(!(r&&e.getChildren(r)))return;const d=e.getKey(r)??r;k.value.includes(d)?k.value=k.value.filter(b=>b!==d):k.value.push(d)},getKey:e.getKey,getChildren:e.getChildren,items:S,expandedItems:K,disabled:q,multiple:a,dir:g,propagateSelect:I,bubbleSelect:t,isVirtual:z,virtualKeydownHook:c,handleMultipleReplace:n}),(r,d)=>(A(),F(v(qe),{ref_key:"rovingFocusGroupRef",ref:y,"as-child":"",orientation:"vertical",dir:v(g)},{default:w(()=>[L(v(ae),{role:"tree",as:r.as,"as-child":r.asChild,"aria-multiselectable":v(a)?!0:void 0,onKeydown:[C,Z(Q(X,["shift"]),["up","down"])]},{default:w(()=>[$(r.$slots,"default",{flattenItems:K.value,modelValue:v(o),expanded:v(k)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),He=Ne;const Ue="tree.select",je="tree.toggle";var De=re({inheritAttrs:!1,__name:"TreeItem",props:{value:{type:null,required:!0},level:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["select","toggle"],setup(s,{expose:m,emit:e}){const f=s,S=e,a=Oe(),{getItems:q}=oe(),I=_(()=>!!a.getChildren(f.value)),u=_(()=>{const i=a.getKey(f.value);return a.expanded.value.includes(i)}),t=_(()=>{const i=a.getKey(f.value);return a.selectedKeys.value.includes(i)}),p=_(()=>{if(a.bubbleSelect.value&&I.value&&Array.isArray(a.modelValue.value)){const i=ee(a.getChildren(f.value)||[]);return i.some(n=>a.modelValue.value.find(l=>a.getKey(l)===a.getKey(n)))&&!i.every(n=>a.modelValue.value.find(l=>a.getKey(l)===a.getKey(n)))}else return a.propagateSelect.value&&t.value&&I.value&&Array.isArray(a.modelValue.value)?!ee(a.getChildren(f.value)||[]).every(i=>a.modelValue.value.find(n=>a.getKey(n)===a.getKey(i))):void 0});function g(i){if(I.value)if(u.value){const n=q().map(C=>C.ref),l=te(),T=n.indexOf(l),K=[...n].slice(T).find(C=>Number(C.getAttribute("data-indent"))===f.level+1);K&&K.focus()}else k(i)}function y(i){if(u.value)k(i);else{const n=q().map(C=>C.ref),l=te(),T=n.indexOf(l),K=[...n].slice(0,T).reverse().find(C=>Number(C.getAttribute("data-indent"))===f.level-1);K&&K.focus()}}async function z(i){S("select",i),!(i!=null&&i.defaultPrevented)&&a.onSelect(f.value)}async function c(i){S("toggle",i),!(i!=null&&i.defaultPrevented)&&a.onToggle(f.value)}async function o(i){if(!i)return;const n={originalEvent:i,value:f.value,isExpanded:u.value,isSelected:t.value};ce(Ue,z,n)}async function k(i){if(!i)return;const n={originalEvent:i,value:f.value,isExpanded:u.value,isSelected:t.value};ce(je,c,n)}return m({isExpanded:u,isSelected:t,isIndeterminate:p,handleToggle:()=>a.onToggle(f.value),handleSelect:()=>a.onSelect(f.value)}),(i,n)=>(A(),F(v(ge),{"as-child":"",value:i.value,"allow-shift-key":""},{default:w(()=>[L(v(ae),R(i.$attrs,{role:"treeitem",as:i.as,"as-child":i.asChild,"aria-selected":t.value,"aria-expanded":I.value?u.value:void 0,"aria-level":i.level,"data-indent":i.level,"data-selected":t.value?"":void 0,"data-expanded":u.value?"":void 0,onKeydown:[Z(Q(o,["self","prevent"]),["enter","space"]),n[0]||(n[0]=Z(Q(l=>v(a).dir.value==="ltr"?g(l):y(l),["prevent"]),["right"])),n[1]||(n[1]=Z(Q(l=>v(a).dir.value==="ltr"?y(l):g(l),["prevent"]),["left"]))],onClick:n[2]||(n[2]=Q(l=>{o(l),k(l)},["stop"]))}),{default:w(()=>[$(i.$slots,"default",{isExpanded:u.value,isSelected:t.value,isIndeterminate:p.value,handleSelect:()=>v(a).onSelect(i.value),handleToggle:()=>v(a).onToggle(i.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}}),Qe=De;const Xe={slots:{root:"relative isolate",item:"",listWithChildren:"ms-4.5 border-s border-default",itemWithChildren:"ps-1.5 -ms-px",link:"relative group w-full flex items-center text-sm before:absolute before:inset-y-px before:inset-x-0 before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"shrink-0",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"shrink-0 transform transition-transform duration-200 group-data-expanded:rotate-180"},variants:{color:{primary:{link:"focus-visible:before:ring-primary"},secondary:{link:"focus-visible:before:ring-secondary"},success:{link:"focus-visible:before:ring-success"},info:{link:"focus-visible:before:ring-info"},warning:{link:"focus-visible:before:ring-warning"},error:{link:"focus-visible:before:ring-error"},neutral:{link:"focus-visible:before:ring-inverted"}},size:{xs:{link:"px-2 py-1 text-xs gap-1",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},sm:{link:"px-2.5 py-1.5 text-xs gap-1.5",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},md:{link:"px-2.5 py-1.5 text-sm gap-1.5",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},lg:{link:"px-3 py-2 text-sm gap-2",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},xl:{link:"px-3 py-2 text-base gap-2",linkLeadingIcon:"size-6",linkTrailingIcon:"size-6"}},selected:{true:{link:"before:bg-elevated"},false:{link:["hover:not-disabled:text-highlighted hover:not-disabled:before:bg-elevated/50","transition-colors before:transition-colors"]}},disabled:{true:{link:"cursor-not-allowed opacity-75"}}},compoundVariants:[{color:"primary",selected:!0,class:{link:"text-primary"}},{color:"secondary",selected:!0,class:{link:"text-secondary"}},{color:"success",selected:!0,class:{link:"text-success"}},{color:"info",selected:!0,class:{link:"text-info"}},{color:"warning",selected:!0,class:{link:"text-warning"}},{color:"error",selected:!0,class:{link:"text-error"}},{color:"neutral",selected:!0,class:{link:"text-highlighted"}}],defaultVariants:{color:"primary",size:"md"}},Ge=["disabled"],Je=Object.assign({inheritAttrs:!1},{__name:"Tree",props:{as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},valueKey:{type:null,required:!1,default:"value"},labelKey:{type:null,required:!1,default:"label"},trailingIcon:{type:String,required:!1},expandedIcon:{type:String,required:!1},collapsedIcon:{type:String,required:!1},items:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},selectionBehavior:{type:String,required:!1},propagateSelect:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1}},emits:["update:expanded","update:modelValue"],setup(s,{emit:m}){const e=s,f=m,S=Be(),a=Ce(),q=Ae(Fe(e,"as","modelValue","defaultValue","items","multiple","expanded","disabled","propagateSelect","bubbleSelect"),f),[I,u]=Re(),t=_(()=>{var c;return ve({extend:ve(Xe),...((c=a.ui)==null?void 0:c.tree)||{}})({color:e.color,size:e.size})});function p(c){return ie(c,e.labelKey)}function g(c){return ie(c,e.valueKey)??ie(c,e.labelKey)}function y(c){var i;const o=c.defaultExpanded?g(c):null,k=((i=c.children)==null?void 0:i.flatMap(n=>y(n)))??[];return[o,...k].filter(Boolean)}const z=_(()=>{var c;return e.defaultExpanded??((c=e.items)==null?void 0:c.flatMap(o=>y(o)))});return(c,o)=>{var k;return A(),M(fe,null,[L(v(I),null,{default:w(({items:i,level:n})=>[(A(!0),M(fe,null,Le(i,(l,T)=>{var K,C,X,O;return A(),M("li",{key:`${n}-${T}`,class:B(n>0?t.value.itemWithChildren({class:[(K=e.ui)==null?void 0:K.itemWithChildren,(C=l.ui)==null?void 0:C.itemWithChildren]}):t.value.item({class:[(X=e.ui)==null?void 0:X.item,(O=l.ui)==null?void 0:O.item]}))},[L(v(Qe),{"as-child":"",level:n,value:l,onToggle:l.onToggle,onSelect:l.onSelect},{default:w(({isExpanded:r,isSelected:d})=>{var b,x,h;return[$(c.$slots,l.slot?`${l.slot}-wrapper`:"item-wrapper",R({ref_for:!0},{item:l,index:T,level:n,expanded:r,selected:d},{item:l}),()=>{var V,E;return[$e("button",{type:"button",disabled:l.disabled||s.disabled,class:B(t.value.link({class:[(V=e.ui)==null?void 0:V.link,(E=l.ui)==null?void 0:E.link,l.class],selected:d,disabled:l.disabled||s.disabled}))},[$(c.$slots,l.slot||"item",R({ref_for:!0},{index:T,level:n,expanded:r,selected:d},{item:l}),()=>{var W,G,J,se,ue;return[$(c.$slots,l.slot?`${l.slot}-leading`:"item-leading",R({ref_for:!0},{index:T,level:n,expanded:r,selected:d},{item:l}),()=>{var P,N,H,U,j;return[l.icon?(A(),F(Y,{key:0,name:l.icon,class:B(t.value.linkLeadingIcon({class:[(P=e.ui)==null?void 0:P.linkLeadingIcon,(N=l.ui)==null?void 0:N.linkLeadingIcon]}))},null,8,["name","class"])):(H=l.children)!=null&&H.length?(A(),F(Y,{key:1,name:r?s.expandedIcon??v(a).ui.icons.folderOpen:s.collapsedIcon??v(a).ui.icons.folder,class:B(t.value.linkLeadingIcon({class:[(U=e.ui)==null?void 0:U.linkLeadingIcon,(j=l.ui)==null?void 0:j.linkLeadingIcon]}))},null,8,["name","class"])):D("",!0)]}),p(l)||S[l.slot?`${l.slot}-label`:"item-label"]?(A(),M("span",{key:0,class:B(t.value.linkLabel({class:[(W=e.ui)==null?void 0:W.linkLabel,(G=l.ui)==null?void 0:G.linkLabel]}))},[$(c.$slots,l.slot?`${l.slot}-label`:"item-label",R({ref_for:!0},{item:l,index:T,level:n,expanded:r,selected:d},{item:l}),()=>[ze(Ee(p(l)),1)])],2)):D("",!0),l.trailingIcon||(J=l.children)!=null&&J.length||S[l.slot?`${l.slot}-trailing`:"item-trailing"]?(A(),M("span",{key:1,class:B(t.value.linkTrailing({class:[(se=e.ui)==null?void 0:se.linkTrailing,(ue=l.ui)==null?void 0:ue.linkTrailing]}))},[$(c.$slots,l.slot?`${l.slot}-trailing`:"item-trailing",R({ref_for:!0},{item:l,index:T,level:n,expanded:r,selected:d},{item:l}),()=>{var P,N,H,U,j;return[l.trailingIcon?(A(),F(Y,{key:0,name:l.trailingIcon,class:B(t.value.linkTrailingIcon({class:[(P=e.ui)==null?void 0:P.linkTrailingIcon,(N=l.ui)==null?void 0:N.linkTrailingIcon]}))},null,8,["name","class"])):(H=l.children)!=null&&H.length?(A(),F(Y,{key:1,name:s.trailingIcon??v(a).ui.icons.chevronDown,class:B(t.value.linkTrailingIcon({class:[(U=e.ui)==null?void 0:U.linkTrailingIcon,(j=l.ui)==null?void 0:j.linkTrailingIcon]}))},null,8,["name","class"])):D("",!0)]})],2)):D("",!0)]})],10,Ge)]}),(b=l.children)!=null&&b.length&&r?(A(),M("ul",{key:0,class:B(t.value.listWithChildren({class:[(x=e.ui)==null?void 0:x.listWithChildren,(h=l.ui)==null?void 0:h.listWithChildren]}))},[L(v(u),{items:l.children,level:n+1},null,8,["items","level"])],2)):D("",!0)]}),_:2},1032,["level","value","onToggle","onSelect"])],2)}),128))]),_:3}),L(v(He),R({...v(q),...c.$attrs},{class:t.value.root({class:[(k=e.ui)==null?void 0:k.root,e.class]}),"get-key":g,"default-expanded":z.value,"selection-behavior":s.selectionBehavior}),{default:w(()=>[L(v(u),{items:s.items,level:0},null,8,["items"])]),_:1},16,["class","default-expanded","selection-behavior"])],64)}}});export{ge as R,Je as _};
