import"./dist-C_ABUlOQ.min.js";import{E as I,O as w,S as b,b as O,j as L,k as a,nj as i,nx as S,ny as T,re as Y,ri as m,s as k,tG as C,tQ as j,tX as n,ta as z,tg as f,v as N,y as d}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import{o as q}from"./vue.runtime.esm-bundler-B7l4RX9R.min.js";import{W as R,n as M,t as X}from"./Button-B6tnd5h6.min.js";import{i as F}from"./log-BwehX2sj.js";import"./core-CuG4XPOF.min.js";import"./vue-router-DDJE2Uyj.min.js";import{n as H,t as J}from"./Tooltip-zde4fm_B.min.js";import"./VisuallyHiddenInput-BERVFAg0.min.js";import"./usePrimitiveElement-B0TMSs0k.min.js";import"./floating-ui.core-BwRAMOlv.min.js";import"./Label-BYwosbTN.min.js";import{t as K}from"./Separator-ccVxK-R2.min.js";import{t as Q}from"./Switch-D3UeouV_.min.js";import{t as $}from"./useToast-DNBmJq55.min.js";import{t as Z}from"./api-j1hi8yn9.js";import"./index.browser-L__kdN7m.min.js";import{a as V,n as x,t as ee}from"./settings-DtACJkyx.js";import"./isObject-BwTgHO42.min.js";import"./_toKey-BLmsLsy5.min.js";import"./_initCloneObject-Cm0YirQr.min.js";import"./set-Cqd4I9bq.min.js";import{t as ie}from"./get-BfBXFw95.min.js";import"./virtualRef-CYpkks3b.js";import{t as te}from"./package-DPu-F3Gs.min.js";import{t as se}from"./package-CEIAXZP-.min.js";import{t as ae}from"./Input-CZFwhgLF.min.js";import{t as ne}from"./FormField-vMZGxLGG.min.js";import{n as re,t as le}from"./PageCard-j97kZjf_.min.js";const oe=F("license",()=>{let v=V(),g=Z(),o=S({key:""}),t=N(()=>ie(o.value,"is_activated",!1));async function u(){return v.add("settings.license.doPull"),await g.request("/admin/settings/license/index",{method:"GET"}).then(s=>{o.value=x(s.data.license)}).catch(s=>{}).finally(()=>{v.remove("settings.license.doPull")})}async function c(s){return v.add("settings.license.activate"),g.request("/admin/settings/license/activate",{method:"POST",data:{license:s}}).then(p=>(o.value=x(p.data.license),{message:p.data.message,success:!0})).catch(p=>{throw Error(p.data?p.data.message:p.message)}).finally(()=>{v.remove("settings.license.activate")})}async function _(){return v.add("settings.license.deactivate"),g.request("/admin/settings/license/deactivate",{method:"POST",data:{license:o.value}}).then(s=>(o.value=x(s.data.license),{message:s.data.message,success:!0})).catch(s=>{throw Error(s.response?s.response.data.message:s.message)}).finally(()=>{v.remove("settings.license.deactivate")})}return{license:o,isActivated:t,doPull:u,doActivate:c,doDeactivate:_}});var de={class:"flex flex-row gap-4 my-2"},ce={class:"flex items-center gap-2"},ue={class:"text-(--ui-text-muted)"},pe={class:"grid grid-cols-2 gap-3"},me={class:"flex items-center justify-center rounded-md p-3 font-semibold flex-1 bg-(--ui-bg-accented) hover:ring-(--ui-text)/50 hover:ring-1 has-checked:bg-[#0073e0] has-checked:text-white"},ve={class:"flex items-center justify-center rounded-md p-3 font-semibold flex-1 bg-(--ui-bg-accented) hover:ring-(--ui-text)/50 hover:ring-1 has-checked:bg-[#0073e0] has-checked:text-white"},_e=L({__name:"General",setup(v){let g=R(),o=$(),t=oe(),u=ee(),c=V(),_=S(!1),s=T({key:""});C(()=>s.key,()=>{_.value=!1});function p(){_.value=!1,o.add({id:"license.change",title:t.license.key&&t.isActivated?wp.i18n.__("Deactivating license...","windprees"):wp.i18n.__("Activating license...","windpress"),description:t.license.key&&t.isActivated?wp.i18n.__("Please wait while we deactivate your license key.","windpress"):wp.i18n.__("Please wait while we activate your license key.","windpress"),icon:"lucide:loader-circle",close:!1,duration:0,color:"neutral",ui:{icon:"animate-spin"}}),(t.license.key&&t.isActivated?t.doDeactivate():t.doActivate(s.key)).then(()=>{s.key=t.license.key,o.update("license.change",{title:wp.i18n.__("License updated","windpress"),description:t.isActivated?wp.i18n.__("Your license key has been activated.","windpress"):wp.i18n.__("Your license key has been deactivated.","windpress"),icon:"lucide:key-round",color:"success",duration:void 0,close:!0,ui:{icon:void 0}})}).catch(e=>{o.update("license.change",{title:wp.i18n.__("License update failed","windpress"),description:e instanceof Error?e.message:wp.i18n.__("An unknown error occurred","windpress"),icon:"lucide:key-round",color:"error",close:!0,duration:void 0,ui:{icon:void 0}}),_.value=wp.i18n.__("Invalid license key","windpress")})}return z(()=>{t.doPull().then(()=>{s.key=t.license.key})}),(e,l)=>{let A=X,y=le,U=ae,W=J,D=H,h=ne,P=re,E=M,B=K,G=Q;return f(),b(k,null,[e.window.windpress._via_wp_org?(f(),O(y,{key:0,title:e.i18n.__("License","windpress"),class:"bg-gradient-to-tl from-(--ui-primary)/10 from-5% to-(--ui-bg)"},{description:n(()=>[w(m(e.i18n.__("You are using the WordPress.org edition.","windpress")),1)]),footer:n(()=>[a(A,{label:e.i18n.__("Upgrade to Pro","windpress"),color:"primary","trailing-icon":i(g).ui.icons.external,ui:{trailingIcon:"inline-block size-3 align-top",base:"gap-[normal] items-start"},to:`https://wind.press/?utm_source=wordpress-plugins&utm_medium=plugin-menu&utm_campaign=windpress&utm_id=all-edition&windpress_version=${e.window.windpress._version}#pricing`,target:"_blank"},null,8,["label","trailing-icon","to"])]),_:1},8,["title"])):(f(),O(y,{key:1,title:"License",description:"",class:Y([i(t).isActivated?"from-(--ui-primary)/10":"from-(--ui-warning)/10","bg-gradient-to-tl from-5% to-(--ui-bg)"])},{default:n(()=>[a(P,{state:s,onSubmit:p},{default:n(()=>[a(h,{label:e.i18n.__("License key","windpress"),required:"",error:_.value,help:e.i18n.__("To access updates when they are available, please provide your license key.","windpress")},I({default:n(()=>[d("div",de,[a(U,{modelValue:s.key,"onUpdate:modelValue":l[0]||(l[0]=r=>s.key=r),type:"password",placeholder:"WIND-12345-67890-PRESS",class:"w-full","data-1p-ignore":""},null,8,["modelValue"]),a(W,{"delay-duration":0,text:i(t).isActivated?e.i18n.__("Unregister your WindPress setup","windpress"):e.i18n.__("Register your WindPress setup","windpress")},{default:n(()=>[a(A,{type:"submit",color:"primary",variant:"subtle","leading-icon":i(c).isBusy&&i(c).tasks.some(r=>r.task==="settings.license.activate"||r.task==="settings.license.deactivate")?"lucide:loader-circle":void 0,disabled:!s.key||i(c).isBusy,ui:{leadingIcon:"animate-spin"}},{default:n(()=>[i(t).isActivated?(f(),b(k,{key:0},[w(m(i(c).isBusy&&i(c).tasks.some(r=>r.task==="settings.license.deactivate")?e.i18n.__("Deactivating","windpress"):e.i18n.__("Deactivate","windpress")),1)],64)):(f(),b(k,{key:1},[w(m(i(c).isBusy&&i(c).tasks.some(r=>r.task==="settings.license.activate")?e.i18n.__("Activating","windpress"):e.i18n.__("Activate","windpress")),1)],64))]),_:1},8,["leading-icon","disabled"])]),_:1},8,["text"])])]),_:2},[i(t).license.key?{name:"hint",fn:n(()=>[d("div",ce,[d("span",ue,m(e.i18n.__("Status","windpress"))+" :",1),a(D,{color:i(t).isActivated?"success":"error",variant:"subtle"},{default:n(()=>[w(m(i(t).isActivated?e.i18n.__("Active","windpress"):e.i18n.__("Inactive","windpress")),1)]),_:1},8,["color"])])]),key:"0"}:void 0]),1032,["label","error","help"])]),_:1},8,["state"])]),_:1},8,["class"])),a(P,{id:"general",state:{}},{default:n(()=>[a(y,{title:e.i18n.__("General","windpress"),description:e.i18n.__("General settings for WindPress.","windpress"),variant:"naked",orientation:"horizontal",class:"mb-4"},null,8,["title","description"]),a(y,{variant:"subtle"},{default:n(()=>[a(h,{label:e.i18n.__("Tailwind CSS version","windpress"),description:e.i18n.__("You must update the `main.css` file accordingly.","windpress"),class:"flex max-sm:flex-col justify-between items-start gap-4",ui:{container:"flex-1"}},{hint:n(()=>[a(E,{to:"https://github.com/tailwindlabs/tailwindcss/releases",target:"_blank",class:"underline"},{default:n(()=>[w(m(e.i18n.__("See release notes","windpress")),1)]),_:1})]),default:n(()=>[d("div",pe,[d("label",me,[j(d("input",{"onUpdate:modelValue":l[1]||(l[1]=r=>i(u).virtualOptions("general.tailwindcss.version",4).value=r),type:"radio",name:"tailwindcss_version",value:3,class:"sr-only"},null,512),[[q,i(u).virtualOptions("general.tailwindcss.version",4).value]]),d("span",null,m(i(se)),1)]),d("label",ve,[j(d("input",{"onUpdate:modelValue":l[2]||(l[2]=r=>i(u).virtualOptions("general.tailwindcss.version",4).value=r),type:"radio",name:"tailwindcss_version",value:4,class:"sr-only"},null,512),[[q,i(u).virtualOptions("general.tailwindcss.version",4).value]]),d("span",null,m(i(te)),1)])])]),_:1},8,["label","description"]),a(B),a(h,{label:e.i18n.__("Ubiquitous panel","windpress"),description:e.i18n.__("Access the WindPress dashboard panel right from the front page and made adjustment as it is on the wp-admin page.","windpress"),class:"flex items-center justify-between not-last:pb-4 gap-4"},{default:n(()=>[a(G,{modelValue:i(u).virtualOptions("general.ubiquitous-panel.enabled",!1).value,"onUpdate:modelValue":l[3]||(l[3]=r=>i(u).virtualOptions("general.ubiquitous-panel.enabled",!1).value=r),disabled:""},null,8,["modelValue"])]),_:1},8,["label","description"])]),_:1})]),_:1})],64)}}});export{_e as default};
