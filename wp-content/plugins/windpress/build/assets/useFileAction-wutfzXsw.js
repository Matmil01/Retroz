import{s as U}from"./chunk-BP1tGd43.min.js";import{E as ki,O as V,b as I,j as Y,k as P,nj as ie,nx as O,ny as re,ri as F,tG as W,tX as g,tg as T,u as Vi,v as Ii,y as u}from"./runtime-core.esm-bundler-Ca9eACeg.min.js";import{t as N}from"./Button-B6tnd5h6.min.js";import{i as ne}from"./log-BwehX2sj.js";import{f as Ti,n as zi,s as Di}from"./core-CuG4XPOF.min.js";import{t as Li}from"./useOverlay-B6IppYWD.min.js";import{t as Ri}from"./useToast-DNBmJq55.min.js";import{t as $}from"./Modal-LNGkPIgk.min.js";import{t as te}from"./api-j1hi8yn9.js";import{n as Yi}from"./index.browser-L__kdN7m.min.js";import{a as se,i as ae,n as le,r as oe,t as Ni}from"./settings-DtACJkyx.js";import{a as de,r as ce}from"./isObject-BwTgHO42.min.js";import{o as $i,r as Mi,u as ue}from"./_toKey-BLmsLsy5.min.js";import{d as Ui,i as pe,m as _e,o as q}from"./_initCloneObject-Cm0YirQr.min.js";import{t as fe}from"./Input-CZFwhgLF.min.js";import{t as z}from"./preload-helper-hRiy8xQv.min.js";import{t as we}from"./dist-BuaPZvPo.min.js";import{t as Wi}from"./path-browserify-BdtUGfkV.min.js";import{n as qi}from"./vfs-Cd6bW2_1.js";import{n as Hi,t as Ji}from"./dist-Bm-lj0eb.min.js";import{t as me}from"./dayjs.min-BAjIZEkX.min.js";import{t as ve}from"./FormField-vMZGxLGG.min.js";let H,D,he,Bi=(async()=>{var ye="__lodash_hash_undefined__";function be(e){return this.__data__.set(e,ye),this}var ge=be;function Ee(e){return this.__data__.has(e)}var Pe=Ee;function L(e){var i=-1,r=e==null?0:e.length;for(this.__data__=new Mi;++i<r;)this.add(e[i])}L.prototype.add=L.prototype.push=ge,L.prototype.has=Pe;var Fe=L;function Se(e,i){for(var r=-1,s=e==null?0:e.length;++r<s;)if(i(e[r],r,e))return!0;return!1}var Ce=Se;function je(e,i){return e.has(i)}var xe=je;function Oe(e,i,r,s,t,n){var d=r&1,a=e.length,o=i.length;if(a!=o&&!(d&&o>a))return!1;var c=n.get(e),m=n.get(i);if(c&&m)return c==i&&m==e;var w=-1,p=!0,b=r&2?new Fe:void 0;for(n.set(e,i),n.set(i,e);++w<a;){var h=e[w],E=i[w];if(s)var j=d?s(E,h,w,i,e,n):s(h,E,w,e,i,n);if(j!==void 0){if(j)continue;p=!1;break}if(b){if(!Ce(i,function(x,l){if(!xe(b,l)&&(h===x||t(h,x,r,s,n)))return b.push(l)})){p=!1;break}}else if(!(h===E||t(h,E,r,s,n))){p=!1;break}}return n.delete(e),n.delete(i),p}var J=Oe;function Ae(e){var i=-1,r=Array(e.size);return e.forEach(function(s,t){r[++i]=[t,s]}),r}var ke=Ae;function Ve(e){var i=-1,r=Array(e.size);return e.forEach(function(s){r[++i]=s}),r}var Ie=Ve,Te="[object Boolean]",ze="[object Date]",De="[object Error]",Le="[object Map]",Re="[object Number]",Ye="[object RegExp]",Ne="[object Set]",$e="[object String]",Me="[object Symbol]",Ue="[object ArrayBuffer]",We="[object DataView]",B=de?de.prototype:void 0,M=B?B.valueOf:void 0;function qe(e,i,r,s,t,n,d){switch(r){case We:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Ue:return!(e.byteLength!=i.byteLength||!n(new pe(e),new pe(i)));case Te:case ze:case Re:return $i(+e,+i);case De:return e.name==i.name&&e.message==i.message;case Ye:case $e:return e==i+"";case Le:var a=ke;case Ne:var o=s&1;if(a||(a=Ie),e.size!=i.size&&!o)return!1;var c=d.get(e);if(c)return c==i;s|=2,d.set(e,i);var m=J(a(e),a(i),s,t,n,d);return d.delete(e),m;case Me:if(M)return M.call(e)==M.call(i)}return!1}var He=qe,Je=Object.prototype.hasOwnProperty;function Be(e,i,r,s,t,n){var d=r&1,a=ae(e),o=a.length,c=ae(i),m=c.length;if(o!=m&&!d)return!1;for(var w=o;w--;){var p=a[w];if(!(d?p in i:Je.call(i,p)))return!1}var b=n.get(e),h=n.get(i);if(b&&h)return b==i&&h==e;var E=!0;n.set(e,i),n.set(i,e);for(var j=d;++w<o;){p=a[w];var x=e[p],l=i[p];if(s)var f=d?s(l,x,p,i,e,n):s(x,l,p,e,i,n);if(!(f===void 0?x===l||t(x,l,r,s,n):f)){E=!1;break}j||(j=p=="constructor")}if(E&&!j){var v=e.constructor,y=i.constructor;v!=y&&"constructor"in e&&"constructor"in i&&!(typeof v=="function"&&v instanceof v&&typeof y=="function"&&y instanceof y)&&(E=!1)}return n.delete(e),n.delete(i),E}var Ze=Be,Z="[object Array]",R="[object Object]",G=Object.prototype.hasOwnProperty;function Ge(e,i,r,s,t,n){var d=ue(e),a=ue(i),o=d?Z:oe(e),c=a?Z:oe(i);o=o=="[object Arguments]"?R:o,c=c=="[object Arguments]"?R:c;var m=o==R,w=c==R,p=o==c;if(p&&_e(e)){if(!_e(i))return!1;d=!0,m=!1}if(p&&!m)return n||(n=new q),d||Ui(e)?J(e,i,r,s,t,n):He(e,i,o,r,s,t,n);if(!(r&1)){var b=m&&G.call(e,"__wrapped__"),h=w&&G.call(i,"__wrapped__");if(b||h){var E=b?e.value():e,j=h?i.value():i;return n||(n=new q),t(E,j,r,s,n)}}return p?(n||(n=new q),Ze(e,i,r,s,t,n)):!1}var Ke=Ge;function K(e,i,r,s,t){return e===i?!0:e==null||i==null||!ce(e)&&!ce(i)?e!==e&&i!==i:Ke(e,i,r,s,K,t)}var Xe=K;function Qe(e,i){return Xe(e,i)}var X=Qe;D=ne("volume",()=>{let e=te(),i=se(),r=re({entries:[]}),s=re({entries:[]}),t=O(null),n=Ti("windpress.dashboard.store.volume.activeViewEntryRelativePath",null);function d(l){return l=l.replace(/[^a-zA-Z0-9._/-]+/g,""),l=l.replace(/\.{2,}/g,"."),l=l.replace(/\/{2,}/g,"/"),l=l.replace(/^[._/ -]+|[._/ -]+$/g,""),l}function a(l){let f=l.split("/").map(d).join("/");f=d(f);let v=r.entries.findIndex(y=>y.relative_path===f);if(v!==-1){if(r.entries[v].hidden===!1)throw Error(wp.i18n.__(`A file named "${f}" already exists`,"windpress"));r.entries[v].hidden=!1,r.entries[v].content=`/* file: ${f} */

`}else r.entries.push({name:f.split("/").pop()||"",content:`/* file: ${f} */

`,relative_path:`${f}`,handler:"internal"});t.value=`${f}`}function o(l){let f=r.entries.findIndex(v=>v.relative_path===l.relative_path);r.entries[f].content="",r.entries[f].hidden=!0,t.value===l.relative_path&&(t.value=null)}function c(l,f){let v=r.entries.findIndex(S=>S.relative_path===l.relative_path),y=f.split("/").map(d).join("/");y=d(y);let A=r.entries.findIndex(S=>S.relative_path===y);if(A!==-1){if(r.entries[A].hidden===!1)throw Error(wp.i18n.__(`A file named "${y}" already exists`,"windpress"));r.entries[A].hidden=!1,r.entries[A].content=r.entries[v].content,r.entries[A].signature&&delete r.entries[A].signature}else{let S=le(r.entries[v]);S.relative_path=y,S.name=y.split("/").pop()||"",S.content=r.entries[v].content,S.hidden=!1,S.signature=void 0,r.entries.push(S)}o(l)}function m(l){let f=r.entries.findIndex(v=>v.relative_path===l.relative_path);r.entries[f].content=""}function w(){return r.entries.reduce((l,f)=>(l[`/${f.relative_path}`]=f.content,l),{})}async function p(){return i.add("volume.doPull"),await e.request("/admin/volume/index",{method:"GET"}).then(l=>l.data).then(l=>{r.entries=l.entries,h()}).catch(l=>{}).finally(()=>{i.remove("volume.doPull")})}async function b(){return i.add("volume.doPush"),e.request("/admin/volume/store",{method:"POST",data:{volume:{entries:r.entries}}}).then(l=>(h(),{message:l.data.message,success:!0})).catch(l=>{throw Error(l.response?l.response.data.message:l.message)}).finally(()=>{i.remove("volume.doPush")})}W(t,l=>{n.value=l});function h(){r.entries.length!==0&&(t.value=r.entries.some(l=>l.relative_path===n.value)?n.value:"main.css",E.value&&(s.entries=le(r.entries)))}let E=Ii(()=>!X(r.entries,s.entries));function j(l){let f=r.entries.find(y=>y.relative_path===l),v=s.entries.find(y=>y.relative_path===l);return!X(f,v)}async function x(){return r.entries.length===0?p():Promise.resolve()}return{data:r,initData:s,activeViewEntryRelativePath:t,hasChanged:E,addNewEntry:a,getKVEntries:w,doPull:p,doPush:b,entryHasChanged:j,softDeleteEntry:o,resetEntry:m,renameEntry:c,cleanPath:d,initPull:x}}),H=ne("themeJson",()=>{let e=te(),i=se(),r=O({});async function s(){return i.add("themeJson.doPush"),e.request("/admin/theme-json/store",{method:"POST",data:{data:btoa(JSON.stringify(r.value,null,window.windpress.is_debug?2:void 0))}}).then(t=>({message:t.data.message,success:!0})).catch(t=>{throw Error(t.response?t.response.data.message:t.message)}).finally(()=>{i.remove("themeJson.doPush")})}return{themeJson:r,doPush:s}});var ei=U(Wi()),ii={class:"flex"},ri=["innerHTML"],ni={class:"flex gap-2"},Q=Y({__name:"ConfirmFileActionModal",props:{filePath:{},fileContent:{},actionYes:{},actionNo:{}},emits:["close"],setup(e,{emit:i}){let r=e,s=Di(),t=O(null);(async()=>t.value=await Hi({themes:[z(()=>import("./dark-plus-BGOaVPr_.min.js").then(async a=>(await a.__tla,a)),[],import.meta.url),z(()=>import("./light-plus-Bi5cAkuq.min.js").then(async a=>(await a.__tla,a)),[],import.meta.url)],langs:[z(()=>import("./css-DGqdYipb.min.js").then(async a=>(await a.__tla,a)),[],import.meta.url),z(()=>import("./javascript-a1SWLcr9.min.js").then(async a=>(await a.__tla,a)),[],import.meta.url)],engine:Ji(z(()=>import("./wasm-Ce0kwmaA.min.js").then(async a=>(await a.__tla,a)),[],import.meta.url))}))();let n=zi(async()=>{if(!r.fileContent||!t.value)return;let a=ei.default.extname(r.filePath).replace(".","");return t.value.codeToHtml(r.fileContent,{lang:a==="css"?"css":"javascript",theme:s.value==="dark"?"dark-plus":"light-plus"})}),d=i;return(a,o)=>{let c=N,m=$;return T(),I(m,{close:{onClick:()=>d("close",!1)}},ki({title:g(()=>[V(F(a.i18n.sprintf(a.i18n.__('Are you sure you want to %s the "%s" file?',"windpress"),a.actionYes,a.filePath)),1)]),footer:g(()=>[u("div",ni,[P(c,{color:"neutral",variant:"soft",label:a.i18n.__("cancel","windpress"),onClick:o[0]||(o[0]=w=>d("close",!1)),class:"capitalize"},null,8,["label"]),P(c,{color:"error",variant:"soft",label:a.actionYes,onClick:o[1]||(o[1]=w=>d("close",!0)),class:"capitalize"},null,8,["label"])])]),_:2},[a.fileContent?{name:"body",fn:g(()=>[(T(),I(Vi,null,{default:g(()=>[u("div",ii,[u("div",{innerHTML:ie(n),class:"flex [&>pre]:p-4 [&>pre]:mr-6"},null,8,ri)])]),_:1}))]),key:"0"}:void 0]),1032,["close"])}}}),ti=U(me()),si={class:"flex flex-col gap-4 text-(--ui-text)"},ai={class:"font-bold uppercase my-2"},li={class:"w-full"},oi={class:"font-semibold w-1/3"},di={class:""},ci={class:"font-semibold w-1/5"},ui={class:""},pi={class:"font-semibold w-1/5"},_i={class:""},fi={class:"font-semibold w-1/5"},wi={class:""},mi={class:"flex gap-2"},vi=Y({__name:"ConfirmVolumeImportModal",props:{data:{}},emits:["close"],setup(e,{emit:i}){let r=e,s=i;return(t,n)=>{let d=N,a=$;return T(),I(a,{close:{onClick:()=>s("close",!1)}},{title:g(()=>[V(F(t.i18n.__("Import SFS volume","windpress")),1)]),body:g(()=>[u("div",si,[u("div",null,[u("div",ai,F(t.i18n.__("File info","windpress")),1),u("table",li,[u("tbody",null,[u("tr",null,[u("td",oi,F(t.i18n.__("WindPress version","windpress")),1),n[2]||(n[2]=u("td",{class:""},":",-1)),u("td",di,F(r.data._version),1)]),u("tr",null,[u("td",ci,F(t.i18n.__("WP Version","windpress")),1),n[3]||(n[3]=u("td",{class:""},":",-1)),u("td",ui,F(r.data._wp_version),1)]),u("tr",null,[u("td",pi,F(t.i18n.__("Exported on","windpress")),1),n[4]||(n[4]=u("td",{class:""},":",-1)),u("td",_i,F(ie(ti.default)(r.data._timestamp).format("YYYY-MM-DD HH:mm:ss")),1)]),u("tr",null,[u("td",fi,F(t.i18n.__("Entries","windpress")),1),n[5]||(n[5]=u("td",{class:""},":",-1)),u("td",wi,F(r.data.entries.length),1)])])])]),V(" "+F(t.i18n.__("This will overwrite all existing files. Are you sure you want to continue?","windpress")),1)])]),footer:g(()=>[u("div",mi,[P(d,{color:"neutral",variant:"soft",label:t.i18n.__("cancel","windpress"),onClick:n[0]||(n[0]=o=>s("close",!1)),class:"capitalize"},null,8,["label"]),P(d,{color:"warning",variant:"soft",label:t.i18n.__("Yes, continue","windpress"),onClick:n[1]||(n[1]=o=>s("close",!0)),class:"capitalize"},null,8,["label"])])]),_:1},8,["close"])}}}),hi={class:"flex gap-2"},yi=Y({__name:"NewFileFormModal",emits:["close"],setup(e,{emit:i}){let r=D(),s=i,t=O(""),n=O(!1);W(()=>t.value,()=>{n.value=!1});function d(){if(n.value=!1,!t.value){n.value=wp.i18n.__("Filename is required","windpress");return}if(!t.value.endsWith(".css")&&!t.value.endsWith(".js")){n.value=wp.i18n.__("File extension must be .css or .js","windpress");return}if(!/^[a-zA-Z0-9_.\-\/]+$/.test(t.value)){n.value=wp.i18n.__("Only alphanumeric, dash, underscore, forward slash, and dot are allowed","windpress");return}if(r.data.entries.find(a=>a.relative_path===`${t.value}`&&a.hidden!==!0)){n.value=wp.i18n.sprintf(wp.i18n.__('A file named "%s" already exists',"windpress"),t.value);return}s("close",t.value)}return(a,o)=>{let c=fe,m=ve,w=N,p=$;return T(),I(p,{close:{onClick:()=>s("close")}},{title:g(()=>[V(F(a.i18n.__("Create New File","windpress")),1)]),body:g(()=>[P(m,{label:"Filename",required:"",description:a.i18n.__("Filename may include a path. (css or js)","windpress"),error:n.value},{default:g(()=>[P(c,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=b=>t.value=b),placeholder:"theme/color.css",class:"w-full"},null,8,["modelValue"])]),_:1},8,["description","error"])]),footer:g(()=>[u("div",hi,[P(w,{color:"neutral",variant:"soft",label:a.i18n.__("cancel","windpress"),onClick:o[1]||(o[1]=b=>s("close")),class:"capitalize"},null,8,["label"]),P(w,{color:"primary",variant:"soft",label:a.i18n.__("Submit","windpress"),onClick:d,class:"capitalize"},null,8,["label"])])]),_:1},8,["close"])}}}),bi={class:"flex gap-2"},gi=Y({__name:"RenameFileFormModal",props:{filePath:{}},emits:["close"],setup(e,{emit:i}){let r=D(),s=i,t=e,n=O(t.filePath),d=O(!1);W(()=>n.value,()=>{d.value=!1});function a(){if(d.value=!1,!n.value){d.value=wp.i18n.__("Filename is required","windpress");return}if(!n.value.endsWith(".css")&&!n.value.endsWith(".js")){d.value=wp.i18n.__("File extension must be .css or .js","windpress");return}if(!/^[a-zA-Z0-9_.\-\/]+$/.test(n.value)){d.value=wp.i18n.__("Only alphanumeric, dash, underscore, forward slash, and dot are allowed","windpress");return}if(r.data.entries.find(o=>o.relative_path===`${n.value}`&&o.hidden!==!0)){d.value=wp.i18n.sprintf(wp.i18n.__('A file named "%s" already exists',"windpress"),n.value);return}s("close",n.value)}return(o,c)=>{let m=fe,w=ve,p=N,b=$;return T(),I(b,{close:{onClick:()=>s("close")}},{title:g(()=>[V(F(o.i18n.__("Rename File","windpress")),1)]),body:g(()=>[P(w,{label:"Old Filename",description:o.i18n.__("The previous filename","windpress"),class:"mb-2"},{default:g(()=>[P(m,{value:t.filePath,disabled:!0,class:"w-full"},null,8,["value"])]),_:1},8,["description"]),P(w,{label:"New Filename",required:"",description:o.i18n.__("Filename may include a path. (css or js)","windpress"),error:d.value},{default:g(()=>[P(m,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h),placeholder:"theme/color.css",class:"w-full"},null,8,["modelValue"])]),_:1},8,["description","error"])]),footer:g(()=>[u("div",bi,[P(p,{color:"neutral",variant:"soft",label:o.i18n.__("cancel","windpress"),onClick:c[1]||(c[1]=h=>s("close")),class:"capitalize"},null,8,["label"]),P(p,{color:"primary",variant:"soft",label:o.i18n.__("Submit","windpress"),onClick:a,class:"capitalize"},null,8,["label"])])]),_:1},8,["close"])}}}),Ei=U(me()),C=D(),Pi=Ni(),Fi=H(),_=Ri(),k=Li();async function Si(e){if(e.readonly){_.add({title:wp.i18n.__("Error","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is read-only and not deletable',"windpress"),e.relative_path),color:"error",icon:"i-lucide-trash"});return}if(e.relative_path==="main.css"){_.add({title:wp.i18n.__("Error","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is required for the WindPress to work and not deletable',"windpress"),e.relative_path),color:"error",icon:"i-lucide-trash"});return}if(!await k.create(Q,{destroyOnClose:!0,props:{filePath:e.relative_path,fileContent:e.content,actionYes:wp.i18n.__("delete","windpress")}}).open().result){_.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is not deleted',"windpress"),e.relative_path),color:"info",icon:"i-lucide-trash"});return}C.softDeleteEntry(e),_.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" deleted',"windpress"),e.relative_path),color:"success",icon:"i-lucide-trash"})}async function Ci(e){if(!await k.create(Q,{destroyOnClose:!0,props:{filePath:e.relative_path,fileContent:e.content,actionYes:wp.i18n.__("reset","windpress")}}).open().result){_.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" is not reset',"windpress"),e.relative_path),color:"info",icon:"lucide:file-minus-2"});return}C.resetEntry(e),_.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" reset',"windpress"),e.relative_path),color:"success",icon:"lucide:file-minus-2"}),ee().then(()=>{C.doPull()})}async function ee(){let e={title:wp.i18n.__("Saving...","windpress"),description:wp.i18n.__("Please wait while we save your changes.","windpress"),duration:0,icon:"lucide:loader-circle",close:!1,color:"neutral",ui:{icon:"animate-spin"}};return _.toasts.value.find(i=>i.id==="file-editor.doSave")?_.update("file-editor.doSave",{...e}):_.add({id:"file-editor.doSave",...e}),C.doPush().then(()=>{_.update("file-editor.doSave",{title:wp.i18n.__("Saved","windpress"),description:wp.i18n.__("Your changes have been saved.","windpress"),icon:"i-lucide-save",color:"success",duration:void 0,close:!0,ui:{icon:void 0}}),Number(Pi.virtualOptions("general.tailwindcss.version",4).value)===4&&Fi.doPush()}).catch(i=>{_.update("file-editor.doSave",{title:wp.i18n.__("Error","windpress"),description:wp.i18n.__("An error occurred while saving your changes.","windpress"),icon:"i-lucide-save",color:"error",duration:void 0,close:!0,ui:{icon:void 0}})}).finally(()=>{let i=new BroadcastChannel("windpress");["windpress/observer","windpress/intellisense"].forEach(r=>{i.postMessage({source:"windpress/dashboard",target:r,task:"windpress.code-editor.saved",payload:{volume:qi(C.getKVEntries())}})}),i.close()})}function ji(){let e={entries:C.data.entries,_windpress:!0,_version:window.windpress._version,_wp_version:window.windpress._wp_version,_timestamp:new Date().getTime(),_uid:Yi(),_type:"sfs"},i=we.compressToUint8Array(JSON.stringify(e)),r=new Blob([i],{type:"application/octet-stream"}),s=URL.createObjectURL(r),t=document.createElement("a");t.href=s,t.download=`sfs-${(0,Ei.default)().format("YYYYMMDDHHmmss")}.windpress`,t.click(),URL.revokeObjectURL(s),_.add({title:wp.i18n.__("Exported","windpress"),description:wp.i18n.__("SFS volume data exported","windpress"),color:"success",icon:"i-lucide-download"})}async function xi(e){let i=e.target;if(!i||!i.files||i.files.length===0)return;let r=i.files[0];if(!r)return;if(!r.name.endsWith(".windpress")){_.add({title:wp.i18n.__("SFS Import","windpress"),description:wp.i18n.__("Invalid file format","windpress"),color:"error",icon:"i-lucide-upload"});return}let s;try{if(s=JSON.parse(we.decompressFromUint8Array(new Uint8Array(await r.arrayBuffer()))||"{}"),!s._windpress||s._type!=="sfs")throw Error(wp.i18n.__("File is not a valid WindPress file","windpress"))}catch(t){_.add({title:wp.i18n.__("SFS Import","windpress"),description:t instanceof Error?t.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-upload"});return}if(!await k.create(vi,{destroyOnClose:!0,props:{data:s}}).open().result){_.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.__("SFS import canceled","windpress"),color:"info",icon:"i-lucide-upload"}),i.value="";return}_.add({id:"file-import.doImport",title:wp.i18n.__("Importing...","windpress"),description:wp.i18n.__("Please wait while we import the data.","windpress"),icon:"lucide:loader-circle",close:!1,duration:0,color:"neutral",ui:{icon:"animate-spin"}}),await new Promise(t=>setTimeout(t,500));try{let t=s.entries.map(n=>{if(n.signature&&n.handler==="internal"){let{signature:d,...a}=n;return a}return n});C.data.entries=t,_.update("file-import.doImport",{title:wp.i18n.__("Success","windpress"),description:wp.i18n.__("SFS data imported. Remember to save the changes.","windpress"),color:"success",icon:"i-lucide-upload",duration:void 0,close:!0,ui:{icon:void 0}}),i.value=""}catch(t){_.update("file-import.doImport",{title:wp.i18n.__("Error","windpress"),description:t instanceof Error?t.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-upload",close:!0,duration:void 0,ui:{icon:void 0}}),i.value=""}}async function Oi(){let e=await k.create(yi,{destroyOnClose:!0}).open().result;if(!e){_.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.__("New file creation canceled","windpress"),color:"info",icon:"i-lucide-plus"});return}try{C.addNewEntry(e),_.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" created',"windpress"),e),color:"success",icon:"i-lucide-plus"})}catch(i){_.add({title:wp.i18n.__("Error","windpress"),description:i instanceof Error?i.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-plus"})}}async function Ai(e){let i=await k.create(gi,{destroyOnClose:!0,props:{filePath:e.relative_path}}).open().result;if(!i){_.add({title:wp.i18n.__("Canceled","windpress"),description:wp.i18n.__("File rename canceled","windpress"),color:"info",icon:"i-lucide-edit"});return}try{C.renameEntry(e,i),_.add({title:wp.i18n.__("Success","windpress"),description:wp.i18n.sprintf(wp.i18n.__('File "%s" renamed to "%s"',"windpress"),e.relative_path,i),color:"success",icon:"i-lucide-edit"})}catch(r){_.add({title:wp.i18n.__("Error","windpress"),description:r instanceof Error?r.message:wp.i18n.__("An unknown error occurred","windpress"),color:"error",icon:"i-lucide-edit"})}}he=function(){return{deleteFile:Si,resetFile:Ci,save:ee,exportVolume:ji,importVolume:xi,addNewFile:Oi,renameFile:Ai}}})();export{Bi as __tla,H as n,D as r,he as t};
